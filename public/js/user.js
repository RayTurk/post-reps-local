"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[183],{5195:(e,t,a)=>{a.d(t,{Z:()=>n});const n={googleKey:a(1601).Z.urlContains("local")?"AIzaSyCNqhRTqZM2fILA4IL2F2uZEXKGAn6T_cw":"AIzaSyDvDROcLtqhfIpsWUdbU7sm5p98xjSrThw"}},1601:(e,t,a)=>{a.d(t,{Z:()=>d});var n=a(7757),o=a.n(n);a(6486);function i(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return r(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function c(e,t,a,n,o,i,r){try{var c=e[i](r),l=c.value}catch(e){return void a(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function l(e){return function(){var t=this,a=arguments;return new Promise((function(n,o){var i=e.apply(t,a);function r(e){c(i,n,o,r,l,"next",e)}function l(e){c(i,n,o,r,l,"throw",e)}r(void 0)}))}}var s={getSiteUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return window.location.origin+e},validateEmail:function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},validateDomain:function(e){return/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9](?:\.[a-zA-Z]{2,})+$/.test(String(e).toLowerCase())},alertError:function(e){$("#errorModalContent").html(e),$("#errorModal").modal("show"),$(".modal").css({"overflow-y":"scroll"})},alertMsg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=$("#messageModal");a.find("#messageModelTitle").html(e),a.find("#messageModelContent").html(t),a.modal("show"),$(".modal").css({"overflow-y":"scroll"})},confirm:function(e,t,a,n){$(".modal").css({"overflow-y":"scroll"}),e?$("#confirmModalHeader").html(e):$("#confirmModalHeader").html("Are you sure?"),t?$("#confirmModalContent").html(t):$("#confirmModalContent").html("This action is irreversible!"),$("#confirmModal").modal("show"),$("#confirmBtnOk").off("click"),$("#confirmBtnOk").on("click",(function(e){e.stopImmediatePropagation(),$("#confirmModal").modal("hide"),a()})),$("#confirmBtnCancel").off("click"),$("#confirmBtnCancel").on("click",(function(e){e.stopImmediatePropagation(),$("#confirmModal").modal("hide"),n()}))},confirm2:function(e,t,a,n){$(".modal").css({"overflow-y":"scroll"}),e?$("#confirmModalHeader2").html(e):$("#confirmModalHeader2").html("Are you sure?"),t?$("#confirmModalContent2").html(t):$("#confirmModalContent2").html("This action is irreversible!"),$("#confirmModal2").modal("show"),$("#confirmBtnOk2").off("click"),$("#confirmBtnOk2").on("click",(function(e){e.stopImmediatePropagation(),$("#confirmModal2").modal("hide"),a()})),$("#confirmBtnCancel2").off("click"),$("#confirmBtnCancel2").on("click",(function(e){e.stopImmediatePropagation(),$("#confirmModal2").modal("hide"),n()}))},roundToHalf:function(e){return Math.round(2*e)/2},reloadPage:function(){window.location.reload()},serverErrorMessage:function(){return"An error occured, please try again or contact support if the problem persists."},inchesToFeet:function(e){return e/12},feetToInches:function(e){return 12*e},getDecimal:function(e){return e%1},isMobilePhone:function(){return window.matchMedia("only screen and (max-width: 800px)").matches},isTablet:function(){return window.matchMedia("only screen and (min-device-width: 768px) and (max-device-width: 1366px) and (-webkit-min-device-pixel-ratio: 1)").matches},redirectTo:function(e){window.location.href=e},urlContains:function(e){return-1!=window.location.href.indexOf(e)},stringContains:function(e,t){return-1!=e.indexOf(t)},validateForm:function(e){return l(o().mark((function t(){var a,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e instanceof HTMLElement)){t.next=17;break}if("form"!==e.localName){t.next=13;break}return a=e.querySelectorAll("input"),n=[],t.next=6,a.forEach((function(t){if(!("validation-except"in t.attributes)&&!["file"].includes(t.type)&&("required"in t.attributes&&!t.value.trim()&&n.push({node:t,type:"required"}),"validation-match"in t.attributes)){var a=t.attributes["validation-match"].value,o=(a=e[a]).value,i=t.value;o.trim()!=i.trim()&&(n.push({node:t,type:"match"}),n.push({node:a,type:"match"}))}}));case 6:return t.sent,document.querySelectorAll(".invalid-feedback").forEach((function(e){return e.remove()})),n.forEach((function(e){var t,a,n=e.node.attributes[e.type+"-error-msg"],o=null!==(t=null===(a=e.node.attributes["error-class"])||void 0===a?void 0:a.value)&&void 0!==t?t:"";if(e.node.classList.add("is-invalid"),n){var i='<div class="invalid-feedback '.concat(o,'">').concat(n.value,"</div>");e.node.insertAdjacentHTML("afterend",i)}})),n.length||(e.querySelectorAll("input").forEach((function(e){"validation-except"in e.attributes||(e.classList.remove("is-invalid"),e.classList.add("is-valid"))})),document.querySelectorAll(".invalid-feedback").forEach((function(e){return e.remove()}))),t.abrupt("return",{ok:!n.length,errors:n});case 13:return console.error("validateForm() acept  HTML element type of <form>. * YOU GIVE US  <".concat(e.localName,">").toUpperCase()),t.abrupt("return",!1);case 15:t.next=19;break;case 17:return console.error("validateForm() acept  HTML element.".toUpperCase()),t.abrupt("return",!1);case 19:case"end":return t.stop()}}),t)})))()},loadImageOn:function(e,t){(e=$(e)).length&&e.on("change",(function(e){if((t=$(t)).length){var a=e.target.files[0];t.prop("src",URL.createObjectURL(a))}}))},parseDate:function(e){var t=e.slice(0,10),a=(t=t.replace(/\//g,"-")).split("-");return new Date(a[0],a[1]-1,a[2])},parseUSDate:function(e){var t=e.slice(0,10),a=(t=t.replace(/\//g,"-")).split("-");return new Date(a[2],a[0]-1,a[1])},formatDate:function(e){var t=this.parseDate(e);return new Intl.DateTimeFormat("en",{month:"numeric",day:"numeric",year:"numeric"}).format(t)},formatDateCustom:function(e,t){var a=this.parseDate(e);return new Intl.DateTimeFormat("en",t).format(a)},formatDateTime:function(e){var t=new Date(e.replace(/\s/,"T")),a=t.getHours(),n=t.getMinutes(),o=a>=12?"PM":"AM",i=(a=(a%=12)||12)+":"+(n=n<10?"0"+n:n)+" "+o;return t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear()+"  "+i},formatDateUsa:function(e){var t=this.parseDate(e);return new Intl.DateTimeFormat("en-US").format(t)},formatDateUsaDateString:function(e){var t=this.parseUSDate(e);return new Intl.DateTimeFormat("en-US").format(t)},diffDays:function(e,t){var a=new Date(e),n=new Date(t).getTime()-a.getTime();return parseInt(n/864e5)},isNextDay:function(e,t){return 1==this.diffDays(e,t)},isCutoffTime:function(){var e=new Date;return e.getHours()>=20&&e.getMinutes()>0},getDateStringUsa:function(e){var t=e.getFullYear(),a="".concat(e.getMonth()+1),n="".concat(e.getDate());return 1==n.length&&(n="0"+n),1==a.length&&(a="0"+a),a+"/"+n+"/"+t},getDateString:function(e){var t=e.getFullYear(),a="".concat(e.getMonth()+1),n="".concat(e.getDate());return 1==n.length&&(n="0"+n),1==a.length&&(a="0"+a),"".concat(t,"-").concat(a,"-").concat(n)},getDateTimeString:function(e){var t=e.getFullYear(),a="".concat(e.getMonth()+1),n="".concat(e.getDate());1==n.length&&(n="0"+n),1==a.length&&(a="0"+a);var o=e.getHours(),i=e.getMinutes(),r=(o=(o%=12)||12)+":"+(i=i<10?"0"+i:i);return"".concat(t,"-").concat(a,"-").concat(n,"T").concat(r)},isLastDayOfMonth:function(e){return 1===new Date(e.getTime()+864e5).getDate()},tzOffset:function(){return(new Date).getTimezoneOffset()},previousDay:function(e){return e.setDate(e.getDate()-1),e},isWeekend:function(e){return 6===e.getDay()||0===e.getDay()},create_id:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))},parseZonePoints:function(e){return(e=JSON.parse(e)).map((function(e){return{lat:parseFloat(e.lat),lng:parseFloat(e.lng)}}))},orderOptions:function(e){var t=$(e),a=t.map((function(e,t){return{t:$(t).text(),v:t.value}})).get();a.sort((function(e,t){return e.t<t.t?1:e.t>t.t?-1:0})),t.each((function(e,t){t.value=a[e].v,$(t).text(a[e].t)}))},cardNumberInput:function(e){if(e){var t,a,n=document.querySelector(e),o=/^\d{0,16}$/g,i=function(e){return e.replace(/[^\d]/g,"")},r=function(e,t){return Math.floor(e/(t+1))},c=function(e){var t={amex:/^3/,visa:/^4/,mastercard:/^5/,disc:/^6/,genric:/(^1|^2|^7|^8|^9|^0)/};for(var a in t)if(t[a].test(e)){a;break}};n.addEventListener("keydown",(function(e){var n=e.target;t=n.value,a=n.selectionEnd})),n.addEventListener("input",(function(e){var n,l=e.target,s=i(l.value);s.match(o)?(s=function(e,t,a){for(var n=[],o=0;o<e.length;o++)0!==o&&o%t==0&&n.push(a),n.push(e[o]);return n.join("")}(s,4," "),n=a-r(a,4)+r(a+(s.length-t.length),4)+(i(s).length-i(t).length),l.value=""!==s?s:""):(l.value=t,n=a),l.setSelectionRange(n,n),c(l.value)}))}},removeFromArray:function(e,t){return e.splice(e.indexOf(t),1)},getZoneSettings:function(){return l(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.get(s.getSiteUrl("/get/zone/settings"));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))()},genId:function(){return"id"+Math.floor(99999999999999.66*Math.random()).toString(36).substring(1)},showLoader:function(){$("#loader_image").modal("show")},hideLoader:function(e){setTimeout((function(){$("#loader_image").modal("hide"),e&&($(".modal").css({"overflow-y":"scroll"}),$("#".concat(e)).modal())}),500)},openModal:function(e){$("#".concat(e)).modal()},closeModal:function(e){$("#".concat(e)).modal("hide"),$(".modal").css({"overflow-y":"scroll"})},inputNumber:function(e){var t=i(Array(100).keys());$("".concat(e)).on("keyup",(function(e){var a=$(e.target);a.val()&&(t.includes(parseInt(a.val()))?a.val(parseInt(a.val())):a.val(1))}))},getCurrentUserRole:function(){return l(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.get("".concat(s.getSiteUrl(),"/current/user/role"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},getInitialsFromName:function(e){var t=e.split(" ");return(t.shift().charAt(0)+t.pop().charAt(0)).toUpperCase()},initialUppercase:function(e){return"string"!=typeof e?"":e.charAt(0).toUpperCase()+e.slice(1)},initialUppercaseWord:function(e){if("string"!=typeof e)return"";for(var t=e.split(" "),a=0;a<t.length;a++)""!=t[a]&&void 0!==t[a]&&(t[a]=t[a][0].toUpperCase()+t[a].substr(1).toLowerCase());return t.join(" ")},loadImagePreview:function(e,t){if(e.target.files.length>0){var a=URL.createObjectURL(e.target.files[0]);document.getElementById(t).src=a}},isSuperAdmin:function(){return 1==$("#userRole").val()},log:function(e){return console.log(e),!1},decodeHtml:function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value},removeEmptyObjectFromArray:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.filter((function(e){return 0!==Object.keys(e).length}));return t},roundToDecimal:function(e,t){var a=Math.pow(10,t);return Math.round(e*a)/a}};const d=s},694:(t,a,n)=>{n.d(a,{Z:()=>w});var o=n(7757),i=n.n(o),r=n(1601);const c=function(t){var a=$(t.table);if(a.length){var n=$(t.search_element);return n.length&&n.on("keyup",(function(e){var a=window[t.tableName];a&&a.fnFilter(e.target.value)})),window[t.tableName]=a.dataTable({dom:"",pageLength:-1,ajax:r.Z.getSiteUrl("/datatable/offices"),serverSide:!0,columns:[{data:"inactive",name:"offices.inactive",defaultContent:"404",title:"inactive",visible:0},{data:"name",name:"users.name",defaultContent:"404",title:"Name",visible:0},{data:"address",defaultContent:"404",title:"address",name:"users.address",visible:0},{data:"city",defaultContent:"404",title:"city",name:"users.city",visible:0},{data:"state",defaultContent:"404",title:"state",name:"users.state",visible:0},{data:"zipcode",defaultContent:"404",title:"zipcode",name:"users.zipcode",visible:0},{data:"phone",defaultContent:"404",title:"phone",name:"users.phone",visible:0},{data:"email",defaultContent:"404",title:"email",name:"users.email",visible:0},{defaultContent:"404",orderable:0,searchable:0,width:"45%",className:"width-percent-45",render:function(t,a,n,o){var i="";return n.name&&(i+=e("span",{htmlContent:n.name+"<br>",office_id:n.id})),i}},{defaultContent:"404",orderable:0,searchable:0,width:"65%",className:"width-percent-65",render:function(t,a,n){var o,i,r,c="";return c+=e("span",{htmlContent:"".concat(null!==(o=n.city)&&void 0!==o?o:"",",").concat(null!==(i=n.state)&&void 0!==i?i:"",",").concat(null!==(r=n.zipcode)&&void 0!==r?r:"","<br>")})}}]}),a.on("draw.dt",(function(){var e=a.find("tbody tr"),t=e.find("[office_id='".concat(localStorage.current_office,"']"));t.length&&t.parent().parent().addClass("selectedOffice"),Object.values(e).forEach((function(t){t instanceof HTMLElement&&$(t).on("click",(function(){e.removeClass("selectedOffice");var a=$(t);a.addClass("selectedOffice");var n=a.find("[office_id]").attr("office_id");localStorage.new_office_id_for_agent=n}))}))})),$("#searchOfficeSubmit").on("click",(function(){var e,t,a=null!==(e=localStorage.selected_agent_for_change_office)&&void 0!==e?e:0,n=null!==(t=localStorage.new_office_id_for_agent)&&void 0!==t?t:0;$("#changeOfficeForm").attr("action","set/new/office/".concat(n,"/for/agent/").concat(a))})),a}};var l=n(6486),s=n.n(l),d={agentId:null,agentEmail:null,init:function(){window.editAgentModal=this.editAgentModal,window.manageCardsModalAgent=this.manageCardsModalAgent,this.removeCardButtonAgent(),window.updatePaymentMethodAgent=this.updatePaymentMethodAgent,window.noteAgentModal=this.noteAgentModal,window.changeOffice=this.changeOffice,this.agentSearchInput(),this.showAgentsEntries(),this.destroyAllAgents(),this.agentType(),window.OfficesSearch=c({table:"#changeOfficeTable",search_element:"#changeOfficeTableSearch",tableName:"changeOfficeTable"}),this.importAgents(),$("#importAgentFile").on("change",(function(){return $(".loading-overlay").toggleClass("d-none")})),window.viewOrders=this.viewOrders,this.changeAgentPassword(),this.onAdditionalSettingsClick(),window.onAgentNotificationClick=this.onAgentNotificationClick,this.onNewEmailSubmit(),window.removeAgentEmail=this.removeAgentEmail,this.onClosePasswordSettingsModal()},changeOffice:function(e,t){localStorage.selected_agent_for_change_office=e,localStorage.current_office=t;var a=$("#changeOfficeFormModal");a.length&&(window.OfficesSearch.api().draw(),a.modal(),a.on("hidden.bs.modal",(function(){localStorage.removeItem("selected_agent_for_change_office")})))},agentType:function(){var e=$("#agentType");e.length&&e.on("change",(function(){var t=e.val();window.agentDataTable.api().column(0).search(t).draw()}))},noteAgentModal:function(e){var t=$("#noteAgentFormModal"),a=$("#noteAgentForm");t.length&&$.get(r.Z.getSiteUrl("/get/agent/".concat(e))).done((function(e){a.attr("action",r.Z.getSiteUrl("/agent/".concat(e.id,"/create/note"))),t.find("[name='note']").text(e.note),$("[note-agent-name]").text(e.name),t.modal()})).fail((function(e){console.log(e)}))},updatePaymentMethodAgent:function(e,t){$.post(r.Z.getSiteUrl("/agent/".concat(e,"/update/payment/method")),{payment_method:t}).done((function(e){})).fail((function(e){console.log(e)}))},destroyAllAgents:function(){var e=$("#destroyAllAgents");e.length&&e.on("click",(function(){r.Z.confirm("","",(function(){var e=r.Z.getSiteUrl("/agents/delete/all");$.post(e).done((function(e){"success"===e.type&&window.agentDataTable.api().draw()})).fail((function(e){console.error(e)}))}),(function(){return""}))}))},showAgentsEntries:function(){var e=$("#showAgentsEntries");e.length?e.on("change",(function(e){var t=parseInt(e.target.value);window.agentDataTable.api().context[0]._iDisplayLength=t,window.agentDataTable.api().draw()})):console.error("#showAgentsEntries not exists")},agentSearchInput:function(){var e=$("#agentSearchInput");e.length?e.on("keyup",(function(e){var t=e.target;window.agentDataTable.fnFilter(t.value)})):console.error("#officeSearchInput no exists")},agentsDatatable:function(){var e=$("#agentsTable"),t=window.e;e.length&&(window.agentDataTable=e.dataTable({language:{search:"_INPUT_",searchPlaceholder:"Search..."},pageLength:10,dom:"rtip",ajax:r.Z.getSiteUrl("/datatable/agents"),serverSide:!0,searchCols:[{search:0}],columns:[{data:"inactive",defaultContent:"404",title:"inactive",name:"agents.inactive",visible:0},{data:"name",defaultContent:"404",title:"Name",name:"users.name",visible:0},{data:"address",defaultContent:"404",title:"address",name:"users.address",visible:0},{data:"city",defaultContent:"404",title:"city",name:"users.city",visible:0},{data:"state",defaultContent:"404",title:"state",name:"users.state",visible:0},{data:"zipcode",defaultContent:"404",title:"zipcode",name:"users.zipcode",visible:0},{data:"phone",defaultContent:"404",title:"phone",name:"users.phone",visible:0},{data:"email",defaultContent:"404",title:"email",name:"users.email",visible:0},{data:"office_name",defaultContent:"404",title:"office_name",name:"office_users.name",visible:0},{data:"id",defaultContent:"AGENT DETAILS",title:"AGENT DETAILS",render:function(e,a,n){var o,i,r,c="";return n.name&&(c+=t("b",{htmlContent:n.name+"<br>"})),n.address&&(c+=t("span",{htmlContent:n.address+"<br>"})),c+=t("span",{htmlContent:"".concat(null!==(o=n.city)&&void 0!==o?o:"",",").concat(null!==(i=n.state)&&void 0!==i?i:"",",").concat(null!==(r=n.zipcode)&&void 0!==r?r:"","<br>")}),n.phone&&(c+=t("span",{htmlContent:n.phone+"<br>"})),n.email&&(c+=t("span",{htmlContent:n.email+"<br>"})),c}},{defaultContent:"404",orderable:0,searchable:0,title:"AGENT OFFICE",render:function(e,a,n){var o,i,r="<div class='text-center'>";return r+=t("b",{htmlContent:" <b>"+(null!==(o=n.office_name)&&void 0!==o?o:"No Office Assigned")+"</b><br>"}),r+=t("b",{htmlContent:(null!==(i=n.office_phone)&&void 0!==i?i:"")+" <br>"}),r+=t("button",{htmlContent:"Change Office",class:"btn btn-sm btn-primary mt-2 mb-3",onclick:"window.changeOffice(".concat(n.id,",").concat(n.agent_office,")")}),r+=t("select",{htmlContent:"\n                                <option ".concat("1"==n.payment_method?"selected":"",' value="1">Pay at time of Order</option>\n                                <option ').concat("2"==n.payment_method?"selected":"",' value="2">Invoiced</option>\n                                <option ').concat("3"==n.payment_method?"selected":"",' value="3">Office Pay</option>\n                            '),class:"form-control text-center payment-method-select mx-auto",onchange:"window.updatePaymentMethodAgent(".concat(n.id,",this.value)")}),r+="</div>"}},{defaultContent:"ACTION",orderable:0,searchable:0,title:"ACTION",render:function(e,a,n){var o="<div class='text-center'>";return o+=t("a",{htmlContent:"Password Reset <br>",href:r.Z.getSiteUrl("/agent/".concat(n.id,"/reset/password")),class:" font-weight-bold"}),n.name=r.Z.decodeHtml(n.name),n.name=n.name.replace(/'/g,"\\'"),o+=t("a",{htmlContent:"View Orders <br>",class:" font-weight-bold",onclick:"window.viewOrders('".concat(n.name,"')")}),o+=t("a",{htmlContent:"Account Notes <br>",class:" font-weight-bold",onclick:"window.noteAgentModal(".concat(n.id,")")}),o+=t("a",{htmlContent:"Edit Account <br>",onclick:"window.editAgentModal(".concat(n.id,", '").concat(n.email,"')"),class:" font-weight-bold"}),o+=t("a",{htmlContent:"Manage Cards <br>",onclick:"window.manageCardsModalAgent(".concat(n.id,")"),class:" font-weight-bold"})}}]}))},editAgentModal:function(e,t){d.agentId=e,d.agentEmail=t,$.get(r.Z.getSiteUrl("/get/agent/".concat(e))).then((function(e){var t=$("#editAgentFormModal");$("#editAgentForm").attr("action",r.Z.getSiteUrl("/agents/"+e.id)),t.find("[name='user_id']").val(e.user_id),t.find("[name='first_name']").val(e.first_name),t.find("[name='last_name']").val(e.last_name),t.find("[name='phone']").val(e.phone),t.find("[name='address']").val(e.address),t.find("[name='city']").val(e.city),t.find("[name='re_license']").val(e.re_license),t.find("[name='email']").val(e.email),t.find("[name='zipcode']").val(e.zipcode),t.find("[name='state']").find('[value="'.concat(e.state,'"]')).prop("selected",!0),t.find("[name='agent_office']").find('[value="'.concat(e.agent_office,'"]')).prop("selected",!0),t.find("[name='inactive']").find('[value="'.concat(e.inactive,'"]')).prop("selected",!0),t.modal()})).fail((function(e){return console.error("failed to get agent for edit from")}))},manageCardsModalAgent:function(e){r.Z.showLoader();var t=$("#manageAgentCardsModal");$(".cards-container").remove(),$.get(r.Z.getSiteUrl("/get/agent-cards/".concat(e))).then((function(a){s().isEmpty(a)&&t.find("#modalBody").append('\n                        <div class="row mb-3 mt-1 cards-container">\n                            <div class="col-md-3 text-center font-weight-bold">\n                            </div>\n                            <div class="col-md-12 text-center font-weight-bold">\n                                <span class="w-50 mx-auto alert alert-warning">Currently there are no cards saved for this account.</span>\n                            </div>\n                            <div class="col-md-2 text-center">\n                            </div>\n                        </div>\n                    '),Object.keys(a).forEach((function(n){t.find("#modalBody").append('\n                            <div class="row mb-3 mt-1 cards-container">\n                                <div class="col-md-3 text-center font-weight-bold">\n                                </div>\n                                <div class="col-md-4 text-left font-weight-bold">\n                                    <span>'.concat(a[n].cardType,": ").concat(a[n].cardNumber," exp ").concat(a[n].expDate,'</span>\n                                </div>\n                                <div class="col-md-2 text-center">\n                                    <button class="btn bg-danger text-white ml-2 pt-1 pb-1 pl-4 pr-4 rounded-0 remove-card-agent" id="removeCardButton" data-payment_profile_id="').concat(n,'" data-agent_id="').concat(e,'">Remove</button>\n                                </div>\n                            </div>\n                        '))})),r.Z.hideLoader(),t.modal()})).fail((function(e){r.Z.hideLoader(),r.Z.alertError(r.Z.serverErrorMessage())}))},removeCardButtonAgent:function(){var e=this;$("body").on("click",".remove-card-agent",(function(t){var a=$(t.target),n=a.data("payment_profile_id"),o=a.data("agent_id");r.Z.confirm("Remove Card","Are you sure you want to remove this card?",(function(){r.Z.showLoader(),$.post("".concat(r.Z.getSiteUrl(),"/agent-cards/remove/").concat(n,"/").concat(o)).then((function(t){r.Z.hideLoader(),r.Z.alertMsg("Card Removed","Card removed successfully."),e.manageCardsModalAgent(o)})).fail((function(e){r.Z.hideLoader(),"error"==e.responseJSON.type?r.Z.alertError(e.responseJSON.message):r.Z.alertError(r.Z.alertError(r.Z.serverErrorMessage()))}))}),(function(){}))}))},importAgents:function(){$("#importAgentFile").on("change",(function(){$("#importAgentsForm").trigger("submit")})),$("#importAgentsForm").on("submit",(function(){$('label[for="importAgentFile"]').text("PROCESSING...").css("cursor","none")}))},viewOrders:function(e){r.Z.redirectTo(r.Z.getSiteUrl("/order/status?search=".concat(e)))},changeAgentPassword:function(){$("#changeAgentPasswordBtn").on("click",(function(e){var t=$("#newAgentPassword").val(),a=$("#confirmAgentPassword").val();return t&&a?t!==a?(r.Z.alertError("Passwords don't match."),!1):void $.post("".concat(r.Z.getSiteUrl(),"/agent/").concat(d.agentId,"/change/password"),{newPassword:t}).done((function(){$("#newAgentPassword").val(""),$("#confirmAgentPassword").val(""),r.Z.alertMsg("Change Password","Password changed successfully."),r.Z.closeModal("changeAgentPasswordModal")})):(r.Z.alertError("All fields are required."),!1)}))},agentNotificationEmailDatatable:function(){$("#emailNotificationTableAgent").DataTable({initComplete:function(e){$.fn.dataTable.tables({visible:!0,api:!0}).columns.adjust(),d.getRecordsCount()},retrieve:!0,ordering:!0,pageLength:10,dom:'t<"text-muted h6" i>',language:{info:"(_TOTAL_ of 5 email accounts used)"},ajax:r.Z.getSiteUrl("/datatable/agent/email-settings/".concat(d.agentId)),serverSide:!0,columns:[{data:"email",defaultContent:"404",title:"",name:"email",visible:1,width:"50%",orderable:!1},{data:"order",defaultContent:"404",title:"Order Notifcations",name:"order",visible:1,render:function(e,t,a){return'<input type="checkbox" name="order" id="orderNotification'.concat(a.id,'" onclick="window.onAgentNotificationClick(\'').concat(a.email,"', ").concat(a.id,')" ').concat(a.order?"checked":"",' class="m-0 mx-1 scale-1_5">')}},{data:"accounting",defaultContent:"404",title:"Accounting Notifications",name:"accounting",visible:1,render:function(e,t,a){return'<input type="checkbox" name="accounting" id="accountingNotification'.concat(a.id,'" onclick="window.onAgentNotificationClick(\'').concat(a.email,"', ").concat(a.id,')" ').concat(a.accounting?"checked":"",' class="m-0 mx-1 scale-1_5">')}},{data:"",defaultContent:"404",title:"",name:"",visible:1,render:function(e,t,a){return a.email==d.agentEmail?"":'<a href="#" onclick="window.removeAgentEmail(\''.concat(a.email,"')\">Remove</a>")}}]})},onAdditionalSettingsClick:function(){var e=this;$("#agentAdditionalSettingsBtn").on("click",(function(t){e.agentNotificationEmailDatatable(),$.post("".concat(r.Z.getSiteUrl(),"/agent/email-settings/add"),{agent_id:d.agentId,email:d.agentEmail,user_email:d.agentEmail}).done((function(e){$("#emailNotificationTableAgent").DataTable().ajax.reload(d.getRecordsCount)})).fail((function(e){$("#emailNotificationTableAgent").DataTable().ajax.reload(d.getRecordsCount)}))}))},onAgentNotificationClick:function(e,t){$.post("".concat(r.Z.getSiteUrl(),"/agent/email-settings/update"),{agent_id:d.agentId,email:e,order:$("#orderNotification".concat(t)).is(":checked")?1:0,accounting:$("#accountingNotification".concat(t)).is(":checked")?1:0}).done((function(e){$("#emailNotificationTableAgent").DataTable().ajax.reload(d.getRecordsCount)})).fail((function(e){$("#emailNotificationTableAgent").DataTable().ajax.reload(d.getRecordsCount)}))},onNewEmailSubmit:function(){$("#newAgentEmailForm").on("submit",(function(e){e.preventDefault(),$.post("".concat(r.Z.getSiteUrl(),"/agent/email-settings/add"),{email:$("#newEmailAgent").val(),agent_id:d.agentId,order:$("#orderNotificationAgent").is(":checked")?1:0,accounting:$("#accountingNotificationAgent").is(":checked")?1:0}).done((function(e){$("#newEmailAgent").val(""),$("#orderNotificationAgent").prop("checked",!1),$("#accountingNotificationAgent").prop("checked",!1),$("#addEmailNotificationSettingsModalAgent").modal("hide"),r.Z.alertMsg("New Email added","The new email was added successfully."),$("#emailNotificationTableAgent").DataTable().ajax.reload(d.getRecordsCount)})).fail((function(e){$("#newEmail").val(""),$("#addEmailNotificationSettingsModalAgent").modal("hide"),r.Z.alertError(e.responseJSON.errors.email),$("#emailNotificationTableAgent").DataTable().ajax.reload(d.getRecordsCount)}))}))},removeAgentEmail:function(e){r.Z.confirm("Are you sure?"," This action is irreversible",(function(){$.post("".concat(r.Z.getSiteUrl(),"/agent/email-settings/remove"),{email:e,agent_id:d.agentId}).done((function(e){r.Z.alertMsg("Email deleted","The email was deleted successfully."),$("#emailNotificationTableAgent").DataTable().ajax.reload(d.getRecordsCount)})).fail((function(e){r.Z.alertError(r.Z.serverErrorMessage()),$("#emailNotificationTableAgent").DataTable().ajax.reload(d.getRecordsCount)}))}),(function(){}))},onClosePasswordSettingsModal:function(){$("#emailNotificationSettingsModalAgent").on("hide.bs.modal",(function(){$("#emailNotificationTableAgent").DataTable().destroy()}))},getRecordsCount:function(){5==$("#emailNotificationTableAgent").DataTable().page.info().recordsTotal?$("#addNewEmailBtnAgent").prop("disabled",!0):$("#addNewEmailBtnAgent").prop("disabled",!1)}};const f=d;var p={officeId:null,officeEmail:null,officeAgentId:null,init:function(){this.watchLogoImageInput(),window.editOfficeModal=this.editOfficeModal,window.manageCardsModal=this.manageCardsModal,this.removeCardButton(),window.editOfficeAgentModal=this.editOfficeAgentModal,window.noteOfficeModal=this.noteOfficeModal,window.viewAgents=this.viewAgents,window.viewOrders=this.viewOrders,window.addAgent=this.addAgent,window.updatePaymentMethodOffice=this.updatePaymentMethodOffice,window.updatePaymentMethodOfficeAgent=this.updatePaymentMethodOfficeAgent,window.isHaveErrorCreateOfficeFormModel&&$("#createOfficeFormModal").modal(),window.disconnectOfficeAgent=this.disconnectOfficeAgent,this.officeSearchInput(),this.showOfficesEntries(),this.destroyAllOffices(),this.officeType(),this.changeOfficePassword(),this.onAdditionalSettingsClick(),window.onNotificationClick=this.onNotificationClick,this.onNewEmailSubmit(),window.removeEmail=this.removeEmail,this.onClosePasswordSettingsModal()},officeType:function(){var e=$("#officeType");e.length&&e.on("change",(function(){var t=e.val();window.officeDataTable.api().column(0).search(t).draw()}))},noteOfficeModal:function(e){var t=$("#noteOfficeFormModal"),a=$("#noteOfficeForm");t.length&&$.get(r.Z.getSiteUrl("/get/office/".concat(e))).done((function(e){a.attr("action",r.Z.getSiteUrl("/office/".concat(e.id,"/create/note"))),t.find("[name='note']").text(e.note),$("[note-office-name]").text(e.name),t.modal()})).fail((function(e){console.log(e)}))},updatePaymentMethodOffice:function(e,t){$.post(r.Z.getSiteUrl("/office/".concat(e,"/update/payment/method")),{payment_method:t}).done((function(e){})).fail((function(e){console.log(e)}))},addAgent:function(e){var t=$("#createAgentFormModal");if(t.length){var a=t.find('[name="agent_office"]').find('option[value="'.concat(e,'"]'));a.length&&(a.prop("selected",!0),t.modal())}else console.error("#createAgentFormModal does not exist")},viewAgents:function(e,t){$.get(r.Z.getSiteUrl("/get/office/".concat(e))).done((function(e){$("#agentSearchInput").length&&$("#agentSearchInput").val(e.name),window.agentDataTable?(window.agentDataTable.fnFilter(e.name,8),$("#pills-agents-tab").trigger("click")):console.error("Agent datatable does does not exist")}))},destroyAllOffices:function(){var e=$("#destroyAllOffices");e.length&&e.on("click",(function(){r.Z.confirm("","",(function(){var e=r.Z.getSiteUrl("/offices/delete/all");$.post(e).done((function(e){"success"===e.type&&window.officeDataTable.api().draw()})).fail((function(e){console.error(e)}))}),(function(){return""}))}))},officeSearchInput:function(){var e=$("#officeSearchInput");e.length?e.on("keyup",(function(e){var t=e.target;window.officeDataTable.fnFilter(t.value)})):console.error("#officeSearchInput does not exist")},showOfficesEntries:function(){var e=$("#showOfficesEntries");e.length?e.on("change",(function(e){var t=parseInt(e.target.value);window.officeDataTable.api().context[0]._iDisplayLength=t,window.officeDataTable.api().draw()})):console.error("#showOfficesEntries does not exist")},officesDatatable:function(){var e=$("#officesTable"),t=window.e;e.length&&(window.officeDataTable=e.dataTable({language:{search:"_INPUT_",searchPlaceholder:"Search..."},pageLength:10,dom:"rtip",ajax:r.Z.getSiteUrl("/datatable/offices"),serverSide:!0,searchCols:[{search:0}],columns:[{data:"inactive",name:"offices.inactive",defaultContent:"404",title:"offices.inactive",visible:0},{data:"name",name:"users.name",defaultContent:"404",title:"Name",visible:0},{data:"address",defaultContent:"404",title:"address",name:"users.address",visible:0},{data:"city",defaultContent:"404",title:"city",name:"users.city",visible:0},{data:"state",defaultContent:"404",title:"state",name:"users.state",visible:0},{data:"zipcode",defaultContent:"404",title:"zipcode",name:"users.zipcode",visible:0},{data:"primary_contact",defaultContent:"404",title:"primary_contact",visible:0},{data:"phone",defaultContent:"404",title:"phone",name:"users.phone",visible:0},{data:"email",defaultContent:"404",title:"email",name:"users.email",visible:0},{data:"id",defaultContent:"OFFICE DETAILS",title:"OFFICE DETAILS",render:function(e,a,n){var o,i,r,c="";return n.name&&(c+=t("b",{htmlContent:n.name+"<br>"})),n.address&&(c+=t("span",{htmlContent:n.address+"<br>"})),c+=t("span",{htmlContent:"".concat(null!==(o=n.city)&&void 0!==o?o:"",", ").concat(null!==(i=n.state)&&void 0!==i?i:"",", ").concat(null!==(r=n.zipcode)&&void 0!==r?r:"","<br>")}),n.primary_contact&&(c+=t("span",{htmlContent:n.primary_contact+"<br>"})),n.phone&&(c+=t("span",{htmlContent:n.phone+"<br>"})),n.email&&(c+=t("span",{htmlContent:n.email+"<br>"})),c}},{defaultContent:"OFFICE DETAILS",orderable:0,searchable:0,title:"OFFICE AGENTS",render:function(e,a,n){var o="<div class='text-center'>";return o+=t("span",{htmlContent:" <b>TOTAL AGENTS:</b> "+n.agents_count+"<br>"}),o+=t("b",{htmlContent:"<a onclick=\"window.viewAgents('".concat(n.id,"',").concat(n.inactive,')">View Agents</a> <br>')}),o+=t("button",{htmlContent:"Add Agent",class:"btn btn-sm btn-primary mt-2 mb-3",onclick:"window.addAgent(".concat(n.id,")")}),o+="<div class='d-flex justify-content-center'>",o+=t("select",{htmlContent:"\n                                <option ".concat("1"==n.payment_method?"selected":"",' value="1">Pay at time of Order</option>\n                                <option ').concat("2"==n.payment_method?"selected":"",' value="2">Invoiced</option>\n                            '),class:"form-control text-center payment-method-select",onchange:"window.updatePaymentMethodOffice(".concat(n.id,",this.value)")}),o+="</div>",o+="</div>"}},{defaultContent:"ACTION",orderable:0,searchable:0,title:"ACTION",render:function(e,a,n){var o="<div class='text-center'>";return o+=t("a",{htmlContent:"Password Reset <br>",href:r.Z.getSiteUrl("/office/".concat(n.id,"/reset/password")),class:""}),n.name=r.Z.decodeHtml(n.name),n.name=n.name.replace(/'/g,"\\'"),o+=t("a",{htmlContent:"View Orders <br>",class:"",onclick:"window.viewOrders('".concat(n.name,"')")}),o+=t("a",{htmlContent:"Account Notes <br>",class:"",onclick:"window.noteOfficeModal(".concat(n.id,")")}),o+=t("a",{htmlContent:"Edit Account <br>",onclick:"window.editOfficeModal(".concat(n.id,", '").concat(n.email,"')"),class:""}),o+=t("a",{htmlContent:"Manage Cards <br>",onclick:"window.manageCardsModal(".concat(n.id,")"),class:""})}}]}))},editOfficeModal:function(e,t){p.officeId=e,p.officeEmail=t,$.get(r.Z.getSiteUrl("/get/office/".concat(e))).then((function(e){var t=$("#editOfficeFormModal");$("#editOfficeForm").attr("action",r.Z.getSiteUrl("/offices/"+e.id)),t.find("[name='user_id']").val(e.user_id),t.find("[name='name']").val(e.name),t.find("[name='primary_contact']").val(e.primary_contact),t.find("[name='address']").val(e.address),t.find("[name='phone']").val(e.phone),t.find("[name='city']").val(e.city),t.find("[name='email']").val(e.email),t.find("[name='state']").find('option[value="'.concat(e.state,'"]')).prop("selected",!0),t.find("[name='zipcode']").val(e.zipcode),t.find("[name='website']").val(e.website),t.find("[name='inactive']").find('option[value="'.concat(e.inactive,'"]')).prop("selected",!0),t.find("[name='private']").find('option[value="'.concat(e.private,'"]')).prop("selected",!0),t.find("[name='name_abbreviation']").val(e.name_abbreviation),t.find("[name='region_id']").find('option[value="'.concat(e.region_id,'"]')).prop("selected",!0),t.find(".edit_logo_preview").find("img").prop("src",r.Z.getSiteUrl("/private/image/office/"+e.logo_image)),t.modal()})).fail((function(e){return console.error("failed to get office for edit form")}))},manageCardsModal:function(e){r.Z.showLoader();var t=$("#manageOfficeCardsModal");$(".cards-container").remove(),$.get(r.Z.getSiteUrl("/get/office-cards/".concat(e))).then((function(a){s().isEmpty(a)&&t.find("#modalBody").append('\n                        <div class="row mb-3 mt-1 cards-container">\n                            <div class="col-md-3 text-center font-weight-bold">\n                            </div>\n                            <div class="col-md-12 text-center font-weight-bold">\n                                <span class="w-50 mx-auto alert alert-warning">Currently there are no cards saved for this account.</span>\n                            </div>\n                            <div class="col-md-2 text-center">\n                            </div>\n                        </div>\n                    '),Object.keys(a).forEach((function(n){t.find("#modalBody").append('\n                            <div class="row mb-3 mt-1 cards-container">\n                                <div class="col-md-3 text-center font-weight-bold">\n                                </div>\n                                <div class="col-md-4 text-left font-weight-bold">\n                                    <span>'.concat(a[n].cardType,": ").concat(a[n].cardNumber," exp ").concat(a[n].expDate,'</span>\n                                </div>\n                                <div class="col-md-2 text-center">\n                                    <button class="btn bg-danger text-white ml-2 pt-1 pb-1 pl-4 pr-4 rounded-0 remove-card" id="removeCardButton" data-payment_profile_id="').concat(n,'" data-office_id="').concat(e,'">Remove</button>\n                                </div>\n                            </div>\n                        '))})),r.Z.hideLoader(),t.modal()})).fail((function(e){r.Z.hideLoader(),r.Z.alertError(r.Z.serverErrorMessage())}))},removeCardButton:function(){var e=this;$("body").on("click",".remove-card",(function(t){var a=$(t.target),n=a.data("payment_profile_id"),o=a.data("office_id");r.Z.confirm("Remove Card","Are you sure you want to remove this card?",(function(){r.Z.showLoader(),$.post("".concat(r.Z.getSiteUrl(),"/office-cards/remove/").concat(n,"/").concat(o)).then((function(t){r.Z.hideLoader(),r.Z.alertMsg("Card Removed","Card removed successfully."),e.manageCardsModal(o)})).fail((function(e){r.Z.hideLoader(),"error"==e.responseJSON.type?r.Z.alertError(e.responseJSON.message):r.Z.alertError(r.Z.alertError(r.Z.serverErrorMessage()))}))}),(function(){}))}))},watchLogoImageInput:function(){$("[name='logo_image']").on("change",(function(e){var t=e.target.files[0];$(".logo_preview img").prop("src",URL.createObjectURL(t)),$(".logo_preview").show()})),$("[name='edit_logo_image']").on("change",(function(e){var t=e.target.files[0];$(".edit_logo_preview img").prop("src",URL.createObjectURL(t))}))},viewOrders:function(e){console.log(e),r.Z.redirectTo(r.Z.getSiteUrl("/order/status?search=".concat(e)))},changeOfficePassword:function(){$("#changeOfficePasswordBtn").on("click",(function(e){var t=$("#newOfficePassword").val(),a=$("#confirmOfficePassword").val();return t&&a?t!==a?(r.Z.alertError("Passwords don't match."),!1):void $.post("".concat(r.Z.getSiteUrl(),"/office/").concat(p.officeId,"/change/password"),{newPassword:t}).done((function(){$("#newOfficePassword").val(""),$("#confirmOfficePassword").val(""),r.Z.alertMsg("Change Password","Password changed successfully."),r.Z.closeModal("changeOfficePasswordModal")})):(r.Z.alertError("All fields are required."),!1)}))},editOfficeAgentModal:function(e){p.officeAgentId=e,p.getOfficeAgent(),$.get(r.Z.getSiteUrl("/office-agents/get/agent/".concat(e))).then((function(e){var t=$("#editOfficeAgentFormModal");$("#editOfficeAgentForm").attr("action",r.Z.getSiteUrl("/office-agents/"+e.id)),t.find("[name='first_name']").val(e.first_name),t.find("[name='last_name']").val(e.last_name),t.find("[name='phone']").val(e.phone),t.find("[name='address']").val(e.address),t.find("[name='city']").val(e.city),t.find("[name='re_license']").val(e.re_license),t.find("[name='email']").val(e.email),t.find("[name='zipcode']").val(e.zipcode),t.find("[name='state']").find('[value="'.concat(e.state,'"]')).prop("selected",!0),t.modal()})).fail((function(e){return console.error("failed to get agent for edit from")}))},updatePaymentMethodOfficeAgent:function(e,t){$.post(r.Z.getSiteUrl("/office-agents/".concat(e,"/update/payment/method")),{payment_method:t}).done((function(e){})).fail((function(e){r.Z.alertError(r.Z.serverErrorMessage())}))},disconnectOfficeAgent:function(e){r.Z.confirm("Disconnect agent","Are you sure you wish to remove this agent from the office?",(function(t){$.post(r.Z.getSiteUrl("/office-agents/remove/".concat(e))).done((function(e){r.Z.reloadPage()})).fail((function(e){r.Z.alertError(r.Z.serverErrorMessage())}))}),(function(e){}))},officeAgentsDatatable:function(){var e=$("#officeAgentsTable"),t=window.e;e.length&&(window.agentDataTable=e.dataTable({language:{search:"_INPUT_",searchPlaceholder:"Search..."},pageLength:10,dom:"rtip",ajax:r.Z.getSiteUrl("/datatable/office-agents"),serverSide:!0,searchCols:[{search:0}],columns:[{data:"inactive",defaultContent:"404",title:"inactive",name:"agents.inactive",visible:0},{data:"name",defaultContent:"404",title:"Name",name:"users.name",visible:0},{data:"address",defaultContent:"404",title:"address",name:"users.address",visible:0},{data:"city",defaultContent:"404",title:"city",name:"users.city",visible:0},{data:"state",defaultContent:"404",title:"state",name:"users.state",visible:0},{data:"zipcode",defaultContent:"404",title:"zipcode",name:"users.zipcode",visible:0},{data:"phone",defaultContent:"404",title:"phone",name:"users.phone",visible:0},{data:"email",defaultContent:"404",title:"email",name:"users.email",visible:0},{data:"office_name",defaultContent:"404",title:"office_name",name:"office_users.name",visible:0},{data:"id",defaultContent:"AGENT DETAILS",title:"AGENT DETAILS",render:function(e,a,n){var o,i,r,c="";return n.name&&(c+=t("b",{htmlContent:n.name+"<br>"})),n.address&&(c+=t("span",{htmlContent:n.address+"<br>"})),c+=t("span",{htmlContent:"".concat(null!==(o=n.city)&&void 0!==o?o:"",",").concat(null!==(i=n.state)&&void 0!==i?i:"",",").concat(null!==(r=n.zipcode)&&void 0!==r?r:"","<br>")}),n.phone&&(c+=t("span",{htmlContent:n.phone+"<br>"})),n.email&&(c+=t("span",{htmlContent:n.email+"<br>"})),c}},{defaultContent:"404",orderable:0,searchable:0,title:"AGENT OFFICE",render:function(e,a,n){var o,i,r="<div class='text-center'>";return r+=t("b",{htmlContent:" <b>"+(null!==(o=n.office_name)&&void 0!==o?o:"No Office Assigned")+"</b><br>"}),r+=t("b",{htmlContent:(null!==(i=n.office_phone)&&void 0!==i?i:"")+" <br>"}),r+=t("button",{htmlContent:"Disconnect",class:"btn btn-sm btn-primary mt-2 mb-3",onclick:"window.disconnectOfficeAgent(".concat(n.id,")")}),r+=t("select",{htmlContent:"\n                                <option ".concat("1"==n.payment_method?"selected":"",' value="1">Pay at time of Order</option>\n                                <option ').concat("3"==n.payment_method?"selected":"",' value="3">Office Pay</option>\n                            '),class:"form-control text-center payment-method-select mx-auto",onchange:"window.updatePaymentMethodOfficeAgent(".concat(n.id,",this.value)")}),r+="</div>"}},{defaultContent:"ACTION",orderable:0,searchable:0,title:"ACTION",render:function(e,a,n){var o="<div class='text-center'>";return n.name=r.Z.decodeHtml(n.name),n.name=n.name.replace(/'/g,"\\'"),o+=t("a",{htmlContent:"View Orders <br>",class:" font-weight-bold",onclick:"window.viewOrders('".concat(n.name,"')")}),o+=t("a",{htmlContent:"Edit Account <br>",onclick:"window.editOfficeAgentModal(".concat(n.id,")"),class:" font-weight-bold"})}}]}))},officeNotificationEmailDatatable:function(){$("#emailNotificationTable").DataTable({initComplete:function(e){$.fn.dataTable.tables({visible:!0,api:!0}).columns.adjust(),p.getRecordsCount()},retrieve:!0,ordering:!0,pageLength:10,dom:'t<"text-muted h6" i>',language:{info:"(_TOTAL_ of 5 email accounts used)"},ajax:r.Z.getSiteUrl("/datatable/office/email-settings/".concat(p.officeId)),serverSide:!0,columns:[{data:"email",defaultContent:"404",title:"",name:"email",visible:1,width:"50%",orderable:!1},{data:"order",defaultContent:"404",title:"Order Notifcations",name:"order",visible:1,render:function(e,t,a){return'<input type="checkbox" name="order" id="orderNotification'.concat(a.id,'" onclick="window.onNotificationClick(\'').concat(a.email,"', ").concat(a.id,')" ').concat(a.order?"checked":"",' class="m-0 mx-1 scale-1_5">')}},{data:"accounting",defaultContent:"404",title:"Accounting Notifications",name:"accounting",visible:1,render:function(e,t,a){return'<input type="checkbox" name="accounting" id="accountingNotification'.concat(a.id,'" onclick="window.onNotificationClick(\'').concat(a.email,"', ").concat(a.id,')" ').concat(a.accounting?"checked":"",' class="m-0 mx-1 scale-1_5">')}},{data:"",defaultContent:"404",title:"",name:"",visible:1,render:function(e,t,a){return a.email==p.officeEmail?"":'<a href="#" onclick="window.removeEmail(\''.concat(a.email,"')\">Remove</a>")}}]})},onAdditionalSettingsClick:function(){var e=this;$("#additionalSettingsBtn").on("click",(function(t){e.officeNotificationEmailDatatable(),$.post("".concat(r.Z.getSiteUrl(),"/office/email-settings/add"),{office_id:p.officeId,email:p.officeEmail,user_email:p.officeEmail}).done((function(e){$("#emailNotificationTable").DataTable().ajax.reload(p.getRecordsCount)})).fail((function(e){$("#emailNotificationTable").DataTable().ajax.reload(p.getRecordsCount)}))}))},onNotificationClick:function(e,t){$.post("".concat(r.Z.getSiteUrl(),"/office/email-settings/update"),{office_id:p.officeId,email:e,order:$("#orderNotification".concat(t)).is(":checked")?1:0,accounting:$("#accountingNotification".concat(t)).is(":checked")?1:0}).done((function(e){$("#emailNotificationTable").DataTable().ajax.reload(p.getRecordsCount)})).fail((function(e){$("#emailNotificationTable").DataTable().ajax.reload(p.getRecordsCount)}))},onNewEmailSubmit:function(){$("#newOfficeEmailForm").on("submit",(function(e){e.preventDefault(),$.post("".concat(r.Z.getSiteUrl(),"/office/email-settings/add"),{email:$("#newEmail").val(),office_id:p.officeId,order:$("#orderNotification").is(":checked")?1:0,accounting:$("#accountingNotification").is(":checked")?1:0}).done((function(e){$("#newEmail").val(""),$("#orderNotification").prop("checked",!1),$("#accountingNotification").prop("checked",!1),$("#addEmailNotificationSettingsModal").modal("hide"),r.Z.alertMsg("New Email added","The new email was added successfully."),$("#emailNotificationTable").DataTable().ajax.reload(p.getRecordsCount)})).fail((function(e){$("#newEmail").val(""),$("#addEmailNotificationSettingsModal").modal("hide"),r.Z.alertError(e.responseJSON.errors.email),$("#emailNotificationTable").DataTable().ajax.reload(p.getRecordsCount)}))}))},removeEmail:function(e){r.Z.confirm("Are you sure?"," This action is irreversible",(function(){$.post("".concat(r.Z.getSiteUrl(),"/office/email-settings/remove"),{email:e,office_id:p.officeId}).done((function(e){r.Z.alertMsg("Email deleted","The email was deleted successfully."),$("#emailNotificationTable").DataTable().ajax.reload(p.getRecordsCount)})).fail((function(e){r.Z.alertError(r.Z.serverErrorMessage()),$("#emailNotificationTable").DataTable().ajax.reload(p.getRecordsCount)}))}),(function(){}))},onClosePasswordSettingsModal:function(){$("#emailNotificationSettingsModal").on("hide.bs.modal",(function(){$("#emailNotificationTable").DataTable().destroy()}))},getRecordsCount:function(){5==$("#emailNotificationTable").DataTable().page.info().recordsTotal?$("#addNewEmailBtn").prop("disabled",!0):$("#addNewEmailBtn").prop("disabled",!1)},getOfficeAgent:function(){$.get(r.Z.getSiteUrl("/office-agents/get/agent/".concat(p.officeAgentId))).done((function(e){w.agent=e,f.agentId=e.id,f.agentEmail=e.email})).fail((function(e){r.Z.alertError(r.Z.serverErrorMessage())}))}};const u=p;var m=n(5195);const g=function(t){var a=$(t.table);if(a.length){var n=$(t.search_element);return n.length&&n.on("keyup",(function(e){var a=window[t.tableName];a&&a.fnFilter(e.target.value)})),window[t.tableName]=a.dataTable({dom:"",pageLength:-1,ajax:r.Z.getSiteUrl("/settings/agent/offices"),serverSide:!0,columns:[{data:"inactive",name:"offices.inactive",defaultContent:"404",title:"inactive",visible:0},{data:"name",name:"users.name",defaultContent:"404",title:"Name",visible:0},{data:"address",defaultContent:"404",title:"address",name:"users.address",visible:0},{data:"city",defaultContent:"404",title:"city",name:"users.city",visible:0},{data:"state",defaultContent:"404",title:"state",name:"users.state",visible:0},{data:"zipcode",defaultContent:"404",title:"zipcode",name:"users.zipcode",visible:0},{data:"phone",defaultContent:"404",title:"phone",name:"users.phone",visible:0},{data:"email",defaultContent:"404",title:"email",name:"users.email",visible:0},{defaultContent:"404",orderable:0,searchable:0,width:"45%",className:"width-percent-45",render:function(t,a,n,o){var i="";return n.name&&(i+=e("span",{htmlContent:n.name+"<br>",office_id:n.id})),i}},{defaultContent:"404",orderable:0,searchable:0,width:"65%",className:"width-percent-65",render:function(t,a,n){var o,i,r,c="";return c+=e("span",{htmlContent:"".concat(null!==(o=n.city)&&void 0!==o?o:"",",").concat(null!==(i=n.state)&&void 0!==i?i:"",",").concat(null!==(r=n.zipcode)&&void 0!==r?r:"","<br>")})}}]}),a.on("draw.dt",(function(){var e=a.find("tbody tr"),t=e.find("[office_id='".concat(localStorage.current_office,"']"));t.length&&t.parent().parent().addClass("selectedOffice"),Object.values(e).forEach((function(t){t instanceof HTMLElement&&$(t).on("click",(function(){e.removeClass("selectedOffice");var a=$(t);a.addClass("selectedOffice");var n=a.find("[office_id]").attr("office_id");localStorage.new_office_id_for_agent=n}))}))})),$("#searchOfficeSubmit").on("click",(function(){var e,t,a=null!==(e=localStorage.selected_agent_for_change_office)&&void 0!==e?e:0,n=null!==(t=localStorage.new_office_id_for_agent)&&void 0!==t?t:0;$("#changeOfficeForm").attr("action","settings/set/new/office/".concat(n,"/for/agent/").concat(a))})),a}};function v(e,t,a,n,o,i,r){try{var c=e[i](r),l=c.value}catch(e){return void a(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function h(e){return function(){var t=this,a=arguments;return new Promise((function(n,o){var i=e.apply(t,a);function r(e){v(i,n,o,r,c,"next",e)}function c(e){v(i,n,o,r,c,"throw",e)}r(void 0)}))}}var b={userRole:$("#userRole").val(),agent:null,office:null,role:{superAdmin:1,office:2,agent:3,installer:4},init:function(){(r.Z.urlContains("settings")&&b.userRole==b.role.agent?($.get("".concat(r.Z.getSiteUrl(),"/settings/agent")).done((function(e){b.agent=e.agent,f.agentId=e.agent.id,f.agentEmail=e.email})).fail((function(e){r.Z.alertError(r.Z.serverErrorMessage())})),f.onAdditionalSettingsClick(),window.onAgentNotificationClick=f.onAgentNotificationClick,f.onNewEmailSubmit(),window.removeAgentEmail=f.removeAgentEmail,f.onClosePasswordSettingsModal(),window.changeOffice=this.changeOffice,window.agentOfficesSearch=g({table:"#changeOfficeTable",search_element:"#changeOfficeTableSearch",tableName:"changeOfficeTable"})):r.Z.urlContains("settings")&&b.userRole==b.role.office&&($.get("".concat(r.Z.getSiteUrl(),"/settings/office")).done((function(e){u.officeId=e.office.id,u.officeEmail=e.email})).fail((function(e){r.Z.alertError(r.Z.serverErrorMessage())})),u.onAdditionalSettingsClick(),window.onNotificationClick=u.onNotificationClick,u.onNewEmailSubmit(),window.removeEmail=u.removeEmail,u.onClosePasswordSettingsModal()),r.Z.urlContains("users"))?(u.init(),f.init(),u.officesDatatable(),this.userRole==b.role.office&&(u.getOfficeAgent(),u.officeAgentsDatatable()),f.agentsDatatable(),this.installerDatatable(),this.activeTab(),window.editInstallerModal=this.editInstallerModal,this.installerSearchInput(),this.showInstallersEntries(),this.activeInactive()):-1!=window.location.href.indexOf("installer/order/details/")?(this.orderDetails(),this.onOrderCommentChange()):(this.installerSettings(),this.onOrderCardClick(),this.onRouteDateChange(),r.Z.urlContains("dashboard")&&($("#installerMapView").removeClass("order-tab-active"),$("#installerRoute").addClass("order-tab-active"),$("#installerPullList").removeClass("order-tab-active")),r.Z.urlContains("/installer/map/view")&&($("#installerMapView").addClass("order-tab-active"),$("#installerRoute").removeClass("order-tab-active"),$("#installerPullList").removeClass("order-tab-active"),this.initRoutingMap(),this.acceptJob()),r.Z.urlContains("/installer/pull/list")&&(this.pullList(),$("#installerMapView").removeClass("order-tab-active"),$("#installerRoute").removeClass("order-tab-active"),$("#installerPullList").addClass("order-tab-active")))},changeOffice:function(){localStorage.selected_agent_for_change_office=b.agent.id,localStorage.current_office=b.agent.agent_office;var e=$("#changeOfficeFormModal");e.length&&(window.agentOfficesSearch.api().draw(),e.modal(),e.on("hidden.bs.modal",(function(){localStorage.removeItem("selected_agent_for_change_office")})))},googleKey:m.Z.googleKey,initRoutingMap:function(){window.initRoutingMap=this.startRoutingMap;var e="https://maps.googleapis.com/maps/api/js?key=".concat(b.googleKey,"&callback=window.initRoutingMap&libraries=drawing,geometry,places&v=weekly");$("body").append(window.e("script",{src:e,googlescript:!0}))},startRoutingMap:function(){var e=new google.maps.Map(document.getElementById("installerMap"),{zoom:9,center:{lat:43.633994,lng:-116.433707},mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0});window.routeMap=e,window.markers={},b.loadRoutesOnMap($("#installerId").val())},previousMarkers:[],previousPolylines:[],routeOrders:{},installerId:{},totalAssigned:0,totalUnassigned:0,oms:{},assignedCounter:0,loadRoutesOnMap:function(e){return h(i().mark((function t(){var a,n,o,c,s,d,f,p,u,m,g,v,w,y,C,_,k,I,A;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return b.assignedCounter=0,b.installerId=e,a=window.routeMap,n="".concat(r.Z.getSiteUrl(),"/get/installer/orders"),t.next=6,$.post(n,{installerId:e,route_date:$("#installerRouteDateSelect").val()});case 6:if(o=t.sent,b.routeOrders=o,b.oms=new OverlappingMarkerSpiderfier(a,{markersWontMove:!0,markersWontHide:!0,basicFormatEvents:!0,circleSpiralSwitchover:0,keepSpiderfied:!0,nearbyDistance:25,spiralFootSeparation:26,spiralLengthStart:11,spiralLengthFactor:4}),(c=b.previousMarkers).length)for(s=0;s<c.length;s++)c[s].setMap(null);if((d=b.previousPolylines).length)for(f=0;f<d.length;f++)d[f].setMap(null);if(new google.maps.InfoWindow,p=[],u=[],o.length){for($.each(o,(function(e,t){var a,n,o,i,c,s={};s.order_type=t.order_type,s.latitude="null"==t.pickup_latitude||(0,l.isNull)(t.pickup_latitude)?t.latitude:t.pickup_latitude,s.longitude="null"==t.pickup_longitude||(0,l.isNull)(t.pickup_longitude)?t.longitude:t.pickup_longitude,t.assigned_to>0?("install"==t.order_type&&(o=""+r.Z.initialUppercase(t.order_type),i=r.Z.getInitialsFromName(t.installer_name),n=t.stop_number>=10?""+t.stop_number:""+t.stop_number,a="".concat(i," ").concat(o," ").concat(n)),"delivery"==t.order_type&&(o=""+r.Z.initialUppercase(t.order_type),i=r.Z.getInitialsFromName(t.installer_name),n=t.stop_number>=10?""+t.stop_number:""+t.stop_number,a="".concat(i," ").concat(o," ").concat(n)),"repair"==t.order_type&&(o=""+r.Z.initialUppercase(t.order_type),i=r.Z.getInitialsFromName(t.installer_name),n=t.stop_number>=10?""+t.stop_number:""+t.stop_number,a="".concat(i," ").concat(o," ").concat(n)),"removal"==t.order_type&&(o=""+r.Z.initialUppercase(t.order_type),i=r.Z.getInitialsFromName(t.installer_name),n=t.stop_number>=10?""+t.stop_number:""+t.stop_number,a="".concat(i," ").concat(o," ").concat(n)),s.label=a,s.assigned=!0,s.routing_color=t.routing_color,s.stop_number=t.stop_number,s.installerId=t.installer_id):(2==t.desired_date_type?("install"==t.order_type&&(o=""+r.Z.initialUppercase(t.order_type),c=t.desired_date.substr(8,2),a="".concat(c," ").concat(o)),"repair"==t.order_type&&(o=""+r.Z.initialUppercase(t.order_type),c=t.desired_date.substr(8,2),a="".concat(c," ").concat(o)),"delivery"==t.order_type&&(o=""+r.Z.initialUppercase(t.order_type),c=t.desired_date.substr(8,2),a="".concat(c," ").concat(o)),"removal"==t.order_type&&(o=""+r.Z.initialUppercase(t.order_type),c=t.desired_date.substr(8,2),a="".concat(c," ").concat(o)),s.label=a,s.rushOrder=!1):(s.label="RUSH",s.rushOrder=!0),s.assigned=!1,s.installerId=0),s.address="null"==t.pickup_address||(0,l.isNull)(t.pickup_address)?t.address:t.pickup_address,t.desired_date&&(s.desired_date=r.Z.formatDate(t.desired_date)),1==t.desired_date_type&&(s.desired_date="Rush Order"),s.office_name=t.office_name,s.agent_name=t.agent_name||"",s.order_number=t.order_number,s.order_id=t.id,u[e]=s})),b.totalAssigned=0,b.totalUnassigned=0,m=0;m<u.length;m++)g=u[m],v=new google.maps.LatLng(g.latitude,g.longitude),p.push(g),w=void 0,y=void 0,g.installerId>0?(b.totalAssigned++,w={url:r.Z.getSiteUrl("/images/route_map_pin_template2.png"),anchor:new google.maps.Point(0,20),labelOrigin:{x:14,y:10}},g.rushOrder&&(w={url:r.Z.getSiteUrl("/images/route_map_pin_template_rush_order.png"),anchor:new google.maps.Point(0,20),labelOrigin:{x:14,y:10}}),C="0","0","install"==g.order_type&&(C="1px"),"repair"==g.order_type&&(C="2px"),"delivery"==g.order_type&&(C="1px"),document.head.insertAdjacentHTML("beforeend",'\n                        <style class="routing-style">\n                            .route-map-label'.concat(g.installerId,"{\n                                background-color: ").concat(g.routing_color,";\n                                width: 16px;\n                                height: 16px;\n                                border-radius: 51%;\n                                margin-left: -8px;\n                                padding: 1px ").concat("0"," 0 ").concat(C,";\n                                text-align: left;\n                            }\n                        </style>\n                    ")),y={text:g.label,fontSize:"11px",fontWeight:"700",color:"#FFFFFF",className:"route-map-label".concat(g.installerId)}):(b.totalUnassigned++,w={url:r.Z.getSiteUrl("/images/route_map_pin_template_unassigned.png"),anchor:new google.maps.Point(0,20),labelOrigin:{x:14,y:10}},g.rushOrder?(w={url:r.Z.getSiteUrl("/images/route_map_pin_template_rush_order.png"),anchor:new google.maps.Point(0,20),labelOrigin:{x:14,y:11}},y={text:g.label,fontSize:"12px",fontWeight:"700"}):(_="38px","repair"==g.order_type&&(_="39px"),"removal"==g.order_type&&(_="45px"),"delivery"==g.order_type&&(_="42px"),document.head.insertAdjacentHTML("beforeend",'\n                            <style class="routing-unassigned-style">\n                                .route-map-label-unassigned'.concat(g.order_type,"{\n                                    margin-left: ").concat(_,";\n                                    padding: 1px 0 0 0;\n                                    text-align: left;\n                                }\n                            </style>\n                        ")),y={text:g.label,fontSize:"12px",fontWeight:"700",className:"route-map-label-unassigned".concat(g.order_type)})),k=new google.maps.Marker({position:v,map:a,icon:w,label:y}),b.previousMarkers.push(k),function(e,t){google.maps.event.addListener(e,"spider_click",function(){var e=h(i().mark((function e(a){var n,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.assigned?(r.Z.showLoader(),n=$("#installerRouteDateSelect").val(),o="".concat(r.Z.getSiteUrl(),"/installer/map/view/").concat(t.order_type,"/").concat(t.order_id,"/").concat(n),r.Z.redirectTo(o)):(r.Z.showLoader(),b.getOrderItems(t.order_id,t.order_type),setTimeout((function(){$("#acceptJobModal").find("#acceptJobBtn").data("order-type",t.order_type),$("#acceptJobModal").find("#acceptJobBtn").data("order-id",t.order_id),$("#acceptJobModal").find("#jobAddress").html(t.address),$("#acceptJobModal").find("#jobOfficeAgent").html("".concat(t.office_name," - ").concat(t.agent_name)),r.Z.hideLoader("acceptJobModal")}),500));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}(k,g),b.oms.addMarker(k);$("#totalAssigned").html(" ".concat(b.totalAssigned)),$("#totalUnassigned").html(" ".concat(b.totalUnassigned)),b.totalAssigned<=1&&r.Z.hideLoader(),b.delay=0,I=p.map((function(e){return e.installerId})),A=[],$.each(I,(function(e,t){if(!A.includes(t)&&t>0){var a=p.filter((function(e){return e.installerId==t}));$.each(a,(function(e,t){if(a[e+1]){var n={origin:"".concat(t.latitude,", ").concat(t.longitude),destination:"".concat(a[e+1].latitude,", ").concat(a[e+1].longitude)};b.processDirection(n,t)}})),A.push(t)}}))}case 17:case"end":return t.stop()}}),t)})))()},delay:0,processDirection:function(e,t){return h(i().mark((function a(){var n,o,c,l,s,d;return i().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=window.routeMap,o={origin:e.origin,destination:e.destination},a.next=4,$.post("".concat(r.Z.getSiteUrl(),"/order/get/direction"),o);case 4:(c=a.sent)&&(c=JSON.parse(c),(l=c.routes[0].overview_polyline.points)&&(s=google.maps.geometry.encoding.decodePath(l),(d=new google.maps.Polyline({map:n,strokeColor:"".concat(t.routing_color)})).setPath(s),b.previousPolylines.push(d)));case 6:case"end":return a.stop()}}),a)})))()},assignJob:function(e){return h(i().mark((function t(){var a,n,o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(r.Z.getSiteUrl(),"/order/assign"),t.next=3,$.post(a,e);case 3:t.sent&&(n=$("#installerRouteDateSelect").val(),o="".concat(r.Z.getSiteUrl(),"/installer/map/view/").concat(e.orderType,"/").concat(e.orderId,"/").concat(n),r.Z.redirectTo(o));case 5:case"end":return t.stop()}}),t)})))()},onOrderCardClick:function(){$("body").on("click",".installer-order-card",(function(e){var t=$(e.target),a=t.data("order-id"),n=t.data("order-type"),o="".concat(r.Z.getSiteUrl(),"/installer/order/details/").concat(a,"/").concat(n);r.Z.redirectTo(o)})),$("body").on("change",".installer-stop-number",function(){var e=h(i().mark((function e(t){var a,n,o,c,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=$(t.target),n=a.data("order-id"),o=a.data("order-type"),c="".concat(r.Z.getSiteUrl(),"/order/assign/update"),l={installerId:b.installerId,orderType:o,stopNumber:a.val(),orderId:n,route_date:$("#installerRouteDateSelect").val()},e.next=7,$.post(c,l);case 7:e.sent&&r.Z.reloadPage();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},photoIndex:1,officeId:$("#officeId").val(),agentId:$("#agentId").val(),rowCountPickup:1,orderDetails:function(){var e=this;$(".close-order").on("click",(function(){var e="".concat(r.Z.getSiteUrl(),"/dashboard");window.location.href=e})),$("#installPhotoDiv1").on("click",(function(e){$("#fileUpload1").trigger("click")})),$("#installPhotoDiv2").on("click",(function(){$("#fileUpload2").trigger("click")})),$("#installPhotoDiv3").on("click",(function(){$("#fileUpload3").trigger("click")})),$('[name="installation_photos[]"]').on("change",(function(e){var t=$(e.target).data("index");r.Z.loadImagePreview(e,"photo".concat(t)),$("#photo".concat(t)).removeClass("d-none"),$("#photoIcon".concat(t)).addClass("d-none")})),$(".installation-items").on("change",(function(e){var t=$(e.target);t.is(":checked")||(t.addClass("d-none"),t.next(".out-of-inventory").removeClass("d-none"))})),$(".repair-items").on("change",(function(e){var t=$(e.target);t.is(":checked")||t.hasClass("not-item")||(t.addClass("d-none"),t.next(".repair-out-of-inventory").removeClass("d-none"))})),$("body").on("click",".out-of-inventory",(function(e){var t=$(e.target);e.currentTarget!=e.target?(t.parent().prev().removeClass("d-none"),t.parent().addClass("d-none")):(t.prev().removeClass("d-none"),t.addClass("d-none"))})),$("body").on("click",".repair-out-of-inventory",(function(e){var t=$(e.target);e.currentTarget!=e.target?(t.parent().prev().removeClass("d-none"),t.parent().addClass("d-none")):(t.prev().removeClass("d-none"),t.addClass("d-none"))})),$(".delivery-items").on("change",(function(e){var t=$(e.target);t.is(":checked")?(t.removeClass("d-none").prop("checked",!0),t.next(".delivery-out-of-inventory").addClass("d-none")):(t.addClass("d-none"),t.next(".delivery-out-of-inventory").removeClass("d-none"))})),$("body").on("click",".delivery-out-of-inventory",(function(e){var t=$(e.target);e.currentTarget!=e.target?(t.parent().prev().removeClass("d-none"),t.parent().addClass("d-none"),t.parent().prev().prop("checked",!0)):(t.prev().removeClass("d-none"),t.addClass("d-none"),t.prev().prop("checked",!0))})),$("#installSearchAccessory").on("keyup",(function(e){var t=$(e.target).val().toLowerCase();$(".modal-accessories").each((function(e,a){var n=$(a);-1==n.data("accessory-name").toLowerCase().indexOf(t)?n.addClass("d-none"):n.removeClass("d-none")}))})),$("#repairSearchAccessory").on("keyup",(function(e){var t=$(e.target).val().toLowerCase();$(".modal-accessories").each((function(e,a){var n=$(a);-1==n.data("accessory-name").toLowerCase().indexOf(t)?n.addClass("d-none"):n.removeClass("d-none")}))})),$("#installOpenAccessoriesModal").on("click",(function(e){$(".modal-accessories-checkbox").each((function(e,t){$(t).prop("checked",!1)})),r.Z.openModal("installAccessoriesModal")})),$("#repairOpenAccessoriesModal").on("click",(function(e){$(".modal-accessories-checkbox").each((function(e,t){$(t).prop("checked",!1)})),r.Z.openModal("repairAccessoriesModal")})),r.Z.inputNumber(".qty-box"),$("#installAddPanelsBtn").on("click",(function(t){"yes"==$("#orderHasAgent").val()?e.loadAgentPanels():e.loadOfficePanels(),$('[name="pickup_panel_style[1]"]').html('<option value="0">--Select Panel Style--</option>').prop("disabled",!1),$('[name="pickup_panel_qty[1]"]').val("").prop("disabled",!1),$("#addNewPickup1").show();for(var a=2;a<=b.rowCountPickup;a++)$("#pickupDiv".concat(a)).remove();r.Z.openModal("installAddPanelsModal")})),$("#repairAddPanelsBtn").on("click",(function(t){"yes"==$("#orderHasAgent").val()?e.loadAgentPanels():e.loadOfficePanels(),$('[name="pickup_panel_style[1]"]').html('<option value="0">--Select Panel Style--</option>').prop("disabled",!1),$('[name="pickup_panel_qty[1]"]').val("").prop("disabled",!1),$("#addNewPickup1").show();for(var a=2;a<=b.rowCountPickup;a++)$("#pickupDiv".concat(a)).remove();r.Z.openModal("repairAddPanelsModal")})),$("#removalAddPanelsBtn").on("click",(function(t){"yes"==$("#orderHasAgent").val()?e.loadAgentPanels():e.loadOfficePanels(),$('[name="pickup_panel_style[1]"]').html('<option value="0">--Select Panel Style--</option>').prop("disabled",!1),$('[name="pickup_panel_qty[1]"]').val("").prop("disabled",!1),$("#addNewPickup1").show();for(var a=2;a<=b.rowCountPickup;a++)$("#pickupDiv".concat(a)).remove();r.Z.openModal("removalAddPanelsModal")})),$("body").on("click",".add-new-pickup",(function(e){e.stopImmediatePropagation();var t=$(e.target).data("row");sessionStorage.setItem("rowNumber",t),r.Z.confirm("New Sign Panel","Is the panel design that is DIFFERENT from those already stored with us?",(function(){t=sessionStorage.getItem("rowNumber"),$('[name="pickup_panel_style['.concat(t,']"]')).append('<option value="-1">New Panel</option>').val("-1").prop("disabled",!0),$('[name="pickup_panel_qty['.concat(t,']"]')).val(1).prop("disabled",!0),$("#addNewPickup".concat(t)).hide()}),(function(){}))})),$("#addAnotherPickup").on("click",(function(){var e=$("#pickupTmpl").html(),t=$("#pickupContainer");b.rowCountPickup++;var a=e.replace(/rowCount/g,b.rowCountPickup);t.append(a);var n=$('[name="pickup_panel_style[1]"]').html();$('[name="pickup_panel_style['.concat(b.rowCountPickup,']"]')).html(n),$('[name="pickup_panel_style['.concat(b.rowCountPickup,']"]')).find('option[value="-1"]').remove()})),$("body").on("click",".remove-pickup",(function(e){$(e.target).closest(".to-append").remove(),b.rowCountPickup--})),$("#installSavePanelsBtn").on("click",(function(e){b.signPanels={panel:[],qty:[]},$(".panel-list").each((function(e,t){var a=$(t);0!=a.val()&&(b.signPanels.panel[e]=a.val(),b.signPanels.qty[e]=a.next(".qty-box").val())})),r.Z.closeModal("installAddPanelsModal")})),$("#repairSavePanelsBtn").on("click",(function(e){b.signPanels={panel:[],qty:[]},$(".panel-list").each((function(e,t){var a=$(t);0!=a.val()&&(b.signPanels.panel[e]=a.val(),b.signPanels.qty[e]=a.next(".qty-box").val())})),r.Z.closeModal("repairAddPanelsModal")})),$("#removalSavePanelsBtn").on("click",(function(e){b.signPanels={panel:[],qty:[]},$(".panel-list").each((function(e,t){var a=$(t);0!=a.val()&&(b.signPanels.panel[e]=a.val(),b.signPanels.qty[e]=a.next(".qty-box").val())})),r.Z.closeModal("removalAddPanelsModal")})),$("#installAddAccessoryBtn").on("click",(function(e){$(".modal-accessories-checkbox").each((function(e,t){var a=$(t);if(a.is(":checked")){var n=a.data("accessory-id");$(".hidden-accessories").each((function(e,t){var a=$(t);a.data("accessory-id")==n&&a.removeClass("d-none")}))}})),$("#installSearchAccessory").val("").trigger("keyup"),r.Z.closeModal("installAccessoriesModal")})),$("#repairAddAccessoryBtn").on("click",(function(e){$(".modal-accessories-checkbox").each((function(e,t){var a=$(t);if(a.is(":checked")){var n=a.data("accessory-id");$(".hidden-accessories").each((function(e,t){var a=$(t);a.data("accessory-id")==n&&a.removeClass("d-none")}))}})),$("#repairSearchAccessory").val("").trigger("keyup"),r.Z.closeModal("repairAccessoriesModal")})),$("body").on("click",".remove-accessory",(function(e){var t=$(e.target),a=0;a=e.currentTarget!=e.target?t.parent().data("accessory-id"):t.data("accessory-id"),$(".hidden-accessories").each((function(e,t){var n=$(t);n.data("accessory-id")==a&&n.addClass("d-none")}))})),$("#markInstallCompleteBtn").on("click",(function(e){e.stopImmediatePropagation();var t=$(e.target);t.prop("disabled",!0);var a,n,o="complete",i="",c="",l="",s="",d="",f="";$("#postCheckbox").is(":checked")?a=$("#postCheckbox").data("item-id"):!$("#postCheckbox").next(".out-of-inventory").hasClass("d-none")?s=$("#postCheckbox").data("item-id"):(o="incomplete",i=$("#postCheckbox").data("item-id"));if(""==$("#installerComments").val()||($("#installerComments").val()||"").trim().length<3)return r.Z.alertError("Comments are required and at least 3 characters long."),t.prop("disabled",!1),!1;if(!$("#addressVerified").is(":checked"))return r.Z.alertError("Address must be verified."),t.prop("disabled",!1),!1;if(!$("#fileUpload1").val()&&!$("#fileUpload2").val()&&!$("#fileUpload3").val())return r.Z.alertError("Photos must be uploaded."),t.prop("disabled",!1),!1;$("#panelCheckbox").length&&!$("#panelCheckbox").is(":checked")?!$("#panelCheckbox").next(".out-of-inventory").hasClass("d-none")?d=$("#panelCheckbox").next(".out-of-inventory").data("item-id"):(o="incomplete",c=$("#panelCheckbox").next(".out-of-inventory").data("item-id")):n=$("#panelCheckbox").data("item-id");var p=$("#installerComments").val(),u="";$(".accessory-div").each((function(e,t){var a=$(t);if(!a.hasClass("d-none")){var n=a.find(".accessories-checkbox");if(!n.is(":checked")){var i=!n.next(".out-of-inventory").hasClass("d-none"),r=n.next(".out-of-inventory").data("item-id");i?f+="".concat(r,","):(o="incomplete",l+="".concat(r,","))}if(n.is(":checked")){var c=a.find(".accessories-item");p+="\n                        ".concat(c.data("accessory-name")," ").concat(c.find("option:selected").text()),u+="".concat(n.data("item-id"),",")}}})),f=f.replace(/\,+$/,""),l=l.replace(/\,+$/,""),u=u.replace(/\,+$/,"");var m="";$(".out-of-inventory").each((function(e,t){var a=$(t);a.hasClass("d-none")||(m+="".concat(a.data("item-name"),","))})),m=m.replace(/\,+$/,"");var g=[];g.comments=p.replace(/undefined/g,""),g.outOfInventory=m,g.missingPostId=i,g.missingPanelId=c,g.missingAccessoriesIds=l,g.orderStatus=o,g.orderId=$("#orderId").val(),g.orderType=$("#orderType").val(),g.postOutOfInventoryId=s,g.panelOutOfInventoryId=d,g.accessoriesOutOfInventoryIds=f,g.installedAccessoriesIds=u,g.installedPostId=a,g.installedPanelId=n,"incomplete"==o?r.Z.confirm("Submit Order","There are unchecked items. Proceed?",(function(){r.Z.showLoader(),b.installOrderComplete(g)}),(function(){t.prop("disabled",!1)})):(r.Z.showLoader(),b.installOrderComplete(g))})),$("#markRepairCompleteBtn").on("click",(function(e){e.stopImmediatePropagation();var t=$(e.target);t.prop("disabled",!0);var a,n,o,i,c="complete",l="",s="",d="",f="",p=0;if($("#replaceRepairPostCheckbox").length&&!$("#replaceRepairPostCheckbox").is(":checked")&&(c="incomplete",a=!0),$("#replaceRepairPostCheckbox").length&&$("#replaceRepairPostCheckbox").is(":checked")&&(n=!0),$("#relocatePostCheckbox").length&&!$("#relocatePostCheckbox").is(":checked")&&(c="incomplete",o=!0),$("#relocatePostCheckbox").length&&$("#relocatePostCheckbox").is(":checked")&&(i=!0),""==$("#installerComments").val()||($("#installerComments").val()||"").trim().length<3)return r.Z.alertError("Comments are required and at least 3 characters long."),t.prop("disabled",!1),!1;if(!$("#addressVerified").is(":checked"))return r.Z.alertError("Address must be verified."),t.prop("disabled",!1),!1;if(!$("#fileUpload1").val()&&!$("#fileUpload2").val()&&!$("#fileUpload3").val())return r.Z.alertError("Photos must be uploaded."),t.prop("disabled",!1),!1;$("#panelCheckbox").length&&!$("#panelCheckbox").is(":checked")?!$("#panelCheckbox").next(".repair-out-of-inventory").hasClass("d-none")?d=$("#panelCheckbox").next(".repair-out-of-inventory").data("item-id"):(c="incomplete",l=$("#panelCheckbox").next(".repair-out-of-inventory").data("item-id")):p=$("#panelCheckbox").data("item-id");var u=$("#installerComments").val(),m="";$(".accessory-div").each((function(e,t){var a=$(t);if(!a.hasClass("d-none")){var n=a.find(".accessories-checkbox");if(!n.is(":checked")){var o=!n.next(".repair-out-of-inventory").hasClass("d-none"),i=n.next(".repair-out-of-inventory").data("item-id");o?f+="".concat(i,","):(c="incomplete",s+="".concat(i,","))}if(n.is(":checked")){var r=a.find(".accessories-item");u+="\n                        ".concat(r.data("accessory-name")," ").concat(r.find("option:selected").text()),n.hasClass(".to-remove")||(m+="".concat(n.data("item-id"),","))}}})),f=f.replace(/\,+$/,""),s=s.replace(/\,+$/,""),m=m.replace(/\,+$/,"");var g="";$(".repair-out-of-inventory").each((function(e,t){var a=$(t);a.hasClass("d-none")||(g+="".concat(a.data("item-name"),","))})),g=g.replace(/\,+$/,"");var v=[];v.comments=u.replace(/undefined/g,""),v.outOfInventory=g,v.missingPanelId=l,v.missingAccessoriesIds=s,v.orderStatus=c,v.orderId=$("#orderId").val(),v.orderType=$("#orderType").val(),v.panelOutOfInventoryId=d,v.accessoriesOutOfInventoryIds=f,v.repairedAccessoriesIds=m,v.repairedPanelId=p,void 0!==a&&(v.missingReplaceRepairPost=a),void 0!==o&&(v.missingRelocatePost=o),void 0!==n&&(v.postReplaceRepair=n),void 0!==i&&(v.postRelocate=i),"incomplete"==c?r.Z.confirm("Submit Order","There are unchecked items. Proceed?",(function(){r.Z.showLoader(),b.repairOrderComplete(v)}),(function(){t.prop("disabled",!1)})):(r.Z.showLoader(),b.repairOrderComplete(v))})),$("#markRemovalCompleteBtn").on("click",(function(e){e.stopImmediatePropagation();var t=$(e.target);t.prop("disabled",!0);var a="complete",n="",o="",i="",c="",l="",s="",d="";if($("#postCheckbox").is(":checked")?c=$("#postCheckbox").data("item-id"):(a="incomplete",n=$("#postCheckbox").data("item-id")),$("#panelCheckbox").length&&($("#panelCheckbox").is(":checked")?(l=$("#panelCheckbox").data("item-id"),d=$("#panelCheckbox").data("action")):(a="incomplete",o=$("#panelCheckbox").data("item-id"))),$(".accessory-div").each((function(e,t){var n=$(t).find(".accessories-checkbox");n.is(":checked")?s+="".concat(n.data("item-id"),","):(a="incomplete",i+="".concat(n.data("item-id"),","))})),i=i.replace(/\,+$/,""),s=s.replace(/\,+$/,""),""==$("#installerComments").val()||($("#installerComments").val()||"").trim().length<3)return r.Z.alertError("Comments are required and at least 3 characters long."),t.prop("disabled",!1),!1;if(!$("#addressVerified").is(":checked"))return r.Z.alertError("Address must be verified."),t.prop("disabled",!1),!1;var f=$("#installerComments").val(),p=[];p.comments=f.replace(/undefined/g,""),p.missingPostId=n,p.missingPanelId=o,p.missingAccessoriesIds=i,p.removedPostId=c,p.removedPanelId=l,p.removedAccessoriesIds=s,p.orderStatus=a,p.orderId=$("#orderId").val(),p.orderType=$("#orderType").val(),p.panelAction=d,"incomplete"==a?r.Z.confirm("Submit Order","There are unchecked items. Proceed?",(function(){r.Z.showLoader(),b.removalOrderComplete(p)}),(function(){t.prop("disabled",!1)})):(r.Z.showLoader(),b.removalOrderComplete(p))})),$("#markDeliveryCompleteBtn").on("click",(function(e){e.stopImmediatePropagation();var t=$(e.target);t.prop("disabled",!0);var a="",n="",o="",i="";if($(".delivery-items").each((function(e,t){var r=$(t);r.is(":checked")&&("pickup"==r.data("action")?(a+="".concat(r.data("item-id"),","),o+="".concat($('[data-qty-item-id="'.concat(r.data("item-id"),'"]')).val(),",")):(n+="".concat(r.data("item-id"),","),i+="".concat($('[data-qty-item-id="'.concat(r.data("item-id"),'"]')).val(),",")))})),a=a.replace(/\,+$/,""),n=n.replace(/\,+$/,""),o=o.replace(/\,+$/,""),i=i.replace(/\,+$/,""),""==$("#installerComments").val()||($("#installerComments").val()||"").trim().length<3)return r.Z.alertError("Comments are required and at least 3 characters long."),t.prop("disabled",!1),!1;if(!$("#addressVerified").is(":checked"))return r.Z.alertError("Address must be verified."),t.prop("disabled",!1),!1;var c=$("#installerComments").val(),l=[];l.comments=c.replace(/undefined/g,""),l.pickupPanelIds=a,l.dropoffPanelIds=n,l.orderId=$("#orderId").val(),l.orderType=$("#orderType").val(),l.pickupPanelQty=o,l.dropoffPanelQty=i,r.Z.showLoader(),b.deliveryOrderComplete(l)}))},loadOfficePanels:function(){$.get(r.Z.getSiteUrl("/get/office/".concat(b.officeId,"/panels"))).done((function(e){Array.isArray(e)||(e=Object.values(e));var t=$(".panel-list");t.empty();var a='<option value="0">--Select Panel Style--</option>';e.forEach((function(e){a+='\n                    <option value="'.concat(e.id,'">').concat(e.panel_name,"</option>\n                ")})),t.each((function(e,t){$(t).append(a)}))}))},loadAgentPanels:function(){$.get(r.Z.getSiteUrl("/get/agent/".concat(b.agentId,"/panels"))).done((function(e){Array.isArray(e)||(e=Object.values(e));var t=$(".panel-list");t.empty();var a='<option value="0">--Select Panel Style--</option>';e.forEach((function(e){a+='\n                    <option value="'.concat(e.id,'">').concat(e.panel_name,"</option>\n                ")})),t.each((function(e,t){$(t).append(a)}))}))},installOrderComplete:function(e){var t="".concat(r.Z.getSiteUrl(),"/installer/complete/install/order"),a=new FormData;a.append("installer_comments",e.comments),a.append("orderStatus",e.orderStatus),a.append("orderId",e.orderId),a.append("orderType",e.orderType),a.append("outOfInventory",e.outOfInventory),a.append("outOfInventoryIds",e.outOfInventoryIds),a.append("missingPostId",e.missingPostId),a.append("missingPanelId",e.missingPanelId),a.append("missingAccessoriesIds",e.missingAccessoriesIds),a.append("postOutOfInventoryId",e.postOutOfInventoryId),a.append("panelOutOfInventoryId",e.panelOutOfInventoryId),a.append("accessoriesOutOfInventoryIds",e.accessoriesOutOfInventoryIds),a.append("installedAccessoriesIds",e.installedAccessoriesIds),a.append("installedPostId",e.installedPostId),a.append("installedPanelId",e.installedPanelId),a.append("signPanels",JSON.stringify(b.signPanels)),$("#fileUpload1").val()&&a.append("photo1",$("#fileUpload1")[0].files[0]),$("#fileUpload2").val()&&a.append("photo2",$("#fileUpload2")[0].files[0]),$("#fileUpload3").val()&&a.append("photo3",$("#fileUpload3")[0].files[0]),$.ajax({url:t,data:a,type:"POST",contentType:!1,processData:!1,cache:!1}).done((function(e){4==b.userRole?r.Z.redirectTo("".concat(r.Z.getSiteUrl(),"/dashboard")):parent.location.reload()})).fail((function(e){r.Z.hideLoader(),r.Z.alertError(r.Z.serverErrorMessage())}))},repairOrderComplete:function(e){var t="".concat(r.Z.getSiteUrl(),"/installer/complete/repair/order"),a=new FormData;a.append("installer_comments",e.comments),a.append("orderStatus",e.orderStatus),a.append("orderId",e.orderId),a.append("orderType",e.orderType),a.append("outOfInventory",e.outOfInventory),a.append("missingPanelId",e.missingPanelId),a.append("missingAccessoriesIds",e.missingAccessoriesIds),a.append("panelOutOfInventoryId",e.panelOutOfInventoryId),a.append("accessoriesOutOfInventoryIds",e.accessoriesOutOfInventoryIds),a.append("repairedAccessoriesIds",e.repairedAccessoriesIds),a.append("repairedPanelId",e.repairedPanelId),a.append("signPanels",JSON.stringify(b.signPanels)),e.missingReplaceRepairPost&&a.append("missingReplaceRepairPost",e.missingReplaceRepairPost),e.missingRelocatePost&&a.append("missingRelocatePost",e.missingRelocatePost),e.postReplaceRepair&&a.append("postReplaceRepair",e.postReplaceRepair),e.postRelocate&&a.append("postRelocate",e.postRelocate),$("#fileUpload1").val()&&a.append("photo1",$("#fileUpload1")[0].files[0]),$("#fileUpload2").val()&&a.append("photo2",$("#fileUpload2")[0].files[0]),$("#fileUpload3").val()&&a.append("photo3",$("#fileUpload3")[0].files[0]),$.ajax({url:t,data:a,type:"POST",contentType:!1,processData:!1,cache:!1}).done((function(e){4==b.userRole?r.Z.redirectTo("".concat(r.Z.getSiteUrl(),"/dashboard")):parent.location.reload()})).fail((function(e){r.Z.hideLoader(),r.Z.alertError(r.Z.serverErrorMessage())}))},removalOrderComplete:function(e){var t="".concat(r.Z.getSiteUrl(),"/installer/complete/removal/order"),a=new FormData;a.append("installer_comments",e.comments),a.append("orderStatus",e.orderStatus),a.append("orderId",e.orderId),a.append("orderType",e.orderType),a.append("missingPostId",e.missingPostId),a.append("missingPanelId",e.missingPanelId),a.append("missingAccessoriesIds",e.missingAccessoriesIds),a.append("removedPostId",e.removedPostId),a.append("removedPanelId",e.removedPanelId),a.append("removedAccessoriesIds",e.removedAccessoriesIds),a.append("signPanels",JSON.stringify(b.signPanels)),a.append("panelAction",e.panelAction),$("#fileUpload1").val()&&a.append("photo1",$("#fileUpload1")[0].files[0]),$("#fileUpload2").val()&&a.append("photo2",$("#fileUpload2")[0].files[0]),$("#fileUpload3").val()&&a.append("photo3",$("#fileUpload3")[0].files[0]),$.ajax({url:t,data:a,type:"POST",contentType:!1,processData:!1,cache:!1}).done((function(e){4==b.userRole?r.Z.redirectTo("".concat(r.Z.getSiteUrl(),"/dashboard")):parent.location.reload()})).fail((function(e){r.Z.hideLoader(),r.Z.alertError(r.Z.serverErrorMessage())}))},deliveryOrderComplete:function(e){var t="".concat(r.Z.getSiteUrl(),"/installer/complete/delivery/order"),a=new FormData;a.append("installer_comments",e.comments),a.append("orderId",e.orderId),a.append("orderType",e.orderType),a.append("pickupPanelIds",e.pickupPanelIds),a.append("dropoffPanelIds",e.dropoffPanelIds),a.append("pickupPanelQty",e.pickupPanelQty),a.append("dropoffPanelQty",e.dropoffPanelQty),$("#fileUpload1").val()&&a.append("photo1",$("#fileUpload1")[0].files[0]),$("#fileUpload2").val()&&a.append("photo2",$("#fileUpload2")[0].files[0]),$("#fileUpload3").val()&&a.append("photo3",$("#fileUpload3")[0].files[0]),$.ajax({url:t,data:a,type:"POST",contentType:!1,processData:!1,cache:!1}).done((function(e){4==b.userRole?r.Z.redirectTo("".concat(r.Z.getSiteUrl(),"/dashboard")):parent.location.reload()})).fail((function(e){r.Z.hideLoader(),r.Z.alertError(r.Z.serverErrorMessage())}))},loadInstallerOrders:function(){return h(i().mark((function e(){var t,a,n,o,c,s,d,f,p;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=$("#installerId").val(),a=$("#installCardTmpl").html(),n=$("#repairCardTmpl").html(),o=$("#removalCardTmpl").html(),c=$("#deliveryCardTmpl").html(),(s=$("#installerCardContainer")).empty(),d="".concat(r.Z.getSiteUrl(),"/get/installer/assigned/orders"),e.next=10,$.post(d,{installerId:t});case 10:(f=e.sent)&&(p="",$.each(f,(function(e,t){var i=r.Z.initialUppercaseWord("null"==t.pickup_address||(0,l.isNull)(t.pickup_address)?t.address:t.pickup_address);if("install"==t.order_type){var s=a.replace(/replace_address/g,i),d=t.office_name;t.agent_name&&(d="".concat(t.agent_name,", ").concat(t.office_name)),d=r.Z.initialUppercaseWord(d),s=(s=(s=(s=s.replace(/agent_office/g,d)).replace(/post_name/g,t.post_name)).replace(/ORDER_ID/g,t.id)).replace(/ORDER_TYPE/g,t.order_type),p+=s}if("repair"==t.order_type){var f=n.replace(/replace_address/g,i),u=t.office_name;t.agent_name&&(u="".concat(t.agent_name,", ").concat(t.office_name)),u=r.Z.initialUppercaseWord(u),f=(f=(f=(f=f.replace(/agent_office/g,u)).replace(/post_name/g,t.post_name)).replace(/ORDER_ID/g,t.id)).replace(/ORDER_TYPE/g,t.order_type),p+=f}if("removal"==t.order_type){var m=o.replace(/replace_address/g,i),g=t.office_name;t.agent_name&&(g="".concat(t.agent_name,", ").concat(t.office_name)),g=r.Z.initialUppercaseWord(g),m=(m=(m=(m=m.replace(/agent_office/g,g)).replace(/post_name/g,t.post_name)).replace(/ORDER_ID/g,t.id)).replace(/ORDER_TYPE/g,t.order_type),p+=m}if("delivery"==t.order_type){var v=c.replace(/replace_address/g,i),h=t.office_name;t.agent_name&&(h="".concat(t.agent_name,", ").concat(t.office_name)),h=r.Z.initialUppercaseWord(h),v=v.replace(/agent_office/g,h);var b="Pickup";1==t.post_name&&(b="Dropoff"),v=(v=(v=v.replace(/post_name/g,b)).replace(/ORDER_ID/g,t.id)).replace(/ORDER_TYPE/g,t.order_type),p+=v}})),s.append(p));case 12:case"end":return e.stop()}}),e)})))()},installerSettings:function(){$("#installerToggler").on("click",(function(){$("#installerSettings").hasClass("d-none")?$("#installerSettings").removeClass("d-none"):$("#installerSettings").addClass("d-none")})),$("#contentDiv").on("click",(function(e){"installerToggler"!=e.target.id?$("#installerSettings").addClass("d-none"):$("#installerSettings").hasClass("d-none")?$("#installerSettings").removeClass("d-none"):$("#installerSettings").addClass("d-none")})),$("#changePasswordBtn").on("click",(function(e){var t=$("#newPassword").val(),a=$("#confirmPassword").val();return t&&a?t!==a?(r.Z.alertError("Passwords don't match."),!1):void $.post("".concat(r.Z.getSiteUrl(),"/change/password"),{newPassword:t}).done((function(){$("#newPassword").val(""),$("#confirmPassword").val(""),r.Z.alertMsg("Change Password","Password changed successfully."),r.Z.closeModal("changePasswordModal")})):(r.Z.alertError("All fields are required."),!1)}))},pullList:function(){$(".pull-list-item").each((function(e,t){var a=$(t),n=a.data("name"),o=r.Z.getDateString(new Date);o=o.replace(/\-/g,"");var i="".concat(o,"-").concat(n),c=r.Z.getDateString(r.Z.previousDay(new Date));c=c.replace(/\-/g,"");for(var l=0;l<localStorage.length;l++)r.Z.stringContains(localStorage.key(l),c)&&localStorage.removeItem(localStorage.key(l));null===localStorage.getItem(i)?a.prop("checked",!1):a.prop("checked",!0)})),$(".pull-list-item").on("change",(function(e){var t=$(e.target),a=t.data("name"),n=r.Z.getDateString(new Date);n=n.replace(/\-/g,"");var o="".concat(n,"-").concat(a);t.is(":checked")?localStorage.setItem(o,a):localStorage.removeItem(o)}))},activeTab:function(){var e=$('[data-toggle="pill"]');1==this.userRole&&localStorage.user_tab&&$("#"+localStorage.user_tab).trigger("click"),2==this.userRole&&$("#pills-agents-tab").trigger("click"),e.on("click",(function(e){localStorage.setItem("user_tab",e.target.attributes.id.value)}))},installerDatatable:function(){var e=$("#installersTable"),t=window.e;e.length&&(window.installerDataTable=e.dataTable({language:{search:"_INPUT_",searchPlaceholder:"Search..."},pageLength:10,dom:"rtip",ajax:r.Z.getSiteUrl("/datatable/installers"),serverSide:!0,searchCols:[{search:0}],columns:[{data:"inactive",name:"inactive",defaultContent:"404",title:"inactive",visible:0},{data:"name",name:"name",defaultContent:"404",title:"Name",visible:1},{data:"phone",defaultContent:"404",title:"Phone Number",name:"users.phone",visible:1},{data:"email",defaultContent:"404",title:"Email",name:"email",visible:1},{data:"hire_date",defaultContent:"",title:"Hire Date",name:"hire_date",visible:1,render:function(e,t,a){return r.Z.formatDateUsa(e)}},{data:"pay_rate",defaultContent:"",title:"Pay rate",name:"pay_rate",visible:1,render:function(e,t,a){return"$".concat(e)}},{defaultContent:"Action",orderable:0,searchable:0,title:"Action",render:function(e,a,n){var o="<div class='text-center'>";return o+=t("a",{htmlContent:"Password Reset <br>",href:r.Z.getSiteUrl("/installer/".concat(n.id,"/reset/password")),class:""}),o+=t("a",{htmlContent:"Edit Account <br>",onclick:"window.editInstallerModal(".concat(n.id,")"),class:""}),o+="</div>"}}]}))},showInstallersEntries:function(){var e=$("#showInstallersEntries");e.length&&e.on("change",(function(e){var t=parseInt(e.target.value);window.installerDataTable.api().context[0]._iDisplayLength=t,window.installerDataTable.api().draw()}))},installerSearchInput:function(){var e=$("#installersSearchInput");e.length&&e.on("keyup",(function(e){var t=e.target;window.installerDataTable.fnFilter(t.value)}))},activeInactive:function(){var e=$("#installersStatus");e.length&&e.on("change",(function(){var t=e.val();window.installerDataTable.api().column(0).search(t).draw()}))},editInstallerModal:function(e){$.get(r.Z.getSiteUrl("/install/get/".concat(e))).done((function(e){console.log(e);var t=$("#editInstallerFormModal"),a=$("#editInstallerForm");a.prop("action",r.Z.getSiteUrl("/installer/update/"+e.id)),a.find("input").each((function(t,a){"_token"!=a.name&&(a.value=e[a.name]),"hire_date"==a.name&&(a.value=r.Z.formatDateUsa(e[a.name]))})),a.find('[name="state"]').val(e.state),a.find('[name="inactive"]').val(e.inactive),t.modal()})).fail((function(e){r.Z.alertError(r.Z.serverErrorMessage())}))},acceptJob:function(){$("body").on("click","#acceptJobBtn",(function(e){var t=$(e.target);t.prop("disabled",!0),r.Z.showLoader();var a=t.data("order-type"),n=t.data("order-id"),o={installerId:b.installerId,orderType:a,orderId:n,route_date:$("#installerRouteDateSelect").val()};return b.assignJob(o),!1}))},getOrderItems:function(e,t){if(!e||!t)return!1;"install"==t&&b.getInstallOrderItems(e,t),"repair"==t&&b.getRepairOrderItems(e,t),"removal"==t&&b.getRemovalOrderItems(e,t),"delivery"==t&&b.getDeliveryOrderItems(e,t)},getInstallOrderItems:function(e,t){var a="".concat(r.Z.getSiteUrl(),"/order/").concat(e,"/").concat(t);$.get(a).done((function(e){console.log(e);var t=e.office.user.phone;e.agent&&(t=e.agent.user.phone);var a,n="",o="";a=e.post.post_name,e.panel&&(n=e.panel.panel_name,e.panel.id_number&&(n+=" ID#".concat(e.panel.id_number))),e.accessories&&($.each(e.accessories,(function(e,t){o+="".concat(t.accessory.accessory_name,", ")})),o=o.replace(/\,\s+$/,""));var i="<strong>Post:</strong> ".concat(a,"<br><br>\n            <strong>Sign Panel:</strong> ").concat(n,"<br><br>\n            <strong>Accessories:</strong> ").concat(o,'</span><br><br>\n            ORDER COMMENTS<br>\n            <textarea id="job_comments" rows="5" class="w-100" readonly>').concat(e.comment,"</textarea>");$("#acceptJobModal").find("#acceptJobModalHeader").html("Add install to route?"),$("#acceptJobModal").find("#jobItems").html(i),$("#acceptJobModal").find("#jobPhone").html(t).prop("href","tel:".concat(t))})).fail((function(e){r.Z.hideLoader(),r.Z.alertError(r.Z.serverErrorMessage())}))},getRepairOrderItems:function(e,t){var a="".concat(r.Z.getSiteUrl(),"/order/").concat(e,"/").concat(t);$.get(a).done((function(e){var t=e.order,a=t.office.user.phone;t.agent&&(a=t.agent.user.phone);var n="",o="",i="",r="";e.replace_repair_post&&(n+="Replace/Repair post, "),e.relocate_post&&(n+="Relocate post"),n=n.replace(/\,\s+$/,""),i+="".concat(n,"<br><br>"),e.panel&&(r=e.panel.panel_name,e.panel.id_number&&(r+=" ID#".concat(e.panel.id_number)),i+="Swap panel: ".concat(r,"<br><br>")),$.each(e.accessories,(function(e,t){0==t.action?o+="Add/Replace ".concat(t.accessory.accessory_name,"<br>"):o+="Remove ".concat(t.accessory.accessory_name,"<br>")})),o=o.replace(/\,\s+$/,""),i+="".concat(o,"<br>"),i+='ORDER COMMENTS<br>\n            <textarea id="job_comments" rows="5" class="w-100" readonly>'.concat(e.comment,"</textarea>"),$("#acceptJobModal").find("#acceptJobModalHeader").html("Add repair to route?"),$("#acceptJobModal").find("#jobItems").html(i),$("#acceptJobModal").find("#jobPhone").html(a).prop("href","tel:".concat(a))})).fail((function(e){r.Z.hideLoader(),r.Z.alertError(r.Z.serverErrorMessage())}))},getRemovalOrderItems:function(e,t){var a="".concat(r.Z.getSiteUrl(),"/order/").concat(e,"/").concat(t);$.get(a).done((function(e){console.log(e);var t=e.order,a=t.office.user.phone;t.agent&&(a=t.agent.user.phone);var n,o="",i="";n=t.post.post_name,t.panel&&(o=t.panel.panel_name,t.panel.id_number&&(o+=" ID#".concat(t.panel.id_number))),t.repair&&(o=t.repair.panel.panel_name,t.repair.panel.id_number&&(o+=" ID#".concat(t.repair.panel.id_number))),t.repair?($.each(t.repair.accessories,(function(e,t){i+="".concat(t.accessory.accessory_name,", ")})),i=i.replace(/\,\s+$/,"")):($.each(t.accessories,(function(e,t){i+="".concat(t.accessory.accessory_name,", ")})),i=i.replace(/\,\s+$/,""));var r="<strong>Post:</strong> ".concat(n,"<br><br>\n            <strong>Sign Panel:</strong> ").concat(o,"<br><br>\n            <strong>Accessories:</strong> ").concat(i,'</span><br><br>\n            ORDER COMMENTS<br>\n            <textarea id="job_comments" rows="5" class="w-100" readonly>').concat(e.comment,"</textarea>");$("#acceptJobModal").find("#acceptJobModalHeader").html("Add removal to route?"),$("#acceptJobModal").find("#jobItems").html(r),$("#acceptJobModal").find("#jobPhone").html(a).prop("href","tel:".concat(a))})).fail((function(e){r.Z.hideLoader(),r.Z.alertError(r.Z.serverErrorMessage())}))},getDeliveryOrderItems:function(e,t){var a="".concat(r.Z.getSiteUrl(),"/order/").concat(e,"/").concat(t);$.get(a).done((function(e){var t=e.office.user.phone;e.agent&&(t=e.agent.user.phone);var a="";$.isEmptyObject(e.pickups)||($.each(e.pickups,(function(e,t){t.panel.id_number?a+="".concat(t.quantity," ").concat(t.panel.panel_name," ID#").concat(t.panel.id_number,","):a+="".concat(t.quantity," ").concat(t.panel.panel_name,",")})),a=a.replace(/\,\s+$/,""));var n="";$.isEmptyObject(e.dropoffs)||($.each(e.dropoffs,(function(e,t){t.panel.id_number?n+="".concat(t.quantity," ").concat(t.panel.panel_name," ID#").concat(t.panel.id_number,","):n+="".concat(t.quantity," ").concat(t.panel.panel_name,",")})),n=n.replace(/\,\s+$/,""));var o="<strong>Pick Up:</strong> ".concat(a,"<br><br>\n            <strong>Drop Off:</strong> ").concat(n,'<br><br>\n            ORDER COMMENTS<br>\n            <textarea id="job_comments" rows="5" class="w-100" readonly>').concat(e.comment,"</textarea>");$("#acceptJobModal").find("#acceptJobModalHeader").html("Add install to route?"),$("#acceptJobModal").find("#jobItems").html(o),$("#acceptJobModal").find("#jobPhone").html(t).prop("href","tel:".concat(t))})).fail((function(e){r.Z.hideLoader(),r.Z.alertError(r.Z.serverErrorMessage())}))},onOrderCommentChange:function(){var e=$("#installerComments");e.length&&e.on("keyup",(function(t){var a=(e.val()||"").trim().length;$(".char-used").html(a),a>500||a<3?e.addClass("is-invalid"):e.removeClass("is-invalid")}))},onRouteDateChange:function(){$("#installerRouteDateSelect").on("change",function(){var e=h(i().mark((function e(t){var a,n,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=$(t.target),n=a.val(),o="".concat(r.Z.getSiteUrl(),"/dashboard/").concat(n),r.Z.showLoader(),r.Z.redirectTo(o);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}};$((function(){b.init()}));const w=b}},e=>{e.O(0,[898],(()=>{return t=694,e(e.s=t);var t}));e.O()}]);