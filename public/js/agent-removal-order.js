"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[415],{9350:(e,r,t)=>{t.d(r,{Z:()=>o});var a=t(1601),n={init:function(){this.onPaymentFormSubmit();var e='[name="payment_type"]',r=".form-another-card input",t='[name="card_profile"]',a=".form-another-card select";$(r).prop("disabled",!0),$(e).on("change",(function(n){var o=n.target;$(e).prop("checked",!1),o.checked=!0,"use_another_card"==o.getAttribute("id")?($(r).prop("disabled",!1),$(t).prop("disabled",!0),$(a).prop("disabled",!1)):($(t).prop("disabled",!1),$(r).prop("disabled",!0),$(a).prop("disabled",!0)),console.log(o)})),$('[name="repair_payment_type"]').on("change",(function(e){var t=e.target;$('[name="repair_payment_type"]').prop("checked",!1),t.checked=!0,"repair_use_another_card"==t.getAttribute("id")?($(r).prop("disabled",!1),$(a).prop("disabled",!1),$('[name="repair_card_profile"]').prop("disabled",!0)):($('[name="repair_card_profile"]').prop("disabled",!1),$(r).prop("disabled",!0),$(a).prop("disabled",!0))})),$('[name="removal_payment_type"]').on("change",(function(e){var t=e.target;$('[name="removal_payment_type"]').prop("checked",!1),t.checked=!0,"removal_use_another_card"==t.getAttribute("id")?($(r).prop("disabled",!1),$('[name="removal_card_profile"]').prop("disabled",!0),$(a).prop("disabled",!1)):($('[name="removal_card_profile"]').prop("disabled",!1),$(r).prop("disabled",!0),$(a).prop("disabled",!0))})),$('[name="delivery_payment_type"]').on("change",(function(e){var t=e.target;$('[name="delivery_payment_type"]').prop("checked",!1),t.checked=!0,"delivery_use_another_card"==t.getAttribute("id")?($(r).prop("disabled",!1),$('[name="delivery_card_profile"]').prop("disabled",!0),$(a).prop("disabled",!1)):($('[name="delivery_card_profile"]').prop("disabled",!1),$(r).prop("disabled",!0),$(a).prop("disabled",!0))})),this.orderHold(),this.repairOrderHold(),this.removalOrderHold(),this.deliveryOrderHold(),this.onRepairPaymentFormSubmit(),this.onRemovalPaymentFormSubmit(),this.onDeliveryPaymentFormSubmit(),this.onCardDeclinedOrderHold()},onPaymentFormSubmit:function(){var e=$("#paymentForm");e.length&&e.on("submit",(function(e){e.stopImmediatePropagation(),e.preventDefault(),a.Z.showLoader();var r={};$(e.target).serializeArray().forEach((function(e){if("_token"==e.name)return null;r[e.name]=e.value})),$.post(a.Z.getSiteUrl("/payment/pay"),r).done((function(e){if(console.log(e),"Error"!=e.messages.resultCode&&e.transactionResponse.authCode)window.location.reload();else{var r,t=$('[name="order_id"]').val();$("#actionNeededModal").find("#actionNeededOrdertype").val("install"),$("#actionNeededModal").find("#actionNeededOrderId").val(t),a.Z.openModal("cardDeclinedModal"),a.Z.hideLoader(""),"card declined"==(null===(r=e.messages.message[1])||void 0===r?void 0:r.text)&&($('[name="payment_type"]').trigger("change"),$("#card_profile_select").empty())}})).fail((function(e){var r=e.responseJSON,t="<ul>";for(var n in t+="<li class='text-danger'><b>"+r.message+"</b></li>",r.errors)$('[name^="'.concat(n,'"]')).addClass("is-invalid"),t+="<li class='text-danger'>"+r.errors[n]+"</li>";t+="</ul>",a.Z.alertError(t),a.Z.hideLoader("")}))}))},loadCards:function(e,r){var t="".concat(a.Z.getSiteUrl(),"/payment/get-saved-cards/").concat(r);$.get(t).done((function(r){console.log(r);var t="";$.each(r,(function(r,a){0==e.find('option[value="'.concat(a.customerProfileId,"::").concat(r,'"]')).length&&(t+='<option value="'.concat(a.customerProfileId,"::").concat(r,'">').concat(a.cardType,": XXXX-XXXX-").concat(a.cardNumber,"  exp ").concat(a.expDate,"</option>"))})),e.append(t)})).fail((function(e){a.Z.alertError("Unable to load cards due to server error.")}))},loadAgentCardsVisibleToOffice:function(e,r,t){var n="".concat(a.Z.getSiteUrl(),"/payment/get-agent-cards-visible-to-office/").concat(r,"/").concat(t);$.get(n).done((function(r){console.log(r);var t="";$.each(r,(function(r,a){0==e.find('option[value="'.concat(a.customerProfileId,"::").concat(r,'"]')).length&&(t+='<option value="'.concat(a.customerProfileId,"::").concat(r,'">').concat(a.cardType,": XXXX-XXXX-").concat(a.cardNumber,"  exp ").concat(a.expDate,"</option>"))})),console.log(t),e.append(t)})).fail((function(e){a.Z.alertError("Unable to load cards due to server error.")}))},loadOfficeCardsVisibleToAgent:function(e,r,t,n,o){var i="".concat(a.Z.getSiteUrl(),"/payment/get-office-cards-visible-to-agents/").concat(r,"/").concat(t,"/").concat(n);$.get(i).done((function(r){console.log(r);var t="";$.each(r,(function(r,a){0==e.find('option[value="'.concat(a.customerProfileId,"::").concat(r,'"]')).length&&(t+='<option value="'.concat(a.customerProfileId,"::").concat(r,'">').concat(a.cardType,": XXXX-XXXX-").concat(a.cardNumber,"  exp ").concat(a.expDate,"</option>"))})),e.append(t),"function"==typeof o&&o()})).fail((function(e){a.Z.alertError("Unable to load cards due to server error.")}))},orderHold:function(){$(".order-hold").on("click",(function(e){e.stopImmediatePropagation(),a.Z.showLoader();var r=$('[name="order_id"]').val(),t="".concat(a.Z.getSiteUrl(),"/order/email/").concat(r);$.get(t).done((function(e){window.location.reload()}))}))},repairOrderHold:function(){$(".repair-order-hold").on("click",(function(e){e.stopImmediatePropagation(),a.Z.showLoader();var r=$('[name="repair_order_id"]').val(),t="".concat(a.Z.getSiteUrl(),"/repair/order/email/").concat(r);$.get(t).done((function(e){window.location.reload()}))}))},removalOrderHold:function(){$(".removal-order-hold").on("click",(function(e){e.stopImmediatePropagation(),a.Z.showLoader();var r=$('[name="removal_order_id"]').val(),t="".concat(a.Z.getSiteUrl(),"/removal/order/email/").concat(r);$.get(t).done((function(e){window.location.reload()}))}))},deliveryOrderHold:function(){$(".delivery-order-hold").on("click",(function(e){e.stopImmediatePropagation(),a.Z.showLoader();var r=$('[name="delivery_order_id"]').val(),t="".concat(a.Z.getSiteUrl(),"/delivery/order/email/").concat(r);$.get(t).done((function(e){window.location.reload()}))}))},onRepairPaymentFormSubmit:function(){var e=$("#repairPaymentForm");e.length&&e.on("submit",(function(e){e.stopImmediatePropagation(),e.preventDefault(),a.Z.showLoader();var r={};$(e.target).serializeArray().forEach((function(e){if("_token"==e.name)return null;r[e.name]=e.value})),$.post("".concat(a.Z.getSiteUrl(),"/payment/repair/pay"),r).done((function(e){if(console.log(e),"Error"!=e.messages.resultCode&&e.transactionResponse.authCode)window.location.reload();else{var r,t=$('[name="repair_order_id"]').val();$("#actionNeededModal").find("#actionNeededOrdertype").val("repair"),$("#actionNeededModal").find("#actionNeededOrderId").val(t),a.Z.openModal("cardDeclinedModal"),a.Z.hideLoader(""),"card declined"==(null===(r=e.messages.message[1])||void 0===r?void 0:r.text)&&($('[name="repair_payment_type"]').trigger("change"),$("#repair_card_profile_select").empty())}})).fail((function(e){console.log(e);var r=e.responseJSON,t="<ul>";for(var n in t+="<li class='text-danger'><b>"+r.message+"</b></li>",r.errors)$('[name^="'.concat(n,'"]')).addClass("is-invalid"),t+="<li class='text-danger'>"+r.errors[n]+"</li>";t+="</ul>",a.Z.alertError(t),a.Z.hideLoader("")}))}))},multiplePosts:!1,onRemovalPaymentFormSubmit:function(){var e=$("#removalPaymentForm");e.length&&e.on("submit",(function(e){e.stopImmediatePropagation(),e.preventDefault(),a.Z.showLoader();var r={};$(e.target).serializeArray().forEach((function(e){if("_token"==e.name)return null;r[e.name]=e.value})),r.multiplePosts=n.multiplePosts,$.post("".concat(a.Z.getSiteUrl(),"/payment/removal/pay"),r).done((function(e){if(console.log(e),"Error"!=e.messages.resultCode&&e.transactionResponse.authCode)window.location.reload();else{var r,t=$('[name="removal_order_id"]').val();$("#actionNeededModal").find("#actionNeededOrdertype").val("removal"),$("#actionNeededModal").find("#actionNeededOrderId").val(t),a.Z.openModal("cardDeclinedModal"),a.Z.hideLoader(""),"card declined"==(null===(r=e.messages.message[1])||void 0===r?void 0:r.text)&&($('[name="removal_payment_type"]').trigger("change"),$("#removal_card_profile_select").empty())}})).fail((function(e){console.log(e);var r=e.responseJSON,t="<ul>";for(var n in t+="<li class='text-danger'><b>"+r.message+"</b></li>",r.errors)$('[name^="'.concat(n,'"]')).addClass("is-invalid"),t+="<li class='text-danger'>"+r.errors[n]+"</li>";t+="</ul>",a.Z.alertError(t),a.Z.hideLoader("")}))}))},onDeliveryPaymentFormSubmit:function(){var e=$("#deliveryPaymentForm");e.length&&e.on("submit",(function(e){e.stopImmediatePropagation(),e.preventDefault(),a.Z.showLoader();var r={};$(e.target).serializeArray().forEach((function(e){if("_token"==e.name)return null;r[e.name]=e.value})),$.post("".concat(a.Z.getSiteUrl(),"/payment/delivery/pay"),r).done((function(e){if(console.log(e),"Error"!=e.messages.resultCode&&e.transactionResponse.authCode)window.location.reload();else{var r,t=$('[name="delivery_order_id"]').val();$("#actionNeededModal").find("#actionNeededOrdertype").val("delivery"),$("#actionNeededModal").find("#actionNeededOrderId").val(t),a.Z.openModal("cardDeclinedModal"),a.Z.hideLoader(""),"card declined"==(null===(r=e.messages.message[1])||void 0===r?void 0:r.text)&&($('[name="delivery_payment_type"]').trigger("change"),$("#delivery_card_profile_select").empty())}})).fail((function(e){console.log(e);var r=e.responseJSON,t="<ul>";for(var n in t+="<li class='text-danger'><b>"+r.message+"</b></li>",r.errors)$('[name^="'.concat(n,'"]')).addClass("is-invalid"),t+="<li class='text-danger'>"+r.errors[n]+"</li>";t+="</ul>",a.Z.alertError(t),a.Z.hideLoader("")}))}))},onCardDeclinedOrderHold:function(){$("#cardDeclinedHoldOrderBtn").on("click",(function(e){e.stopImmediatePropagation(),a.Z.closeModal("cardDeclinedModal"),a.Z.openModal("actionNeededModal")})),$("#closeActionNeededModalBtn").on("click",(function(e){e.stopImmediatePropagation(),a.Z.showLoader();var r={order_type:$("#actionNeededOrdertype").val(),order_id:$("#actionNeededOrderId").val()};$.post("".concat(a.Z.getSiteUrl(),"/order/action-needed/email"),r).done((function(e){a.Z.closeModal("actionNeededModal"),window.location.reload()})).fail((function(e){a.Z.alertError(a.Z.serverErrorMessage()),a.Z.hideLoader("")}))}))}};const o=n},7005:(e,r,t)=>{var a=t(7757),n=t.n(a),o=t(1601),i=t(9350),l=t(6486),d=t(5195),s=t(7087);function c(e,r,t,a,n,o,i){try{var l=e[o](i),d=l.value}catch(e){return void t(e)}l.done?r(d):Promise.resolve(d).then(a,n)}function u(e){return function(){var r=this,t=arguments;return new Promise((function(a,n){var o=e.apply(r,t);function i(e){c(o,a,n,i,l,"next",e)}function l(e){c(o,a,n,i,l,"throw",e)}i(void 0)}))}}var p={zones:[]},m=t.n(s)().create(p,!0,(function(e){if(p.zones.length==v.zones_count){var r=p.zones.filter((function(e){return null!=e}));if(r.length){var t=null;r.forEach((function(e){(null==t||t.zone_fee>e.zone_fee)&&(t=e)})),v.addresIsOut=!1,$.get(o.Z.getSiteUrl("/get/zone/settings")).done((function(e){v._currentZone=t,v.movedNextMonth=!1,v.zoneId=t.id}))}else o.Z.alertMsg("Address Out of Service Area","This address appears to be outside the service area. Please verify that the address and pin location are correct."),v._currentZone=null,v.addresIsOut=!0,$("[googlescript]").remove(),o.Z.hideLoader("")}})),v={status_received:0,status_incomplete:1,status_scheduled:2,status_completed:3,status_cancelled:4,order:{},zone:{},settings:{},total:0,accessories:[],create:!0,payment_method_office_pay:3,removal_order_id:0,dailyOrderCap:0,countOrders:null,pickup_address:null,pickup_latitude:null,pickup_longitude:null,hasPickupAddress:!1,pricingAdjustments:{description:[],charge:[],discount:[]},rowCount:0,init:function(){$("[googlescript]").remove(),this.loadPage(),this.loadDatatable(),this.showRemovalOrderEntries(),this.removalOrderSearchInput(),window.createRemovalOrder=this.createRemovalOrder,window.editRemovalOrder=this.editRemovalOrder,window.removalOrderCancel=this.removalOrderCancel,this.onDesiredDateChange(),this.totalFee(),$.get(o.Z.getSiteUrl("/get/holidays")).done((function(e){v.holidays=e})),$.get(o.Z.getSiteUrl("/get/zone/settings")).done((function(e){v.dailyOrderCap=e.daily_order_cap})),$.get(o.Z.getSiteUrl("/agent/count-orders")).done((function(e){v.countOrders=e})),window.onSignPanelChange=this.onSignPanelChange,this.onCommentChange(),this.onSubmitForm(),i.Z.init(),o.Z.cardNumberInput(".cc-number-input"),this.deleteOrders(),this.processMultiplePosts(),this.initMap(),this.onLocationAdjustmentChange(),this.searchAddress(),this.onSavePickupAddressClick()},removalOrderCancel:function(e){o.Z.confirm("","This action is irreversible!",(function(){$.get("/removal/order/".concat(e,"/cancel")).done((function(e){window.location.reload()}))}),(function(){}))},loadPage:function(){$(".order-removal").on("click",(function(){o.Z.redirectTo("".concat(o.Z.getSiteUrl(),"/removal"))}))},loadDatatable:function(){console.log("loading DT");var e="#removalOrdersTable";o.Z.isMobilePhone()&&(e="#removalOrdersTableMobile"),o.Z.isTablet()&&(e="#removalOrdersTableTablet"),v.table=$(e).dataTable({language:{search:"_INPUT_",searchPlaceholder:"Search..."},infoCallback:function(e,r,t,a,n,o){return"Showing ".concat(r," to ").concat(t," of ").concat(n," entries")},pageLength:10,dom:"rtip",ajax:o.Z.getSiteUrl("/datatable/agent/orders/removal"),serverSide:!0,columns:[{data:"address",defaultContent:"",title:"Address",name:"orders.address",visible:1},{data:"removal_status",defaultContent:"",title:"Removal Status",name:"status",visible:0},{data:"removal_order_number",defaultContent:"",title:"Removal Order Id",name:"order_number",visible:0},{data:"order_number",defaultContent:"",title:"Order Id",name:"orders.order_number",visible:0},{data:"status",defaultContent:"",title:"Status",name:"status",searchable:!1,orderable:!1,visible:1,render:function(e,r,t){var a=t.desired_date;1==t.desired_date_type&&(a=t.updated_at);var n='<span class="font-weight-bold" style="color: #267F00">\n                            INSTALLED '.concat(o.Z.formatDate(a),"\n                        </span>");if("removal"==t.order_type){var i=parseInt(t.removal_status),l=1==t.desired_date_type?"Rush Order":o.Z.formatDate(t.desired_date);n='<span class="text-danger font-weight-bold">\n                                REMOVAL '.concat(l,"\n                            </span>"),n+="<br>",i==v.status_received?n+='<span class="badge badge-pill badge-primary">Received</span>':i==v.status_incomplete?t.assigned_to>0?n+='<span class="badge badge-pill badge-warning">Incomplete</span>':n+='<span class="badge badge-pill badge-warning">Action Needed</span>':i==v.status_scheduled?n+='<span class="badge badge-pill badge-info">Scheduled</span>':i==v.status_completed?n+='<span class="badge badge-pill badge-success">Completed</span>':i==v.status_cancelled&&(n+='<span class="badge badge-pill badge-danger">Cancelled</span>')}return n}},{defaultContent:"...",title:"Action",visible:1,searchable:!1,orderable:!1,render:function(e,r,t){var a='<div class="d-flex justify-content-between">';if("install"==t.order_type)return a+="<a class='link mx-1' onclick=\"window.createRemovalOrder(".concat(t.id,')">\n                                <img src="./images/Removal_Icon.png" alt="Create" class="width-px-40">\n                            </a>'),a+="</div>";if("removal"==t.order_type){var n=parseInt(t.removal_status);if([v.status_received,v.status_incomplete].includes(n)&&(a+="<a class='link mx-1' onclick=\"window.editRemovalOrder(".concat(t.id,')">\n                                    <img src="./images/Removal_Icon.png" alt="Edit" class="width-px-40">\n                                </a>')),[v.status_received,v.status_incomplete].includes(n))return a+="<a class='link text-danger mx-1' onclick=\"window.removalOrderCancel(".concat(t.id,')">\n                                    <img src="./images/Cancel_Icon.png" title="Cancel" alt="Cancel" class="width-px-40">\n                                </a>'),a+="</div>"}return a+="</div>"}},{data:"order_number",defaultContent:"404",title:"Order ID#",name:"order_number",visible:1,render:function(e,r,t){return t.order_number}}]})},showRemovalOrderEntries:function(){$("body").on("change","#showRemovalOrderEntries",(function(e){var r=parseInt(e.target.value);v.table.api().context[0]._iDisplayLength=r,v.table.api().draw()}))},removalOrderSearchInput:function(){$("body").on("keyup","#removalOrderSearchInput",(function(e){v.table.fnFilter(e.target.value)}))},onSignPanelChange:function(e){v.setRemovalFee()},setOfficeAndAgent:function(e){$("#removalOrderOffice").val(e.office.user.name),e.agent&&$("#removalOrderAgent").val(e.agent.user.name)},setPropertyInfo:function(e){var r,t,a,n,o,i,d;if($("#removalOrderAddress").val(e.address.split(",")[0]),$("#removalOrderCity").val(e.address.split(",")[1]),$("#removalOrderState option[value=".concat(null===(r=e.address.split(",")[2])||void 0===r?void 0:r.trimStart().substr(0,2),"]")).attr("selected","selected"),$(".additional-pickup-address-row").addClass("d-none"),e.removal&&"null"!=(null===(t=e.removal)||void 0===t?void 0:t.pickup_address)&&!(0,l.isNull)(null===(a=e.removal)||void 0===a?void 0:a.pickup_address)&&"null"!=(null===(n=e.removal)||void 0===n?void 0:n.pickup_latitude)&&!(0,l.isNull)(null===(o=e.removal)||void 0===o?void 0:o.pickup_latitude)&&"null"!=(null===(i=e.removal)||void 0===i?void 0:i.pickup_longitude)&&!(0,l.isNull)(null===(d=e.removal)||void 0===d?void 0:d.pickup_longitude)){var s,c;v.hasPickupAddress=!0,$(".additional-pickup-address-row").removeClass("d-none"),$("#removalPickupAddress").val(e.removal.pickup_address.split(",")[0]),$("#removalPickupCity").val(e.removal.pickup_address.split(",")[1]),$("#removalPickupState option[value=".concat(null===(s=e.removal.pickup_address.split(",")[2])||void 0===s?void 0:s.trimStart().substr(0,2),"]")).attr("selected","selected"),v.pickup_address=e.removal.pickup_address;var u=$("#pickupAddressModal").find("#address"),p=$("#pickupAddressModal").find("#city");u.val(e.removal.pickup_address.split(",")[0]),p.val(e.removal.pickup_address.split(",")[1]),$("#state option[value=".concat(null===(c=e.removal.pickup_address.split(",")[2])||void 0===c?void 0:c.trimStart().substr(0,2),"]")).attr("selected","selected"),v.findThePlace(e.removal.pickup_address,{lat:Number(e.removal.pickup_latitude),lng:Number(e.removal.pickup_longitude)},!0)}},getRemovalZone:function(e){return u(n().mark((function r(){var t;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,$.get(o.Z.getSiteUrl("/removal/get/zone/".concat(e)));case 2:return t=r.sent,r.abrupt("return",t);case 4:case"end":return r.stop()}}),r)})))()},movedNextMonth:!1,updateCalendar:function(e){if($("#removalOrderDatePicker").datepicker("destroy"),$("#removalOrderDatePicker").datepicker({onSelect:function(e){return $('[name="removal_order_custom_desired_date"]').val(e),v.updateCalendar(o.Z.parseUSDate(e))},beforeShowDay:function(r){var t=o.Z.getDateStringUsa(r);if(v.holidays.includes(t))return[!1];var a=$.datepicker.formatDate("yy-mm-dd",new Date(r)),n=v.countOrders[a];if(void 0!==n&&n>=v.dailyOrderCap)return[!1];var i=o.Z.getDateStringUsa(new Date),l=o.Z.diffDays(t,i),d=i,s=t,c="";if(e&&(c=o.Z.getDateStringUsa(e)),o.Z.isNextDay(d,t)&&o.Z.isCutoffTime())return[!1];if(d==s)return d==c?[!0,"ui-state-highlight ui-state-active",""]:[!1];if(l>=1)return c==s?[!0,"ui-state-highlight ui-state-active",""]:[!1];if(v.zone.data){for(var u=v.zone.data,p=[u.su,u.m,u.tu,u.w,u.th,u.f,u.sa],m=0;m<p.length;m++){var f=p[m];if(r.getDay()===m)return[f]}return[!0]}return[!0]}}),e){var r=o.Z.getDateStringUsa(e);$("#removalOrderDatePicker").datepicker("setDate",r)}else{var t=new Date;o.Z.isLastDayOfMonth(t)&&!v.movedNextMonth&&v.create&&(v.movedNextMonth=!0,setTimeout((function(){$("#removalOrderDatePicker .ui-datepicker-next").trigger("click")}),3e3))}},setDate:function(e){var r=$("#removalOrderDatePicker");1==e.service_date_type?(v.updateCalendar(),$('[name="removal_order_desired_date"][value="asap"]').prop("checked",!0),r.addClass("d-none")):($('[name="removal_order_desired_date"][value="custom_date"]').prop("checked",!0),$('[name="removal_order_desired_date"][value="custom_date"]').trigger("change"),setTimeout((function(){r.removeClass("d-none"),$('[name="removal_order_custom_desired_date"]').val(e.service_date),v.updateCalendar(o.Z.parseDate(e.service_date))}),1e3))},loadAccessories:function(e){var r,t=$(".list-container-accessories-removal");t.empty(),r=e.repair?e.repair.accessories:e.accessories;var a="";$.each(r,(function(e,r){a+='\n                <div class="form-check d-flex justify-content-between">\n                    <label class="form-check-label text-dark" style="margin-left: -1rem;">\n                        <span>'.concat(r.accessory.accessory_name,"<span>\n                    </label>\n                </div>\n            ")})),t.append(a)},setPostSignAccessories:function(e){$("#removalOrderPost").val(e.post.post_name),v.loadAccessories(e),v.create||(v.rowCount=0,e.removal.adjustments&&v.loadSavedAdjustments(e.removal.adjustments),$('[name="removal_order_panel"][value="'.concat(e.removal.sign_panel,'"]')).prop("checked",!0))},resetForm:function(){$("#removalOrderAgent").val(""),$('[name="removal_order_comment"]').val(""),$('[name="removal_order_panel"][value="0"]').prop("checked",!0),$("[removal-adjustments]").html("$0.00"),v.totalAdjusted=0,v.rowCount=0,v.setRushFee(0),$('[name="removal_order_desired_date"][value="custom_date"]').trigger("click"),$('[name="removal_order_fee"]').val(0),v.setRemovalFee()},createRemovalOrder:function(e){v.resetForm(),$("#loader_image").modal("show"),$.get("/removal/get/install-order/"+e).done(function(){var e=u(n().mark((function e(r){var t,a,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v.create=!0,v.order=r,v.order_id=r.id,e.next=5,v.getRemovalZone(r.id);case 5:return v.zone=e.sent,e.next=8,o.Z.getZoneSettings();case 8:v.settings=e.sent,v.setOfficeAndAgent(r),v.setPropertyInfo(r),v.setPostSignAccessories(r),v.movedNextMonth=!1,v.updateCalendar(!1),v.setFooter(),v.zone.data&&v.settings&&(t=v.zone.data,a=v.settings,i=parseFloat(t.zone_fee)*a.removal/100,$('[name="removal_order_zone_fee"]').val(i),$("[removal-zone-fee]").html("$".concat(i.toFixed(2))),$('[name="removal_order_zone_fee"]').trigger("change"),$('[name="removal_order_fee"]').val(a.removal_fee),v.setRemovalFee()),setTimeout(u(n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $("#loader_image").modal("hide"),$(".modal").css({"overflow-y":"scroll"}),$("#removalOrderModal").modal(),e.next=5,v.countPostsAtProperty(r.address,r.latitude,r.longitude,r.office_id,r.agent_id);case 5:(t=e.sent)&&t>1&&$("#multiplePostsModal").modal();case 7:case"end":return e.stop()}}),e)}))),1e3);case 17:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}())},setFooter:function(){v.create?$("#submitRemovalOrder").html('<strong class="text-white">SUBMIT REMOVAL</strong>').prop("disabled",!1):$("#submitRemovalOrder").html('<strong class="text-white">UPDATE ORDER</strong>').prop("disabled",!1)},setComment:function(e){$('[name="removal_order_comment"]').val(e.comment)},editRemovalOrder:function(e){v.resetForm(),$("#loader_image").modal("show"),$.get("/removal/get/order/"+e).done(function(){var e=u(n().mark((function e(r){var t,a,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v.create=!1,v.removal_order_id=r.id,v.order=r.order,v.order_id=r.order.id,e.next=6,v.getRemovalZone(r.order.id);case 6:return v.zone=e.sent,e.next=9,o.Z.getZoneSettings();case 9:v.settings=e.sent,v.setOfficeAndAgent(r.order),v.setPropertyInfo(r.order),v.setPostSignAccessories(r.order),v.setDate(r,!1),v.setComment(r),v.setFooter(),v.setRushFee(r.rush_fee),$('[name="removal_order_fee"]').val(r.removal_fee),v.setRemovalFee(),v.zone.data&&v.settings&&(t=v.zone.data,a=v.settings,i=parseFloat(t.zone_fee)*a.removal/100,$('[name="removal_order_zone_fee"]').val(i),$("[removal-zone-fee]").html("$".concat(i.toFixed(2))),$('[name="removal_order_zone_fee"]').trigger("change")),setTimeout((function(){$("#loader_image").modal("hide"),$(".modal").css({"overflow-y":"scroll"}),$("#removalOrderModal").modal(),"null"==r.pickup_address||(0,l.isNull)(r.pickup_address)||$("#savePickupAddressBtn").trigger("click")}),1e3);case 21:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}())},onDesiredDateChange:function(){var e=this,r=document.getAll('[name="removal_order_desired_date"]'),t=$("#removalOrderDatePicker");r.forEach((function(e){e.onchange=function(e){var r=e.target.value;$('[name="removal_order_desired_date"]').removeAttr("checked"),$(e.target).prop("checked",!0),"custom_date"===r?(v.setRushFee(0),t.removeClass("d-none"),$("#rushFeeRemoval").addClass("d-none")):($("#removalRushOrderModal").modal(),t.addClass("d-none"))}})),$("[removal-rush-fee-decline-button]").on("click",(function(r){$(".modal").css({"overflow-y":"scroll"}),e.setRushFee(0),$('[name="removal_order_desired_date"][value="custom_date"]').trigger("click")})),$("[removal-rush-fee-accept-button]").on("click",(function(r){$(".modal").css({"overflow-y":"scroll"});var t=$('[name="removal_order_desired_date"]').attr("removal-rush-order-fee");e.setRushFee(t)}))},setRushFee:function(e){var r=$('input[name="removal_order_rush_fee"]');r.val(e),r.trigger("change"),e>0&&$("#rushFeeRemoval").removeClass("d-none")},totalFee:function(){var e=this;$('[name="removal_order_rush_fee"]').on("change",(function(r){e.setRemovalFee()})),$('[name="removal_order_fee"]').on("change",(function(r){e.setRemovalFee()})),$('[name="removal_order_zone_fee"]').on("change",(function(r){e.setRemovalFee()}))},getTotalFees:function(){var e=$('[name="removal_order_rush_fee"]').val(),r=$('[name="removal_order_zone_fee"]').val();return parseFloat(r)+parseFloat(e)},onCommentChange:function(){var e=$('[name="removal_order_comment"]');e.length&&e.on("keyup",(function(r){var t=(e.val()||"").trim().length;$(".char-used").html(t),t>500?e.addClass("is-invalid"):e.removeClass("is-invalid")}))},setRemovalFee:function(){var e=parseFloat($('[name="removal_order_fee"]').val());$("[removal-fee]").html("$".concat(e.toFixed(2)));var r=e+v.getTotalFees()+parseFloat(v.totalAdjusted);$("[removal-total]").html("$".concat(r.toFixed(2))),v.total=r},onSubmitForm:function(){$("#removalOrderForm").on("submit",(function(e){o.Z.showLoader(),e.preventDefault();var r=$(e.target),t=new FormData;t.append("removal_order_pickup_address",v.pickup_address),t.append("removal_order_pickup_latitude",v.pickup_latitude),t.append("removal_order_pickup_longitude",v.pickup_longitude),t.append("removal_order_desired_date",r.find('[name="removal_order_desired_date"]:checked').val()),t.append("removal_order_custom_desired_date",r.find('[name="removal_order_custom_desired_date"]').val()),t.append("sign_panel",r.find('[name="removal_order_panel"]:checked').val()),t.append("removal_order_comment",r.find('[name="removal_order_comment"]').val()),t.append("create_order",v.create),t.append("order_id",v.order_id),t.append("removal_order_id",v.removal_order_id),t.append("removal_order_rush_fee",r.find('[name="removal_order_rush_fee"]').val()),t.append("removal_order_fee",r.find('[name="removal_order_fee"]').val()),t.append("removal_order_zone_fee",r.find('[name="removal_order_zone_fee"]').val()),t.append("total",v.total),r.find('[type="submit"]').prop("disabled",!0),r.find('[type="submit"]').html('<strong class="text-white">SENDING...</strong>'),t.append("multiplePosts",v.multiplePosts),t.append("pricingAdjustments",JSON.stringify(v.pricingAdjustments)),$.ajax({url:r.prop("action"),data:t,type:"POST",contentType:!1,processData:!1,cache:!1}).done((function(e){if(e.type&&"error"==e.type)return o.Z.alertError(e.message),r.find('[type="submit"]').prop("disabled",!1),r.find('[type="submit"]').html('<strong class="text-white">TRY AGAIN</strong>'),o.Z.hideLoader(""),!1;if(e.removalOrder.editOrder&&!e.removalOrder.needPayment&&window.location.reload(),e.removalOrder.needPayment){$("[removal-payment-total-amount]").html(parseFloat(e.removalOrder.total).toFixed(2)),$("[removal-payment-card-name]").val(e.billing.name),$("[removal-billing-name]").val(e.billing.name),$("[removal-billing-address]").val(e.billing.address),$("[removal-billing-city]").val(e.billing.city),$("[removal-billing-state]").val(e.billing.state),$("[removal-billing-zip]").val(e.billing.zipcode),e.removalOrder.agent.user.authorizenet_profile_id?($("#removal_use_card_profile").prop("checked",!0),$("#removal_card_profile_select").prop("disabled",!1),$(".form-another-card input").prop("disabled",!0),$("#removal_use_another_card").prop("checked",!1),i.Z.loadCards($("#removal_card_profile_select"),e.removalOrder.agent.user.id)):($(".form-another-card input").prop("disabled",!1),$("#removal_use_another_card").prop("checked",!0),$("#removal_use_card_profile").prop("checked",!1),$("#removal_card_profile_select").prop("disabled",!0)),i.Z.loadOfficeCardsVisibleToAgent($("#removal_card_profile_select"),e.removalOrder.office.user.id,(function(){$("#removal_use_card_profile").prop("checked",!0),$("#removal_card_profile_select").prop("disabled",!1),$(".form-another-card input").prop("disabled",!0),$("#removal_use_another_card").prop("checked",!1)}));var t=$("#removalOrderModal");t.length&&t.modal("hide");var a=$("#removalPaymentModal");a.length&&(a.find('[name="removal_order_id"]').val(e.removalOrder.id),o.Z.hideLoader("removalPaymentModal"))}else window.location.reload()})).fail((function(e){var t=e.responseJSON,a="<ul>";for(var n in t.errors)$('[name^="'.concat(n,'"]')).addClass("is-invalid"),a+="<li class='text-danger'>"+t.errors[n]+"</li>";a+="</ul>",o.Z.alertError(a),r.find('[type="submit"]').prop("disabled",!1),r.find('[type="submit"]').html('<strong class="text-white">TRY AGAIN</strong>'),o.Z.hideLoader("")}))}))},deleteOrders:function(){$("#deleteAllRemovalOrders").on("click",(function(e){o.Z.confirm("","",(function(){var e=o.Z.getSiteUrl("/removal/order/delete/all");$.post(e).done((function(e){"success"==e.type&&window.location.reload()})).fail((function(e){console.error(e)}))}),(function(){return""}))}))},countPostsAtProperty:function(e,r,t,a,i){return u(n().mark((function l(){var d;return n().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,$.get("\n            ".concat(o.Z.getSiteUrl(),"/removal/order/count/posts/address/").concat(e,"/lat/").concat(r,"/lng/").concat(t,"/office/").concat(a,"/agent/").concat(i,"\n        "));case 2:return d=n.sent,n.abrupt("return",d);case 4:case"end":return n.stop()}}),l)})))()},getOthersOrdersSameProperty:function(){return u(n().mark((function e(){var r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.get("".concat(o.Z.getSiteUrl(),"/removal/orders/same/property/").concat(v.order_id));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))()},multiplePosts:!1,processMultiplePosts:function(){$("[multiple-posts-yes-button]").on("click",function(){var e=u(n().mark((function e(r){var t,a,o,l;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v.multiplePosts=!0,i.Z.multiplePosts=!0,t=parseFloat($('[name="removal_order_fee"]').val()),a=parseFloat($('[name="removal_order_fee"]').val()),o=parseFloat($('[name="discount_extra_post_removal"]').val()),e.next=7,v.getOthersOrdersSameProperty();case 7:(l=e.sent)&&($.each(l,(function(e,r){a+=t*o/100})),$('[name="removal_order_fee"]').val(a),v.setRemovalFee());case 9:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()),$("[multiple-posts-no-button]").on("click",(function(e){v.multiplePosts=!1,i.Z.multiplePosts=!1}))},calculateAdjustments:function(){for(var e,r,t=0,a=v.rowCount,n=1;n<=a;n++)e=$('[name="removal_price_adjustment_charge['.concat(n,']"]')).val(),r=$('[name="removal_price_adjustment_discount['.concat(n,']"]')).val(),e>0&&(t=parseFloat(t)+parseFloat(e)),r>0&&(t=parseFloat(t)-parseFloat(r));v.totalAdjusted=t,v.totalAdjusted<0?$("[removal-adjustments]").html('<span class="text-danger">- $'.concat(-1*v.totalAdjusted,"</span>")):$("[removal-adjustments]").html("$".concat(v.totalAdjusted)),$('[name="removal_order_zone_fee"]').trigger("change")},loadSavedAdjustments:function(e){var r=$("#rowTmplRemoval").html(),t=$("#rowContainerRemoval"),a=0;v.pricingAdjustments={description:[],charge:[],discount:[]},t.empty(),$.each(e,(function(e,n){v.rowCount++;var o=r.replace(/rowCount/g,v.rowCount);t.append(o),$('[name="removal_price_adjustment_description['.concat(v.rowCount,']"]')).val(n.description),$('[name="removal_price_adjustment_charge['.concat(v.rowCount,']"]')).val(n.charge),$('[name="removal_price_adjustment_discount['.concat(v.rowCount,']"]')).val(n.discount),v.pricingAdjustments.description[e]=n.description,v.pricingAdjustments.charge[e]=n.charge,v.pricingAdjustments.discount[e]=n.discount,a=parseFloat(a)+parseFloat(n.charge),a=parseFloat(a)-parseFloat(n.discount),v.totalAdjusted=a,v.totalAdjusted<0?$("[removal-adjustments]").html('<span class="text-danger">- $'.concat(-1*v.totalAdjusted,"</span>")):$("[removal-adjustments]").html("$".concat(v.totalAdjusted))})),this.calculateAdjustments()},initMap:function(){window.initMap=this.startMap;var e="https://maps.googleapis.com/maps/api/js?key=".concat(d.Z.googleKey,"&callback=window.initMap&libraries=drawing,geometry,places&v=weekly");$("body").append(window.e("script",{src:e,googlescript:!0}))},startMap:function(){var e=new google.maps.Map(document.getElementById("removal-pickup-search-map"),{zoom:11,center:{lat:43.633994,lng:-116.433707}});window.map=e,$('[name="removal_pickup_location_adjustment"]').get(0).checked=!1},addresIsOut:!1,findThePlace:function(e){var r=arguments;return u(n().mark((function t(){var a,i,l;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.length>1&&void 0!==r[1]&&r[1],i=r.length>2&&void 0!==r[2]&&r[2],r.length>3&&void 0!==r[3]&&r[3],l=!(r.length>4&&void 0!==r[4])||r[4],t.abrupt("return",new Promise(function(){var r=u(n().mark((function r(t,d){var s,c,p,m,f;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(s=new google.maps.places.PlacesService(window.map),c={query:e,fields:["name","geometry"]},p=new google.maps.Geocoder,!i){r.next=20;break}return m=a,v.pickup_latitude=a.lat,v.pickup_longitude=a.lng,window.map.setCenter(m),window.addressMarker&&window.addressMarker.setMap(null),f={url:o.Z.getSiteUrl("/storage/images/map_pin_verified.png"),anchor:new google.maps.Point(0,50)},window.addressMarker=new google.maps.Marker({position:m,map,title:e,icon:f,draggable:!1}),window.addressMarker.setDraggable($('[name="removal_pickup_location_adjustment"]').get(0).checked),window.addressMarker.addListener("dragend",(function(e){p.geocode({location:e.latLng},(function(r,t){if("OK"===t)if(r[0]){var a=e.latLng.lat(),n=e.latLng.lng();v.marker_position={lat:a,lng:n},v.findThePlace(r[0].formatted_address,v.marker_position,!1,!1,!1)}else o.Z.alertError("No results for this location.");else o.Z.alertError("Address not found. Please verify property address is correct and move the marker to the correct property location on the map.")}))})),l&&window.map.setZoom(17),r.next=16,v.getZoneFee(m);case 16:console.log("Executed findThePlace"),t(1),r.next=21;break;case 20:s.findPlaceFromQuery(c,function(){var r=u(n().mark((function r(i,d){var s,c,u,m,f,g,_;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null!=i){r.next=11;break}return v.addresIsOut=!0,o.Z.alertError("Address not found. Please verify property address is correct and move the marker to the correct property location on the map."),s={lat:43.593469,lng:-116.434029},window.map.setCenter(s),window.map.setZoom(12),window.addressMarker&&window.addressMarker.setMap(null),c={url:o.Z.getSiteUrl("/storage/images/map_pin_verified.png"),anchor:new google.maps.Point(0,50)},window.addressMarker=new google.maps.Marker({position:s,map,title:e,icon:c,draggable:!1}),window.addressMarker.addListener("dragend",(function(e){p.geocode({location:e.latLng},(function(r,t){if("OK"===t)if(r[0]){var a=e.latLng.lat(),n=e.latLng.lng();v.marker_position={lat:a,lng:n},v.findThePlace(r[0].formatted_address,v.marker_position,!1,!1,!1)}else o.Z.alertError("No results for this location.");else o.Z.alertError("Address not found. Please verify property address is correct and move the marker to the correct property location on the map.")}))})),r.abrupt("return");case 11:if(!i){r.next=28;break}return u=i[0],m=a||u.geometry.location,v.pickup_latitude=a?a.lat:u.geometry.location.lat(),v.pickup_longitude=a?a.lng:u.geometry.location.lng(),f=u.geometry.location.lat(),g=u.geometry.location.lng(),v.marker_position=a||{lat:f,lng:g},window.map.setCenter(m),window.addressMarker&&window.addressMarker.setMap(null),_={url:o.Z.getSiteUrl("/storage/images/map_pin_verified.png"),anchor:new google.maps.Point(0,50)},window.addressMarker=new google.maps.Marker({position:m,map,title:e,icon:_,draggable:!1}),window.addressMarker.setDraggable($('[name="removal_pickup_location_adjustment"]').get(0).checked),window.addressMarker.addListener("dragend",(function(r){var t=r.latLng.lat(),a=r.latLng.lng();v.marker_position={lat:t,lng:a},v.findThePlace(e,v.marker_position,!1,!1,!1)})),l&&window.map.setZoom(17),r.next=28,v.getZoneFee(m);case 28:console.log("Executed findThePlace"),t(i[0]);case 30:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}());case 21:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()));case 5:case"end":return t.stop()}}),t)})))()},_currentZone:null,zones_count:0,getZoneFee:function(e){var r=this;return u(n().mark((function t(){var a,o,i;return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.getZones();case 2:return a=t.sent,v.zones_count=a.length,100,o=0,m.zones=[],i=a.map((function(r){return o++,new Promise((function(t){setTimeout((function(){var a=r.points,n=new google.maps.Polygon({paths:a});r&&(google.maps.geometry.poly.containsLocation(e,n)?m.zones.push(r):m.zones.push(null));t()}),100*o)}))})),t.next=10,Promise.all(i);case 10:case"end":return t.stop()}}),t)})))()},getZones:function(){return u(n().mark((function e(){var r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.get(o.Z.getSiteUrl("/get/zones/orderby/zone_fee/desc"));case 2:return r=e.sent,e.next=5,r.map((function(e){return e.points=o.Z.parseZonePoints(e.points),e}));case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))()},marker_position:null,searchAddress:function(){var e=this,r=$("#updateRemovalMap");r.length&&r.on("click",function(){var r=u(n().mark((function r(t){var a,i,d,s,c,u;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(v.marker_position=null,a=$("#pickupAddressModal").find("#address").val(),i=$("#pickupAddressModal").find("#city").val(),d=$("#pickupAddressModal").find("#state").val(),!((0,l.isEmpty)(a)||(0,l.isEmpty)(i)||(0,l.isEmpty)(d))){r.next=7;break}return o.Z.alertError("Please enter property address."),r.abrupt("return",!1);case 7:if(s="".concat(a.replace(/[,]/g,"").trim(),", ").concat(i.replace(/[,]/g,"").trim(),", ").concat(d.replace(/[,]/g,"").trim()),(c=s.split(","))[1]&&c[2]){r.next=12;break}return o.Z.alertMsg("Incorrect Address Formatting","Please use this format using commas to separate city and state: [Address], [City], [State]"),r.abrupt("return",!1);case 12:return r.next=14,v.findThePlace(s);case 14:return v.pickup_address=s,r.next=17,e.hasSamePickupAddress(v.pickup_address,v.pickup_latitude,v.pickup_longitude,v.order.office.id,v.order.agent.id,v.order.id);case 17:(u=r.sent)&&"404"!=u&&(o.Z.alertError("The pickup address must be diferent from the original property address."),v.pickup_address=null,v.pickup_latitude=null,v.pickup_longitude=null,$("#pickupAddressModal").find("#address").val("").trigger("change")),$('[name="removal_pickup_location_adjustment"]').is(":checked")&&$('[name="removal_pickup_location_adjustment"]').trigger("click");case 20:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()),this.onAddressChange()},onAddressChange:function(){var e=this;$("#pickupAddressModal").find("#address").on("change",(function(r){var t=r.target;$(t).val($(t).val().replace(/[,]/g,"").trim()),e.startMap()}))},onLocationAdjustmentChange:function(){var e=$('[name="removal_pickup_location_adjustment"]');e.length&&e.on("change",(function(r){var t,a;null!==(t=window)&&void 0!==t&&null!==(a=t.addressMarker)&&void 0!==a&&a.setDraggable?window.addressMarker.setDraggable($('[name="removal_pickup_location_adjustment"]').get(0).checked):(alert("no marker on map"),e.prop("checked",!1))}))},onSavePickupAddressClick:function(){$("#savePickupAddressBtn").on("click",u(n().mark((function e(){var r,t,a,i,l,d,s,c,u,p;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=v.pickup_address&&null!=v.pickup_latitude&&null!=v.pickup_longitude){e.next=5;break}return o.Z.alertError("Please enter property address."),e.abrupt("return",!1);case 5:if($(".additional-pickup-address-row").removeClass("d-none"),$("#removalPickupAddress").val(v.pickup_address.split(",")[0]),$("#removalPickupCity").val(v.pickup_address.split(",")[1]),$("#removalPickupState option[value=".concat(null===(r=v.pickup_address.split(",")[2])||void 0===r?void 0:r.trimStart().substr(0,2),"]")).attr("selected","selected"),o.Z.closeModal("pickupAddressModal"),v.hasPickupAddress&&!v.create){e.next=35;break}if(t=$("#rowTmplRemoval").html(),a=$("#rowContainerRemoval"),0!=v.rowCount){e.next=24;break}i=++v.rowCount,l=t.replace(/rowCount/g,i),a.empty().append(l),$('[name="removal_price_adjustment_description['.concat(i,']"]')).val("Additional pickup address fee"),$('[name="removal_price_adjustment_charge['.concat(i,']"]')).val(v.settings.additional_pickup_fee),v.pricingAdjustments.description[i]=$('[name="removal_price_adjustment_description['.concat(i,']"]')).val(),v.pricingAdjustments.charge[i]=$('[name="removal_price_adjustment_charge['.concat(i,']"]')).val(),v.pricingAdjustments.discount[i]=0,e.next=35;break;case 24:d=v.rowCount,s=!1,c=1;case 27:if(!(c<=d)){e.next=34;break}if("Additional pickup address fee"!=$('[name="removal_price_adjustment_description['.concat(c,']"]')).val()){e.next=31;break}return s=!0,e.abrupt("break",34);case 31:c++,e.next=27;break;case 34:s||(u=++v.rowCount,p=t.replace(/rowCount/g,u),a.append(p),$('[name="removal_price_adjustment_description['.concat(u,']"]')).val("Additional pickup address fee"),$('[name="removal_price_adjustment_charge['.concat(u,']"]')).val(v.settings.additional_pickup_fee),v.pricingAdjustments.description[u]=$('[name="removal_price_adjustment_description['.concat(u,']"]')).val(),v.pricingAdjustments.charge[u]=$('[name="removal_price_adjustment_charge['.concat(u,']"]')).val(),v.pricingAdjustments.discount[u]=0);case 35:v.calculatePickupFees();case 36:case"end":return e.stop()}}),e)}))))},calculatePickupFees:function(){return u(n().mark((function e(){var r,t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.getZoneFee(null!==(r=v.marker_position)&&void 0!==r?r:{lat:v.pickup_latitude,lng:v.pickup_longitude});case 2:console.log("AgentRemovalOrder._currentZone.zone_fee: "+v._currentZone.zone_fee),console.log("AgentRemovalOrder._currentZone.id: "+v._currentZone.id),console.log("AgentRemovalOrder.order.zone_id: "+v.order.zone_id),t=0,t=(0,l.isEmpty)(v.pickup_address)||null===v.pickup_address?parseFloat(v._currentZone.zone_fee||0)*(v.settings.removal/100):v.pickup_address&&v._currentZone.id!==v.order.zone_id?parseFloat(v._currentZone.zone_fee||0)*(v.settings.delivery/100):parseFloat(v._currentZone.zone_fee||0)*(v.settings.removal/100),$('[name="removal_order_zone_fee"]').val(t),$("[removal-zone-fee]").html("$".concat(t.toFixed(2))),$('[name="removal_order_zone_fee"]').trigger("change"),v.calculateAdjustments();case 11:case"end":return e.stop()}}),e)})))()},hasSamePickupAddress:function(e,r,t,a,i){var l=arguments;return u(n().mark((function d(){var s,c;return n().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=l.length>5&&void 0!==l[5]?l[5]:0,e=encodeURIComponent(e),n.next=4,$.get("\n            ".concat(o.Z.getSiteUrl(),"/removal/order/check/address/").concat(e,"/lat/").concat(r,"/lng/").concat(t,"/office/").concat(a,"/agent/").concat(i,"/order/").concat(s,"\n        "));case 4:return c=n.sent,n.abrupt("return",c);case 6:case"end":return n.stop()}}),d)})))()}};$((function(){v.init()}))},5195:(e,r,t)=>{t.d(r,{Z:()=>a});const a={googleKey:t(1601).Z.urlContains("local")?"AIzaSyCNqhRTqZM2fILA4IL2F2uZEXKGAn6T_cw":"AIzaSyAFcHd4cAMJHgHl1OFUOPluT-jpNoULOnM"}},1601:(e,r,t)=>{t.d(r,{Z:()=>c});var a=t(7757),n=t.n(a);t(6486);function o(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"==typeof e)return i(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return i(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,a=new Array(r);t<r;t++)a[t]=e[t];return a}function l(e,r,t,a,n,o,i){try{var l=e[o](i),d=l.value}catch(e){return void t(e)}l.done?r(d):Promise.resolve(d).then(a,n)}function d(e){return function(){var r=this,t=arguments;return new Promise((function(a,n){var o=e.apply(r,t);function i(e){l(o,a,n,i,d,"next",e)}function d(e){l(o,a,n,i,d,"throw",e)}i(void 0)}))}}var s={getSiteUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return window.location.origin+e},validateEmail:function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},validateDomain:function(e){return/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9](?:\.[a-zA-Z]{2,})+$/.test(String(e).toLowerCase())},alertError:function(e){$("#errorModalContent").html(e),$("#errorModal").modal("show"),$(".modal").css({"overflow-y":"scroll"})},alertMsg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=$("#messageModal");t.find("#messageModelTitle").html(e),t.find("#messageModelContent").html(r),t.modal("show"),$(".modal").css({"overflow-y":"scroll"})},confirm:function(e,r,t,a){$(".modal").css({"overflow-y":"scroll"}),e?$("#confirmModalHeader").html(e):$("#confirmModalHeader").html("Are you sure?"),r?$("#confirmModalContent").html(r):$("#confirmModalContent").html("This action is irreversible!"),$("#confirmModal").modal("show"),$("#confirmBtnOk").off("click"),$("#confirmBtnOk").on("click",(function(e){e.stopImmediatePropagation(),$("#confirmModal").modal("hide"),t()})),$("#confirmBtnCancel").off("click"),$("#confirmBtnCancel").on("click",(function(e){e.stopImmediatePropagation(),$("#confirmModal").modal("hide"),a()}))},confirm2:function(e,r,t,a){$(".modal").css({"overflow-y":"scroll"}),e?$("#confirmModalHeader2").html(e):$("#confirmModalHeader2").html("Are you sure?"),r?$("#confirmModalContent2").html(r):$("#confirmModalContent2").html("This action is irreversible!"),$("#confirmModal2").modal("show"),$("#confirmBtnOk2").off("click"),$("#confirmBtnOk2").on("click",(function(e){e.stopImmediatePropagation(),$("#confirmModal2").modal("hide"),t()})),$("#confirmBtnCancel2").off("click"),$("#confirmBtnCancel2").on("click",(function(e){e.stopImmediatePropagation(),$("#confirmModal2").modal("hide"),a()}))},roundToHalf:function(e){return Math.round(2*e)/2},reloadPage:function(){window.location.reload()},serverErrorMessage:function(){return"An error occured, please try again or contact support if the problem persists."},inchesToFeet:function(e){return e/12},feetToInches:function(e){return 12*e},getDecimal:function(e){return e%1},isMobilePhone:function(){return window.matchMedia("only screen and (max-width: 800px)").matches},isTablet:function(){return window.matchMedia("only screen and (min-device-width: 768px) and (max-device-width: 1366px) and (-webkit-min-device-pixel-ratio: 1)").matches},redirectTo:function(e){window.location.href=e},urlContains:function(e){return-1!=window.location.href.indexOf(e)},stringContains:function(e,r){return-1!=e.indexOf(r)},validateForm:function(e){return d(n().mark((function r(){var t,a;return n().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(e instanceof HTMLElement)){r.next=17;break}if("form"!==e.localName){r.next=13;break}return t=e.querySelectorAll("input"),a=[],r.next=6,t.forEach((function(r){if(!("validation-except"in r.attributes)&&!["file"].includes(r.type)&&("required"in r.attributes&&!r.value.trim()&&a.push({node:r,type:"required"}),"validation-match"in r.attributes)){var t=r.attributes["validation-match"].value,n=(t=e[t]).value,o=r.value;n.trim()!=o.trim()&&(a.push({node:r,type:"match"}),a.push({node:t,type:"match"}))}}));case 6:return r.sent,document.querySelectorAll(".invalid-feedback").forEach((function(e){return e.remove()})),a.forEach((function(e){var r,t,a=e.node.attributes[e.type+"-error-msg"],n=null!==(r=null===(t=e.node.attributes["error-class"])||void 0===t?void 0:t.value)&&void 0!==r?r:"";if(e.node.classList.add("is-invalid"),a){var o='<div class="invalid-feedback '.concat(n,'">').concat(a.value,"</div>");e.node.insertAdjacentHTML("afterend",o)}})),a.length||(e.querySelectorAll("input").forEach((function(e){"validation-except"in e.attributes||(e.classList.remove("is-invalid"),e.classList.add("is-valid"))})),document.querySelectorAll(".invalid-feedback").forEach((function(e){return e.remove()}))),r.abrupt("return",{ok:!a.length,errors:a});case 13:return console.error("validateForm() acept  HTML element type of <form>. * YOU GIVE US  <".concat(e.localName,">").toUpperCase()),r.abrupt("return",!1);case 15:r.next=19;break;case 17:return console.error("validateForm() acept  HTML element.".toUpperCase()),r.abrupt("return",!1);case 19:case"end":return r.stop()}}),r)})))()},loadImageOn:function(e,r){(e=$(e)).length&&e.on("change",(function(e){if((r=$(r)).length){var t=e.target.files[0];r.prop("src",URL.createObjectURL(t))}}))},parseDate:function(e){var r=e.slice(0,10),t=(r=r.replace(/\//g,"-")).split("-");return new Date(t[0],t[1]-1,t[2])},parseUSDate:function(e){var r=e.slice(0,10),t=(r=r.replace(/\//g,"-")).split("-");return new Date(t[2],t[0]-1,t[1])},formatDate:function(e){var r=this.parseDate(e);return new Intl.DateTimeFormat("en",{month:"numeric",day:"numeric",year:"numeric"}).format(r)},formatDateCustom:function(e,r){var t=this.parseDate(e);return new Intl.DateTimeFormat("en",r).format(t)},formatDateTime:function(e){var r=new Date(e.replace(/\s/,"T")),t=r.getHours(),a=r.getMinutes(),n=t>=12?"PM":"AM",o=(t=(t%=12)||12)+":"+(a=a<10?"0"+a:a)+" "+n;return r.getMonth()+1+"/"+r.getDate()+"/"+r.getFullYear()+"  "+o},formatDateUsa:function(e){var r=this.parseDate(e);return new Intl.DateTimeFormat("en-US").format(r)},formatDateUsaDateString:function(e){var r=this.parseUSDate(e);return new Intl.DateTimeFormat("en-US").format(r)},diffDays:function(e,r){var t=new Date(e),a=new Date(r).getTime()-t.getTime();return parseInt(a/864e5)},isNextDay:function(e,r){return 1==this.diffDays(e,r)},isCutoffTime:function(){var e=new Date;return e.getHours()>=20&&e.getMinutes()>0},getDateStringUsa:function(e){var r=e.getFullYear(),t="".concat(e.getMonth()+1),a="".concat(e.getDate());return 1==a.length&&(a="0"+a),1==t.length&&(t="0"+t),t+"/"+a+"/"+r},getDateString:function(e){var r=e.getFullYear(),t="".concat(e.getMonth()+1),a="".concat(e.getDate());return 1==a.length&&(a="0"+a),1==t.length&&(t="0"+t),"".concat(r,"-").concat(t,"-").concat(a)},getDateTimeString:function(e){var r=e.getFullYear(),t="".concat(e.getMonth()+1),a="".concat(e.getDate());1==a.length&&(a="0"+a),1==t.length&&(t="0"+t);var n=e.getHours(),o=e.getMinutes(),i=(n=(n%=12)||12)+":"+(o=o<10?"0"+o:o);return"".concat(r,"-").concat(t,"-").concat(a,"T").concat(i)},isLastDayOfMonth:function(e){return 1===new Date(e.getTime()+864e5).getDate()},tzOffset:function(){return(new Date).getTimezoneOffset()},previousDay:function(e){return e.setDate(e.getDate()-1),e},isWeekend:function(e){return 6===e.getDay()||0===e.getDay()},create_id:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))},parseZonePoints:function(e){return(e=JSON.parse(e)).map((function(e){return{lat:parseFloat(e.lat),lng:parseFloat(e.lng)}}))},orderOptions:function(e){var r=$(e),t=r.map((function(e,r){return{t:$(r).text(),v:r.value}})).get();t.sort((function(e,r){return e.t<r.t?1:e.t>r.t?-1:0})),r.each((function(e,r){r.value=t[e].v,$(r).text(t[e].t)}))},cardNumberInput:function(e){if(e){var r,t,a=document.querySelector(e),n=/^\d{0,16}$/g,o=function(e){return e.replace(/[^\d]/g,"")},i=function(e,r){return Math.floor(e/(r+1))},l=function(e){var r={amex:/^3/,visa:/^4/,mastercard:/^5/,disc:/^6/,genric:/(^1|^2|^7|^8|^9|^0)/};for(var t in r)if(r[t].test(e)){t;break}};a.addEventListener("keydown",(function(e){var a=e.target;r=a.value,t=a.selectionEnd})),a.addEventListener("input",(function(e){var a,d=e.target,s=o(d.value);s.match(n)?(s=function(e,r,t){for(var a=[],n=0;n<e.length;n++)0!==n&&n%r==0&&a.push(t),a.push(e[n]);return a.join("")}(s,4," "),a=t-i(t,4)+i(t+(s.length-r.length),4)+(o(s).length-o(r).length),d.value=""!==s?s:""):(d.value=r,a=t),d.setSelectionRange(a,a),l(d.value)}))}},removeFromArray:function(e,r){return e.splice(e.indexOf(r),1)},getZoneSettings:function(){return d(n().mark((function e(){var r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.get(s.getSiteUrl("/get/zone/settings"));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})))()},genId:function(){return"id"+Math.floor(99999999999999.66*Math.random()).toString(36).substring(1)},showLoader:function(){$("#loader_image").modal("show")},hideLoader:function(e){setTimeout((function(){$("#loader_image").modal("hide"),e&&($(".modal").css({"overflow-y":"scroll"}),$("#".concat(e)).modal())}),500)},openModal:function(e){$("#".concat(e)).modal()},closeModal:function(e){$("#".concat(e)).modal("hide"),$(".modal").css({"overflow-y":"scroll"})},inputNumber:function(e){var r=o(Array(100).keys());$("".concat(e)).on("keyup",(function(e){var t=$(e.target);t.val()&&(r.includes(parseInt(t.val()))?t.val(parseInt(t.val())):t.val(1))}))},getCurrentUserRole:function(){return d(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.get("".concat(s.getSiteUrl(),"/current/user/role"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},getInitialsFromName:function(e){var r=e.split(" ");return(r.shift().charAt(0)+r.pop().charAt(0)).toUpperCase()},initialUppercase:function(e){return"string"!=typeof e?"":e.charAt(0).toUpperCase()+e.slice(1)},initialUppercaseWord:function(e){if("string"!=typeof e)return"";for(var r=e.split(" "),t=0;t<r.length;t++)""!=r[t]&&void 0!==r[t]&&(r[t]=r[t][0].toUpperCase()+r[t].substr(1).toLowerCase());return r.join(" ")},loadImagePreview:function(e,r){if(e.target.files.length>0){var t=URL.createObjectURL(e.target.files[0]);document.getElementById(r).src=t}},isSuperAdmin:function(){return 1==$("#userRole").val()},log:function(e){return console.log(e),!1},decodeHtml:function(e){var r=document.createElement("textarea");return r.innerHTML=e,r.value},removeEmptyObjectFromArray:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=e.filter((function(e){return 0!==Object.keys(e).length}));return r},roundToDecimal:function(e,r){var t=Math.pow(10,r);return Math.round(e*t)/t}};const c=s}},e=>{e.O(0,[898],(()=>{return r=7005,e(e.s=r);var r}));e.O()}]);