"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[893],{9350:(e,t,r)=>{r.d(t,{Z:()=>o});var n=r(1601),a={init:function(){this.onPaymentFormSubmit();var e='[name="payment_type"]',t=".form-another-card input",r='[name="card_profile"]',n=".form-another-card select";$(t).prop("disabled",!0),$(e).on("change",(function(a){var o=a.target;$(e).prop("checked",!1),o.checked=!0,"use_another_card"==o.getAttribute("id")?($(t).prop("disabled",!1),$(r).prop("disabled",!0),$(n).prop("disabled",!1)):($(r).prop("disabled",!1),$(t).prop("disabled",!0),$(n).prop("disabled",!0)),console.log(o)})),$('[name="repair_payment_type"]').on("change",(function(e){var r=e.target;$('[name="repair_payment_type"]').prop("checked",!1),r.checked=!0,"repair_use_another_card"==r.getAttribute("id")?($(t).prop("disabled",!1),$(n).prop("disabled",!1),$('[name="repair_card_profile"]').prop("disabled",!0)):($('[name="repair_card_profile"]').prop("disabled",!1),$(t).prop("disabled",!0),$(n).prop("disabled",!0))})),$('[name="removal_payment_type"]').on("change",(function(e){var r=e.target;$('[name="removal_payment_type"]').prop("checked",!1),r.checked=!0,"removal_use_another_card"==r.getAttribute("id")?($(t).prop("disabled",!1),$('[name="removal_card_profile"]').prop("disabled",!0),$(n).prop("disabled",!1)):($('[name="removal_card_profile"]').prop("disabled",!1),$(t).prop("disabled",!0),$(n).prop("disabled",!0))})),$('[name="delivery_payment_type"]').on("change",(function(e){var r=e.target;$('[name="delivery_payment_type"]').prop("checked",!1),r.checked=!0,"delivery_use_another_card"==r.getAttribute("id")?($(t).prop("disabled",!1),$('[name="delivery_card_profile"]').prop("disabled",!0),$(n).prop("disabled",!1)):($('[name="delivery_card_profile"]').prop("disabled",!1),$(t).prop("disabled",!0),$(n).prop("disabled",!0))})),this.orderHold(),this.repairOrderHold(),this.removalOrderHold(),this.deliveryOrderHold(),this.onRepairPaymentFormSubmit(),this.onRemovalPaymentFormSubmit(),this.onDeliveryPaymentFormSubmit(),this.onCardDeclinedOrderHold()},onPaymentFormSubmit:function(){var e=$("#paymentForm");e.length&&e.on("submit",(function(e){e.stopImmediatePropagation(),e.preventDefault(),n.Z.showLoader();var t={};$(e.target).serializeArray().forEach((function(e){if("_token"==e.name)return null;t[e.name]=e.value})),$.post(n.Z.getSiteUrl("/payment/pay"),t).done((function(e){if(console.log(e),"Error"!=e.messages.resultCode&&e.transactionResponse.authCode)window.location.reload();else{var t,r=$('[name="order_id"]').val();$("#actionNeededModal").find("#actionNeededOrdertype").val("install"),$("#actionNeededModal").find("#actionNeededOrderId").val(r),n.Z.openModal("cardDeclinedModal"),n.Z.hideLoader(""),"card declined"==(null===(t=e.messages.message[1])||void 0===t?void 0:t.text)&&($('[name="payment_type"]').trigger("change"),$("#card_profile_select").empty())}})).fail((function(e){var t=e.responseJSON,r="<ul>";for(var a in r+="<li class='text-danger'><b>"+t.message+"</b></li>",t.errors)$('[name^="'.concat(a,'"]')).addClass("is-invalid"),r+="<li class='text-danger'>"+t.errors[a]+"</li>";r+="</ul>",n.Z.alertError(r),n.Z.hideLoader("")}))}))},loadCards:function(e,t){var r="".concat(n.Z.getSiteUrl(),"/payment/get-saved-cards/").concat(t);$.get(r).done((function(t){console.log(t);var r="";$.each(t,(function(t,n){0==e.find('option[value="'.concat(n.customerProfileId,"::").concat(t,'"]')).length&&(r+='<option value="'.concat(n.customerProfileId,"::").concat(t,'">').concat(n.cardType,": XXXX-XXXX-").concat(n.cardNumber,"  exp ").concat(n.expDate,"</option>"))})),e.append(r)})).fail((function(e){n.Z.alertError("Unable to load cards due to server error.")}))},loadAgentCardsVisibleToOffice:function(e,t,r){var a="".concat(n.Z.getSiteUrl(),"/payment/get-agent-cards-visible-to-office/").concat(t,"/").concat(r);$.get(a).done((function(t){console.log(t);var r="";$.each(t,(function(t,n){0==e.find('option[value="'.concat(n.customerProfileId,"::").concat(t,'"]')).length&&(r+='<option value="'.concat(n.customerProfileId,"::").concat(t,'">').concat(n.cardType,": XXXX-XXXX-").concat(n.cardNumber,"  exp ").concat(n.expDate,"</option>"))})),console.log(r),e.append(r)})).fail((function(e){n.Z.alertError("Unable to load cards due to server error.")}))},loadOfficeCardsVisibleToAgent:function(e,t,r,a,o){var i="".concat(n.Z.getSiteUrl(),"/payment/get-office-cards-visible-to-agents/").concat(t,"/").concat(r,"/").concat(a);$.get(i).done((function(t){console.log(t);var r="";$.each(t,(function(t,n){0==e.find('option[value="'.concat(n.customerProfileId,"::").concat(t,'"]')).length&&(r+='<option value="'.concat(n.customerProfileId,"::").concat(t,'">').concat(n.cardType,": XXXX-XXXX-").concat(n.cardNumber,"  exp ").concat(n.expDate,"</option>"))})),e.append(r),"function"==typeof o&&o()})).fail((function(e){n.Z.alertError("Unable to load cards due to server error.")}))},orderHold:function(){$(".order-hold").on("click",(function(e){e.stopImmediatePropagation(),n.Z.showLoader();var t=$('[name="order_id"]').val(),r="".concat(n.Z.getSiteUrl(),"/order/email/").concat(t);$.get(r).done((function(e){window.location.reload()}))}))},repairOrderHold:function(){$(".repair-order-hold").on("click",(function(e){e.stopImmediatePropagation(),n.Z.showLoader();var t=$('[name="repair_order_id"]').val(),r="".concat(n.Z.getSiteUrl(),"/repair/order/email/").concat(t);$.get(r).done((function(e){window.location.reload()}))}))},removalOrderHold:function(){$(".removal-order-hold").on("click",(function(e){e.stopImmediatePropagation(),n.Z.showLoader();var t=$('[name="removal_order_id"]').val(),r="".concat(n.Z.getSiteUrl(),"/removal/order/email/").concat(t);$.get(r).done((function(e){window.location.reload()}))}))},deliveryOrderHold:function(){$(".delivery-order-hold").on("click",(function(e){e.stopImmediatePropagation(),n.Z.showLoader();var t=$('[name="delivery_order_id"]').val(),r="".concat(n.Z.getSiteUrl(),"/delivery/order/email/").concat(t);$.get(r).done((function(e){window.location.reload()}))}))},onRepairPaymentFormSubmit:function(){var e=$("#repairPaymentForm");e.length&&e.on("submit",(function(e){e.stopImmediatePropagation(),e.preventDefault(),n.Z.showLoader();var t={};$(e.target).serializeArray().forEach((function(e){if("_token"==e.name)return null;t[e.name]=e.value})),$.post("".concat(n.Z.getSiteUrl(),"/payment/repair/pay"),t).done((function(e){if(console.log(e),"Error"!=e.messages.resultCode&&e.transactionResponse.authCode)window.location.reload();else{var t,r=$('[name="repair_order_id"]').val();$("#actionNeededModal").find("#actionNeededOrdertype").val("repair"),$("#actionNeededModal").find("#actionNeededOrderId").val(r),n.Z.openModal("cardDeclinedModal"),n.Z.hideLoader(""),"card declined"==(null===(t=e.messages.message[1])||void 0===t?void 0:t.text)&&($('[name="repair_payment_type"]').trigger("change"),$("#repair_card_profile_select").empty())}})).fail((function(e){console.log(e);var t=e.responseJSON,r="<ul>";for(var a in r+="<li class='text-danger'><b>"+t.message+"</b></li>",t.errors)$('[name^="'.concat(a,'"]')).addClass("is-invalid"),r+="<li class='text-danger'>"+t.errors[a]+"</li>";r+="</ul>",n.Z.alertError(r),n.Z.hideLoader("")}))}))},multiplePosts:!1,onRemovalPaymentFormSubmit:function(){var e=$("#removalPaymentForm");e.length&&e.on("submit",(function(e){e.stopImmediatePropagation(),e.preventDefault(),n.Z.showLoader();var t={};$(e.target).serializeArray().forEach((function(e){if("_token"==e.name)return null;t[e.name]=e.value})),t.multiplePosts=a.multiplePosts,$.post("".concat(n.Z.getSiteUrl(),"/payment/removal/pay"),t).done((function(e){if(console.log(e),"Error"!=e.messages.resultCode&&e.transactionResponse.authCode)window.location.reload();else{var t,r=$('[name="removal_order_id"]').val();$("#actionNeededModal").find("#actionNeededOrdertype").val("removal"),$("#actionNeededModal").find("#actionNeededOrderId").val(r),n.Z.openModal("cardDeclinedModal"),n.Z.hideLoader(""),"card declined"==(null===(t=e.messages.message[1])||void 0===t?void 0:t.text)&&($('[name="removal_payment_type"]').trigger("change"),$("#removal_card_profile_select").empty())}})).fail((function(e){console.log(e);var t=e.responseJSON,r="<ul>";for(var a in r+="<li class='text-danger'><b>"+t.message+"</b></li>",t.errors)$('[name^="'.concat(a,'"]')).addClass("is-invalid"),r+="<li class='text-danger'>"+t.errors[a]+"</li>";r+="</ul>",n.Z.alertError(r),n.Z.hideLoader("")}))}))},onDeliveryPaymentFormSubmit:function(){var e=$("#deliveryPaymentForm");e.length&&e.on("submit",(function(e){e.stopImmediatePropagation(),e.preventDefault(),n.Z.showLoader();var t={};$(e.target).serializeArray().forEach((function(e){if("_token"==e.name)return null;t[e.name]=e.value})),$.post("".concat(n.Z.getSiteUrl(),"/payment/delivery/pay"),t).done((function(e){if(console.log(e),"Error"!=e.messages.resultCode&&e.transactionResponse.authCode)window.location.reload();else{var t,r=$('[name="delivery_order_id"]').val();$("#actionNeededModal").find("#actionNeededOrdertype").val("delivery"),$("#actionNeededModal").find("#actionNeededOrderId").val(r),n.Z.openModal("cardDeclinedModal"),n.Z.hideLoader(""),"card declined"==(null===(t=e.messages.message[1])||void 0===t?void 0:t.text)&&($('[name="delivery_payment_type"]').trigger("change"),$("#delivery_card_profile_select").empty())}})).fail((function(e){console.log(e);var t=e.responseJSON,r="<ul>";for(var a in r+="<li class='text-danger'><b>"+t.message+"</b></li>",t.errors)$('[name^="'.concat(a,'"]')).addClass("is-invalid"),r+="<li class='text-danger'>"+t.errors[a]+"</li>";r+="</ul>",n.Z.alertError(r),n.Z.hideLoader("")}))}))},onCardDeclinedOrderHold:function(){$("#cardDeclinedHoldOrderBtn").on("click",(function(e){e.stopImmediatePropagation(),n.Z.closeModal("cardDeclinedModal"),n.Z.openModal("actionNeededModal")})),$("#closeActionNeededModalBtn").on("click",(function(e){e.stopImmediatePropagation(),n.Z.showLoader();var t={order_type:$("#actionNeededOrdertype").val(),order_id:$("#actionNeededOrderId").val()};$.post("".concat(n.Z.getSiteUrl(),"/order/action-needed/email"),t).done((function(e){n.Z.closeModal("actionNeededModal"),window.location.reload()})).fail((function(e){n.Z.alertError(n.Z.serverErrorMessage()),n.Z.hideLoader("")}))}))}};const o=a},9477:(e,t,r)=>{var n,a=r(7757),o=r.n(a),i=r(1601),l=r(5195),d=r(9350),c=r(7087),s=r.n(c),p=r(6486);function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t,r,n,a,o,i){try{var l=e[o](i),d=l.value}catch(e){return void r(e)}l.done?t(d):Promise.resolve(d).then(n,a)}function m(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){f(o,n,a,i,l,"next",e)}function l(e){f(o,n,a,i,l,"throw",e)}i(void 0)}))}}var v={zones:[]},g=s().create(v,!0,(function(e){if(v.zones.length==y.zones_count){var t=v.zones.filter((function(e){return null!=e}));if(t.length){var r=null;t.forEach((function(e){(null==r||r.zone_fee>e.zone_fee)&&(r=e)})),y.addresIsOut=!1,$.get(i.Z.getSiteUrl("/get/zone/settings")).done((function(e){y.settings=e,y._currentZone=r,y.zone=r,y.zoneSettings=e,y.updateCalendar(!1);var t=parseFloat(r.zone_fee||0)*(e.delivery/100);y.ignoreZoneFee?($("[delivery-zone-fee]").html("$0"),$('[name="delivery_order_zone_fee"]').val(0)):($("[delivery-zone-fee]").html("$".concat(t.toFixed(2))),$('[name="delivery_order_zone_fee"]').val(t)),$('[name="delivery_order_zone_fee"]').trigger("change"),y.zoneId=r.id}))}else i.Z.alertMsg("Address Out of Service Area","This address appears to be outside the service area. Please verify that the address and pin location are correct."),y._currentZone=null,y.disableAllDates(),y.addresIsOut=!0,$("[delivery-zone-fee]").html("00.00"),$('[name="delivery_order_zone_fee"]').val("00.00"),$('[name="delivery_order_zone_fee"]').get(0).dispatchEvent(new Event("change")),i.Z.hideLoader("")}})),y=(u(n={status_received:0,status_incomplete:1,status_scheduled:2,status_completed:3,status_cancelled:4,order:{},zone:{},settings:{},total:0,totalPanel:0,create:!0,payment_method_office_pay:3,delivery_order_id:0,zoneId:null,ignoreZoneFee:!1,zoneSettings:{},agent:{},officeId:$("#officeId").val(),agentId:$("#agentId").val(),dailyOrderCap:0,countOrders:null,init:function(){this.loadPage(),this.loadDatatable(),this.showDeliveryOrderEntries(),this.deliveryOrderSearchInput(),window.createDeliveryOrder=this.createDeliveryOrder,window.editDeliveryOrder=this.editDeliveryOrder,window.deliveryOrderCancel=this.deliveryOrderCancel,this.onDesiredDateChange(),i.Z.urlContains("/order/status")||this.initDeliveryMap(),this.searchAddress(),this.totalFee(),$.get(i.Z.getSiteUrl("/get/holidays")).done((function(e){y.holidays=e})),$.get(i.Z.getSiteUrl("/get/zone/settings")).done((function(e){y.dailyOrderCap=e.daily_order_cap})),$.get(i.Z.getSiteUrl("/agent/count-orders")).done((function(e){y.countOrders=e})),this.signPanel(),this.onCommentChange(),this.onSubmitForm(),d.Z.init(),i.Z.cardNumberInput(".cc-number-input"),i.Z.inputNumber(".qty-box"),this.onCityChange()},deliveryOrderCancel:function(e){i.Z.confirm("","This action is irreversible!",(function(){$.get("/delivery/order/".concat(e,"/cancel")).done((function(e){window.location.reload()}))}),(function(){}))},loadPage:function(){$(".order-delivery").on("click",(function(){i.Z.redirectTo("".concat(i.Z.getSiteUrl(),"/delivery"))}))},loadDatatable:function(){var e="#deliveryOrdersTable";i.Z.isMobilePhone()&&(e="#deliveryOrdersTableMobile"),i.Z.isTablet()&&(e="#deliveryOrdersTableTablet"),y.table=$(e).dataTable({language:{search:"_INPUT_",searchPlaceholder:"Search..."},infoCallback:function(e,t,r,n,a,o){return"Showing ".concat(t," to ").concat(r," of ").concat(a," entries")},pageLength:10,dom:"rtip",ajax:i.Z.getSiteUrl("/datatable/agent/orders/delivery"),serverSide:!0,columns:[{data:"address",defaultContent:"404",title:"Address",name:"delivery_orders.address",visible:1},{data:"office_name",defaultContent:"404",title:"Office - Agent",name:"office.name",visible:0},{data:"agent_name",defaultContent:"404",title:"Office - Agent",name:"agent.name",visible:0},{data:"",defaultContent:"404",title:"Office - Agent",name:"",visible:1,searchable:!1,orderable:!1,render:function(e,t,r){return r.agent_name?"".concat(r.office_name," - ").concat(r.agent_name):"".concat(r.office_name)}},{data:"status",defaultContent:"...",title:"Status",name:"orders.status",searchable:!1,orderable:!1,visible:1,render:function(e,t,r){return e==y.status_received?'<span class="badge badge-pill badge-primary">Received</span>':e==y.status_incomplete?r.assigned_to>0?'<span class="badge badge-pill badge-warning">Incomplete</span>':'<span class="badge badge-pill badge-warning">Action Needed</span>':e==y.status_scheduled?'<span class="badge badge-pill badge-info">Scheduled</span>':e==y.status_completed?'<span class="badge badge-pill badge-success">Completed</span>':e==y.status_cancelled?'<span class="badge badge-pill badge-danger">Cancelled</span>':void 0}},{data:"service_date",defaultContent:"404",title:"Service Date",name:"",visible:1,searchable:!1,orderable:!1,render:function(e,t,r){return 1==r.service_date_type?"Rush Order":i.Z.formatDateUsa(r.service_date)}},{defaultContent:"...",title:"Action",visible:1,searchable:!1,orderable:!1,render:function(e,t,r){var n='<div class="d-flex justify-content-between">';return r.status==y.status_scheduled||r.status==y.status_completed||r.status==y.status_cancelled?"":(n+="<a class='link mx-1' onclick=\"window.editDeliveryOrder(".concat(r.id,')">\n                            <img src="./images/Edit_Icon.png" title="Edit" alt="Edit" class="width-px-40">\n                        </a>'),[y.status_received,y.status_incomplete].includes(r.status)&&(n+="<a class='link text-danger mx-1' onclick=\"window.deliveryOrderCancel(".concat(r.id,')">\n                                <img src="./images/Cancel_Icon.png" title="Cancel" alt="Cancel" class="width-px-40">\n                            </a>')),n+="</div>")}},{data:"order_number",defaultContent:"404",title:"Order ID#",name:"delivery_orders.order_number",visible:1}]})},showDeliveryOrderEntries:function(){$("body").on("change","#showDeliveryOrderEntries",(function(e){var t=parseInt(e.target.value);y.table.api().context[0]._iDisplayLength=t,y.table.api().draw()}))},deliveryOrderSearchInput:function(){$("body").on("keyup","#deliveryOrderSearchInput",(function(e){y.table.fnFilter(e.target.value)}))},rowCountPickup:1,rowCountDropoff:1,signPanels:{pickup:{panel:[],qty:[]},dropoff:{panel:[],qty:[]}},countNewSigns:0,signPanel:function(){var e=$("#pickupTmpl").html(),t=$("#pickupContainer"),r=$("#dropoffTmpl").html(),n=$("#dropoffContainer");$("#addAnotherPickup").on("click",(function(){y.rowCountPickup++;var r=e.replace(/rowCount/g,y.rowCountPickup);t.append(r);var n=$('[name="pickup_panel_style[1]"]').html();$('[name="pickup_panel_style['.concat(y.rowCountPickup,']"]')).html(n),$('[name="pickup_panel_style['.concat(y.rowCountPickup,']"]')).find('option[value="-1"]').remove()})),$("body").on("click",".add-new-pickup",(function(e){e.stopImmediatePropagation();var t=$(e.target).data("row");if(sessionStorage.setItem("rowNumber",t),!y.officeId)return i.Z.alertError("Please select office or agent."),!1;i.Z.confirm("New Sign Panel","Do you have a new panel design that is DIFFERENT from those already stored with us?",(function(){t=sessionStorage.getItem("rowNumber"),$('[name="pickup_panel['.concat(t,']"]')).prop("checked",!0).prop("disabled",!0),$('[name="pickup_panel_style['.concat(t,']"]')).append('<option value="-1">New Panel</option>').val("-1").prop("disabled",!0),$('[name="pickup_panel_qty['.concat(t,']"]')).val(1).prop("disabled",!0),$("#addNewPickup".concat(t)).hide()}),(function(){}))})),$("body").on("click",".remove-pickup",(function(e){$(e.target).closest(".to-append").remove(),y.rowCountPickup--})),$("body").on("change",".pickup-checkbox",(function(e){var t=$(e.target),r=t.data("row");if(t.is(":checked")){if(!y.officeId)return t.prop("checked",!1),i.Z.alertError("Please select office or agent."),!1;$('[name="pickup_panel_style['.concat(r,']"]')).removeAttr("disabled")}else $('[name="pickup_panel_style['.concat(r,']"]')).prop("disabled",!0)})),$("#addAnotherDropoff").on("click",(function(){y.rowCountDropoff++;var e=r.replace(/rowCount/g,y.rowCountDropoff);n.append(e);var t=$('[name="dropoff_panel_style[1]"]').html();$('[name="dropoff_panel_style['.concat(y.rowCountDropoff,']"]')).html(t)})),$("body").on("click",".remove-dropoff",(function(e){$(e.target).closest(".to-append").remove(),y.rowCountDropoff--})),$("body").on("change",".dropoff-checkbox",(function(e){var t=$(e.target),r=t.data("row");if(t.is(":checked")){if(!y.officeId)return t.prop("checked",!1),i.Z.alertError("Please select office or agent."),!1;$('[name="dropoff_panel_style['.concat(r,']"]')).removeAttr("disabled")}else $('[name="dropoff_panel_style['.concat(r,']"]')).prop("disabled",!0)}))},loadOfficePanels:function(){var e=y.officeId;$.get(i.Z.getSiteUrl("/get/office/".concat(e,"/panels"))).done((function(e){Array.isArray(e)||(e=Object.values(e));var t=$(".panel-list");t.empty();var r='<option value="0"></option>';e.forEach((function(e){r+='\n                    <option value="'.concat(e.id,'">').concat(e.panel_name,"</option>\n                ")})),t.each((function(e,t){$(t).append(r)})),!y.create&&$.isEmptyObject(y.agent)&&setTimeout((function(){y.order.adjustments&&y.loadSavedAdjustments(y.order.adjustments),y.setSignPanels(y.order)}),2500)}))},loadAgentPanels:function(){var e=y.agentId;$.get(i.Z.getSiteUrl("/get/agent/".concat(e,"/panels"))).done((function(e){Array.isArray(e)||(e=Object.values(e));var t=$(".panel-list");t.empty();var r='<option value="0"></option>';e.forEach((function(e){r+='\n                    <option value="'.concat(e.id,'">').concat(e.panel_name,"</option>\n                ")})),t.each((function(e,t){$(t).append(r)})),y.create||setTimeout((function(){y.rowCount=0,y.order.adjustments&&y.loadSavedAdjustments(y.order.adjustments),y.setSignPanels(y.order)}),2500)}))},googleKey:l.Z.googleKey,initDeliveryMap:function(){window.initDeliveryMap=this.startDeliveryMap;var e="https://maps.googleapis.com/maps/api/js?key=".concat(y.googleKey,"&callback=window.initDeliveryMap&libraries=drawing,geometry,places&v=weekly");$("body").append(window.e("script",{src:e,googlescript:!0}))},startDeliveryMap:function(){var e=new google.maps.Map(document.getElementById("deliveryOrderMap"),{zoom:11,center:{lat:43.633994,lng:-116.433707}});window.deliveryMap=e},marker_position:null,searchAddress:function(){var e=this,t=$("#updateDeliveryMap");t.length&&t.on("click",function(){var t=m(o().mark((function t(r){var n,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(y.marker_position=null,n="".concat($("#delivery_order_address").val().replace(/[,]/g,"").trim(),", ").concat($("#delivery_order_city").val().replace(/[,]/g,"").trim(),", ").concat($("#delivery_order_state").val().replace(/[,]/g,"").trim()),!((0,p.isEmpty)($("#delivery_order_address").val())||(0,p.isEmpty)($("#delivery_order_city").val())||(0,p.isEmpty)($("#delivery_order_state").val()))){t.next=5;break}return i.Z.alertError("Please enter property address."),t.abrupt("return",!1);case 5:if((a=n.split(","))[1]&&a[2]){t.next=9;break}return i.Z.alertMsg("Incorrect Address Formatting","Please use this format using commas to separate city and state: [Address], [City], [State]"),t.abrupt("return",!1);case 9:e.findThePlace(n),$('[name="delivery_location_adjustment"]').is(":checked")&&$('[name="delivery_location_adjustment"]').trigger("click"),y.movedNextMonth=!1,y.updateCalendar(!1);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());var r=$('[name="delivery_location_adjustment"]');r.length&&r.on("change",(function(e){var t,n;null!==(t=window)&&void 0!==t&&null!==(n=t.addressMarkerDelivery)&&void 0!==n&&n.setDraggable?window.addressMarkerDelivery.setDraggable($('[name="delivery_location_adjustment"]').get(0).checked):(alert("no marker on map"),r.prop("checked",!1))})),this.onAddressChange()},addresIsOut:!1,findThePlace:function(e){var t=arguments,r=this;return m(o().mark((function n(){var a,l,d,c,s;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=t.length>1&&void 0!==t[1]&&t[1],l=!(t.length>2&&void 0!==t[2])||t[2],d=new google.maps.places.PlacesService(window.deliveryMap),c={query:e,fields:["name","geometry"]},s=new google.maps.Geocoder,d.findPlaceFromQuery(c,function(){var t=m(o().mark((function t(n,d){var c,p,u,f,m,v,g,h,_;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=n){t.next=14;break}return y.addresIsOut=!0,i.Z.alertError("Address not found. Please verify property address is correct and move the marker to the correct property location on the map."),console.log("ADDESS NOT FOUND"),c={lat:43.593469,lng:-116.434029},window.deliveryMap.setCenter(c),window.deliveryMap.setZoom(12),p=window.deliveryMap,window.addressMarkerDelivery&&window.addressMarkerDelivery.setMap(null),u={url:i.Z.getSiteUrl("/storage/images/map_pin_verified.png"),anchor:new google.maps.Point(0,50)},window.addressMarkerDelivery=new google.maps.Marker({position:c,map:p,title:e,icon:u,draggable:!1}),y.disableAllDates(),window.addressMarkerDelivery.addListener("dragend",(function(e){s.geocode({location:e.latLng},(function(t,r){if("OK"===r)if(t[0]){console.log(e);var n=e.latLng.lat(),a=e.latLng.lng();y.marker_position={lat:n,lng:a},y.findThePlace(t[0].formatted_address,y.marker_position,!1)}else i.Z.alertError("No results for this location.");else i.Z.alertError("Address not found. Please verify property address is correct and move the marker to the correct property location on the map.")}))})),t.abrupt("return");case 14:n&&(f=n[0],m=a||f.geometry.location,v=f.geometry.location.lat(),g=f.geometry.location.lng(),y.marker_position=a||{lat:v,lng:g},window.deliveryMap.setCenter(m),window.addressMarkerDelivery&&window.addressMarkerDelivery.setMap(null),h=window.deliveryMap,_={url:i.Z.getSiteUrl("/storage/images/map_pin_verified.png"),anchor:new google.maps.Point(0,50)},window.addressMarkerDelivery=new google.maps.Marker({position:m,map:h,title:e,icon:_,draggable:!1}),window.addressMarkerDelivery.setDraggable($('[name="delivery_location_adjustment"]').get(0).checked),window.addressMarkerDelivery.addListener("dragend",(function(t){var r=t.latLng.lat(),n=t.latLng.lng();y.marker_position={lat:r,lng:n},y.findThePlace(e,y.marker_position,!1)})),l&&window.deliveryMap.setZoom(17),r.getZoneFee(m));case 15:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}());case 6:case"end":return n.stop()}}),n)})))()},loadAddressOnMap:function(e,t){window.deliveryMap.setCenter(t);var r=window.deliveryMap,n={url:i.Z.getSiteUrl("/storage/images/map_pin_verified.png"),anchor:new google.maps.Point(0,50)};new google.maps.Marker({position:t,map:r,title:e,icon:n,draggable:!1}),window.deliveryMap.setZoom(17)},_currentZone:null,zones_count:0,getZoneFee:function(e){var t=this;return m(o().mark((function r(){var n,a;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.getZones();case 2:n=r.sent,y.zones_count=n.length,100,a=0,g.zones=[],n.forEach((function(t){a++,setTimeout((function(){var r=t.points,n=new google.maps.Polygon({paths:r});t&&(google.maps.geometry.poly.containsLocation(e,n)?g.zones.push(t):g.zones.push(null))}),100*a)}));case 8:case"end":return r.stop()}}),r)})))()},getZones:function(){return m(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.get(i.Z.getSiteUrl("/get/zones/orderby/zone_fee/desc"));case 2:return t=e.sent,e.next=5,t.map((function(e){return e.points=i.Z.parseZonePoints(e.points),e}));case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))()},setPropertyInfo:function(e){$("#deliveryOrderAddress").val(e.address),y.loadAddressOnMap(e.address,{lat:Number(e.latitude),lng:Number(e.longitude)}),$("#deliveryOrderPropertyType").find('option[value="'.concat(e.property_type,'"]')).prop("selected",!0)},getDeliveryZone:function(e){return m(o().mark((function t(){var r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,$.post(i.Z.getSiteUrl("/delivery/get/zone"),{zoneId:e});case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))()},disableAllDates:function(){$("#deliveryOrderDatePicker").datepicker("destroy"),$("#deliveryOrderDatePicker").datepicker({beforeShowDay:function(e){return[!1]}})},movedNextMonth:!1,updateCalendar:function(e){if($("#deliveryOrderDatePicker").datepicker("destroy"),$("#deliveryOrderDatePicker").datepicker({onSelect:function(e){return $('[name="delivery_order_custom_desired_date"]').val(e),y.updateCalendar(i.Z.parseUSDate(e))},beforeShowDay:function(t){var r=i.Z.getDateStringUsa(t);if(y.holidays.includes(r))return[!1];var n=$.datepicker.formatDate("yy-mm-dd",new Date(t)),a=y.countOrders[n];if(void 0!==a&&a>=y.dailyOrderCap)return[!1];var o=i.Z.getDateStringUsa(new Date),l=i.Z.diffDays(r,o),d=o,c=r,s="";if(e&&(s=i.Z.getDateStringUsa(e)),i.Z.isNextDay(d,r)&&i.Z.isCutoffTime())return[!1];if(d==c)return d==s?[!0,"ui-state-highlight ui-state-active",""]:[!1];if(l>=1)return s==c?[!0,"ui-state-highlight ui-state-active",""]:[!1];if(y.zone){for(var p=y.zone,u=[p.su,p.m,p.tu,p.w,p.th,p.f,p.sa],f=0;f<u.length;f++){var m=u[f];if(t.getDay()===f)return[m]}return[!0]}return[!0]}}),e){var t=i.Z.getDateStringUsa(e);$("#deliveryOrderDatePicker").datepicker("setDate",t)}else{var r=new Date;i.Z.isLastDayOfMonth(r)&&!y.movedNextMonth&&y.create&&(y.movedNextMonth=!0,setTimeout((function(){$("#deliveryOrderDatePicker .ui-datepicker-next").trigger("click")}),3e3))}},setDate:function(e){var t=$("#deliveryOrderDatePicker");1==e.service_date_type?($('[name="delivery_order_desired_date"][value="asap"]').prop("checked",!0),t.addClass("d-none")):($('[name="delivery_order_desired_date"][value="custom_date"]').prop("checked",!0),$('[name="delivery_order_desired_date"][value="custom_date"]').trigger("change"),setTimeout((function(){t.removeClass("d-none"),$('[name="delivery_order_custom_desired_date"]').val(e.service_date),y.updateCalendar(i.Z.parseDate(e.service_date))}),1e3))},setSignPanels:function(e){var t=e.panels,r=$("#pickupTmpl").html(),n=$("#pickupContainer"),a=$("#dropoffTmpl").html(),o=$("#dropoffContainer");y.resetSignPanels(),t&&$.each(t,(function(e,t){var i=y.rowCountPickup,l=y.rowCountDropoff;if(0==t.pickup_delivery){if(1==i)$('[name="pickup_panel['.concat(i,']"]')).prop("checked",!0),$('[name="pickup_panel_qty['.concat(i,']"]')).val(t.quantity),$('[name="pickup_panel_style['.concat(i,']"]')).val(t.panel_id).prop("disabled",!1),-1==t.panel_id&&$('[name="pickup_panel_style['.concat(i,']"]')).text("New Panel");else{var d=r.replace(/rowCount/g,i);if(n.append(d),0==t.existing_new){var c=$('[name="pickup_panel_style[1]"]').html();$('[name="pickup_panel_style['.concat(i,']"]')).html(c),$('[name="pickup_panel['.concat(i,']"]')).prop("checked",!0),$('[name="pickup_panel_qty['.concat(i,']"]')).val(t.quantity),$('[name="pickup_panel_style['.concat(i,']"]')).val(t.panel_id).prop("disabled",!1)}else $('[name="pickup_panel_style['.concat(i,']"]')).html('<option value="-1" selected>New Panel</option>').prop("disabled",!0),$('[name="pickup_panel['.concat(i,']"]')).prop("checked",!0).prop("disabled",!0),$('[name="pickup_panel_qty['.concat(i,']"]')).val(1).prop("disabled",!0),$("#addNewPickup".concat(i)).hide()}y.rowCountPickup++}else{if(1==l)$('[name="dropoff_panel['.concat(l,']"]')).prop("checked",!0),$('[name="dropoff_panel_qty['.concat(l,']"]')).val(t.quantity),$('[name="dropoff_panel_style['.concat(l,']"]')).val(t.panel_id).prop("disabled",!1);else{var s=a.replace(/rowCount/g,l);o.append(s);var p=$('[name="dropoff_panel_style[1]"]').html();$('[name="dropoff_panel_style['.concat(l,']"]')).html(p),$('[name="dropoff_panel['.concat(l,']"]')).prop("checked",!0),$('[name="dropoff_panel_qty['.concat(l,']"]')).val(t.quantity),$('[name="dropoff_panel_style['.concat(l,']"]')).val(t.panel_id).prop("disabled",!1)}y.rowCountDropoff++}}))},resetForm:function(){this.disableAllDates(),$('[name="delivery_agent"]').val(""),$('[name="delivery_order_comment"]').val(""),$('[name="delivery_order_address"]').val(""),this.startDeliveryMap(),$("[delivery-adjustments]").html("$0.00"),y.rowCount=0,y.countNewSigns=0,y.rowCountPickup=1,y.rowCountDropoff=1,y.agent={},this.resetTotals(),this.setRushFee(0),this.setDeliveryFee(),$('[name="delivery_order_desired_date"][value="custom_date"]').trigger("click"),$(".list-container-accessories").empty(),this.resetPricingAdjustment()},createDeliveryOrder:function(){y.create=!0,y.resetForm(),y.resetSignPanels(),y.setFooter(),y.loadOfficePanels(),i.Z.openModal("deliveryOrderModal")},setFooter:function(){y.create?$("#submitDeliveryOrder").html('<strong class="text-white">SUBMIT DELIVERY</strong>').prop("disabled",!1):$("#submitDeliveryOrder").html('<strong class="text-white">UPDATE ORDER</strong>').prop("disabled",!1)},setComment:function(e){$('[name="delivery_order_comment"]').val(e.comment)},setOfficeAndAgent:function(e){e.agent_id?($('[name="delivery_agent"]').val(e.agent_id),this.loadAgentPanels()):this.loadOfficePanels()}},"setPropertyInfo",(function(e){var t;$('[name="delivery_order_address"]').val(e.address.split(",")[0]),$('[name="delivery_order_city"]').val(e.address.split(",")[1]),$("#delivery_order_state option[value=".concat(null===(t=e.address.split(",")[2])||void 0===t?void 0:t.trimStart().substr(0,2),"]")).attr("selected","selected"),y.loadAddressOnMap(e.address,{lat:Number(e.latitude),lng:Number(e.longitude)})})),u(n,"loadAddressOnMap",(function(e,t){window.deliveryMap.setCenter(t);var r=window.deliveryMap,n={url:i.Z.getSiteUrl("/storage/images/map_pin_verified.png"),anchor:new google.maps.Point(0,50)};window.addressMarkerDelivery=new google.maps.Marker({position:t,map:r,title:e,icon:n,draggable:!1}),window.deliveryMap.setZoom(17),y.marker_position=t})),u(n,"editDeliveryOrder",(function(e){y.resetForm(),$("#loader_image").modal("show"),$.get("/delivery/get/order/"+e).done(function(){var e=m(o().mark((function e(t){var r,n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y.create=!1,y.order=t,y.delivery_order_id=t.id,e.next=5,y.getDeliveryZone(t.zone_id);case 5:return y.zone=e.sent,y.zoneId=t.zone_id,e.next=9,i.Z.getZoneSettings();case 9:y.settings=e.sent,y.setOfficeAndAgent(t),y.setPropertyInfo(t),y.setDate(t,!1),y.setComment(t),y.setFooter(),y.setRushFee(t.rush_fee),y.zone.data&&y.settings&&(r=y.zone.data,n=y.settings,a=parseFloat(r.zone_fee)*n.delivery/100,$('[name="delivery_order_zone_fee"]').val(a),$("[delivery-zone-fee]").html("$".concat(a.toFixed(2))),$('[name="delivery_order_zone_fee"]').trigger("change")),setTimeout((function(){$("#loader_image").modal("hide"),$(".modal").css({"overflow-y":"scroll"}),$("#deliveryOrderModal").modal()}),3e3);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),u(n,"onDesiredDateChange",(function(){var e=this,t=document.getAll('[name="delivery_order_desired_date"]'),r=$("#deliveryOrderDatePicker");t.forEach((function(e){e.onchange=function(e){var t=e.target.value;$('[name="delivery_order_desired_date"]').removeAttr("checked"),$(e.target).prop("checked",!0),"custom_date"===t?(y.setRushFee(0),r.removeClass("d-none"),$("#rushFeeDelivery").addClass("d-none")):(i.Z.openModal("deliveryRushOrderModal"),r.addClass("d-none"))}})),$("[delivery-rush-fee-decline-button]").on("click",(function(t){$(".modal").css({"overflow-y":"scroll"}),e.setRushFee(0),$('[name="delivery_order_desired_date"][value="custom_date"]').trigger("click")})),$("[delivery-rush-fee-accept-button]").on("click",(function(t){$(".modal").css({"overflow-y":"scroll"});var r=$("#rushOrder").attr("delivery-rush-order-fee");e.setRushFee(r)}))})),u(n,"setRushFee",(function(e){var t=$('input[name="delivery_order_rush_fee"]');t.val(e),t.trigger("change"),e>0&&$("#rushFeeDelivery").removeClass("d-none")})),u(n,"totalFee",(function(){$('[name="delivery_order_rush_fee"]').on("change",(function(e){var t=parseFloat($('[name="delivery_order_fee"]').val())+y.getTotalFees()+parseFloat(y.totalAdjusted);$("[delivery-total]").html("$".concat(t.toFixed(2))),y.total=t})),$('[name="delivery_order_fee"]').on("change",(function(e){var t=parseFloat($('[name="delivery_order_fee"]').val())+y.getTotalFees()+parseFloat(y.totalAdjusted);$("[delivery-total]").html("$".concat(t.toFixed(2))),y.total=t})),$('[name="delivery_order_zone_fee"]').on("change",(function(e){var t=parseFloat($('[name="delivery_order_fee"]').val())+y.getTotalFees()+parseFloat(y.totalAdjusted);$("[delivery-total]").html("$".concat(t.toFixed(2))),y.total=t})),$('[name="delivery_options_post[]"]').on("change",(function(e){var t=$(e.target);if(t.is(":checked")){var r=0;$('[name="delivery_options_post[]"]').each((function(e,t){t.checked&&(r+=parseFloat(t.value))})),y.totalPost=r;var n=parseFloat(y.totalPanel)+y.getTotalFees()+parseFloat(y.totalAdjusted);$("[delivery-total]").html("$".concat(n.toFixed(2)));var a=parseFloat(y.totalPanel);$("[delivery-fee]").html("$".concat(a.toFixed(2))),y.total=n}else{y.totalPost=y.totalPost-parseFloat(t.val());var o=parseFloat(y.totalPanel)+y.getTotalFees()+parseFloat(y.totalAdjusted);$("[delivery-total]").html("$".concat(o.toFixed(2)));var i=parseFloat(y.totalPanel);$("[delivery-fee]").html("$".concat(i.toFixed(2))),y.total=o}}))})),u(n,"getTotalFees",(function(){var e=$('[name="delivery_order_rush_fee"]').val(),t=$('[name="delivery_order_zone_fee"]').val();return parseFloat(t)+parseFloat(e)})),u(n,"onCommentChange",(function(){var e=$('[name="delivery_order_comment"]');e.length&&e.on("keyup",(function(t){var r=(e.val()||"").trim().length;$(".char-used").html(r),r>500?e.addClass("is-invalid"):e.removeClass("is-invalid")}))})),u(n,"setDeliveryFee",(function(){var e=parseFloat($('[name="delivery_order_fee"]').val());$("[delivery-fee]").html("$".concat(e.toFixed(2))),$('[name="delivery_order_fee"]').trigger("change")})),u(n,"resetTotals",(function(){y.totalAdjusted=0})),u(n,"onSubmitForm",(function(){$("#deliveryOrderForm").on("submit",(function(e){e.preventDefault();var t=$(e.target),r=new FormData;r.append("delivery_order_desired_date",t.find('[name="delivery_order_desired_date"]:checked').val()),r.append("delivery_order_custom_desired_date",t.find('[name="delivery_order_custom_desired_date"]').val()),r.append("delivery_order_comment",t.find('[name="delivery_order_comment"]').val()),r.append("create_order",y.create),r.append("delivery_order_id",y.delivery_order_id),r.append("delivery_order_rush_fee",t.find('[name="delivery_order_rush_fee"]').val()),r.append("delivery_order_fee",t.find('[name="delivery_order_fee"]').val()),r.append("delivery_order_zone_fee",t.find('[name="delivery_order_zone_fee"]').val()),r.append("total",y.total),r.append("delivery_order_address","".concat($("#delivery_order_address").val().replace(/[,]/g,"").trim(),", ").concat($("#delivery_order_city").val().replace(/[,]/g,"").trim(),", ").concat($("#delivery_order_state").val().replace(/[,]/g,"").trim())),r.append("delivery_marker_position",JSON.stringify(y.marker_position)),r.append("zone_id",y.zoneId),r.append("office_id",y.officeId),r.append("agent_id",y.agentId),y.countNewSigns=$(".panel-list").children('option[value="-1"]').length,r.append("countNewSigns",y.countNewSigns),y.signPanels={pickup:{panel:[],qty:[]},dropoff:{panel:[],qty:[]}};for(var n=1;n<=y.rowCountPickup;n++)if($('[name="pickup_panel['.concat(n,']"]')).is(":checked")){var a=$('[name="pickup_panel_style['.concat(n,']"]')).val(),o=$('[name="pickup_panel_qty['.concat(n,']"]')).val();if(a>0){if(!o)return i.Z.alertError("Please enter quantity."),!1;y.signPanels.pickup.panel[n]=a,y.signPanels.pickup.qty[n]=o}else if(-1!=a)return i.Z.alertError("Please select a sign panel."),!1}for(var l=1;l<=y.rowCountDropoff;l++)if($('[name="dropoff_panel['.concat(l,']"]')).is(":checked")){var c=$('[name="dropoff_panel_style['.concat(l,']"]')).val(),s=$('[name="dropoff_panel_qty['.concat(l,']"]')).val();if(c>0){if(!s)return i.Z.alertError("Please enter quantity."),!1;y.signPanels.dropoff.panel[l]=c,y.signPanels.dropoff.qty[l]=s}else if(-1!=c)return i.Z.alertError("Please select a sign panel."),!1}r.append("signPanels",JSON.stringify(y.signPanels)),t.find('[type="submit"]').prop("disabled",!0),t.find('[type="submit"]').html('<strong class="text-white">SENDING...</strong>'),$.ajax({url:t.prop("action"),data:r,type:"POST",contentType:!1,processData:!1,cache:!1}).done((function(e){if(e.type&&"error"==e.type)return i.Z.alertError(e.message),t.find('[type="submit"]').prop("disabled",!1),t.find('[type="submit"]').html('<strong class="text-white">TRY AGAIN</strong>'),i.Z.hideLoader(""),!1;if(e.deliveryOrder.editOrder&&!e.deliveryOrder.needPayment&&window.location.reload(),e.deliveryOrder.needPayment){$("[delivery-payment-total-amount]").html(parseFloat(e.deliveryOrder.total).toFixed(2)),$("[delivery-payment-card-name]").val(e.billing.name),$("[delivery-billing-name]").val(e.billing.name),$("[delivery-billing-address]").val(e.billing.address),$("[delivery-billing-city]").val(e.billing.city),$("[delivery-billing-state]").val(e.billing.state),$("[delivery-billing-zip]").val(e.billing.zipcode),e.deliveryOrder.agent.user.authorizenet_profile_id?($("#delivery_use_card_profile").prop("checked",!0),$("#delivery_card_profile_select").prop("disabled",!1),$(".form-another-card input").prop("disabled",!0),$("#delivery_use_another_card").prop("checked",!1),d.Z.loadCards($("#delivery_card_profile_select"),e.deliveryOrder.agent.user.id)):($(".form-another-card input").prop("disabled",!1),$("#delivery_use_another_card").prop("checked",!0),$("#delivery_use_card_profile").prop("checked",!1),$("#delivery_card_profile_select").prop("disabled",!0)),d.Z.loadOfficeCardsVisibleToAgent($("#delivery_card_profile_select"),e.deliveryOrder.office.user.id,(function(){$("#delivery_use_card_profile").prop("checked",!0),$("#delivery_card_profile_select").prop("disabled",!1),$(".form-another-card input").prop("disabled",!0),$("#delivery_use_another_card").prop("checked",!1)}));var r=$("#deliveryOrderModal");r.length&&r.modal("hide");var n=$("#deliveryPaymentModal");n.length&&(n.find('[name="delivery_order_id"]').val(e.deliveryOrder.id),i.Z.hideLoader("deliveryPaymentModal"))}else window.location.reload()})).fail((function(e){var r=e.responseJSON,n="<ul>";for(var a in r.errors)$('[name^="'.concat(a,'"]')).addClass("is-invalid"),n+="<li class='text-danger'>"+r.errors[a]+"</li>";n+="</ul>",i.Z.alertError(n),t.find('[type="submit"]').prop("disabled",!1),t.find('[type="submit"]').html('<strong class="text-white">TRY AGAIN</strong>'),i.Z.hideLoader("")}))}))})),u(n,"calculateAdjustments",(function(){for(var e,t,r=0,n=y.rowCount,a=1;a<=n;a++)e=$('[name="delivery_price_adjustment_charge['.concat(a,']"]')).val(),t=$('[name="delivery_price_adjustment_discount['.concat(a,']"]')).val(),e>0&&(r=parseFloat(r)+parseFloat(e)),t>0&&(r=parseFloat(r)-parseFloat(t));y.totalAdjusted=r,y.totalAdjusted<0?$("[delivery-adjustments]").html('<span class="text-danger">- $'.concat(-1*y.totalAdjusted,"</span>")):$("[delivery-adjustments]").html("$".concat(y.totalAdjusted)),$('[name="delivery_order_zone_fee"]').trigger("change")})),u(n,"loadSavedAdjustments",(function(e){var t=$("#rowTmplDelivery").html(),r=$("#rowContainerDelivery"),n=0;this.resetPricingAdjustment(),r.empty(),$.each(e,(function(e,a){y.rowCount++;var o=t.replace(/rowCount/g,y.rowCount);r.append(o),$('[name="delivery_price_adjustment_description['.concat(y.rowCount,']"]')).val(a.description),$('[name="delivery_price_adjustment_charge['.concat(y.rowCount,']"]')).val(a.charge),$('[name="delivery_price_adjustment_discount['.concat(y.rowCount,']"]')).val(a.discount),y.pricingAdjustments.description[e]=a.description,y.pricingAdjustments.charge[e]=a.charge,y.pricingAdjustments.discount[e]=a.discount,n=parseFloat(n)+parseFloat(a.charge),n=parseFloat(n)-parseFloat(a.discount),y.totalAdjusted=n,y.totalAdjusted<0?$("[delivery-adjustments]").html('<span class="text-danger">- $'.concat(-1*y.totalAdjusted,"</span>")):$("[delivery-adjustments]").html("$".concat(y.totalAdjusted))})),this.calculateAdjustments()})),u(n,"resetPricingAdjustment",(function(){y.pricingAdjustments={description:[],charge:[],discount:[]}})),u(n,"resetSignPanels",(function(){$('[name="pickup_panel[1]"]').prop("checked",!1).prop("disabled",!1),$('[name="pickup_panel_qty[1]"]').val("").prop("disabled",!1),$('[name="pickup_panel_style[1]"]').val(0).prop("disabled",!0),$("#pickupContainer").find(".to-append").remove(),$(".add-new-pickup").show()})),u(n,"onAddressChange",(function(){var e=this;$('[name="delivery_order_address"]').on("change",(function(t){var r=t.target;$(r).val($(r).val().replace(/[,]/g,"").trim()),e.startDeliveryMap(),e.disableAllDates()}))})),u(n,"onCityChange",(function(){$("#delivery_order_city").on("change",(function(e){var t=e.target;$(t).val($(t).val().replace(/[,]/g,"").trim())}))})),n);$((function(){y.init()}))},5195:(e,t,r)=>{r.d(t,{Z:()=>n});const n={googleKey:r(1601).Z.urlContains("local")?"AIzaSyCNqhRTqZM2fILA4IL2F2uZEXKGAn6T_cw":"AIzaSyDvDROcLtqhfIpsWUdbU7sm5p98xjSrThw"}},1601:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(7757),a=r.n(n);r(6486);function o(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t,r,n,a,o,i){try{var l=e[o](i),d=l.value}catch(e){return void r(e)}l.done?t(d):Promise.resolve(d).then(n,a)}function d(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){l(o,n,a,i,d,"next",e)}function d(e){l(o,n,a,i,d,"throw",e)}i(void 0)}))}}var c={getSiteUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return window.location.origin+e},validateEmail:function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},validateDomain:function(e){return/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9](?:\.[a-zA-Z]{2,})+$/.test(String(e).toLowerCase())},alertError:function(e){$("#errorModalContent").html(e),$("#errorModal").modal("show"),$(".modal").css({"overflow-y":"scroll"})},alertMsg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=$("#messageModal");r.find("#messageModelTitle").html(e),r.find("#messageModelContent").html(t),r.modal("show"),$(".modal").css({"overflow-y":"scroll"})},confirm:function(e,t,r,n){$(".modal").css({"overflow-y":"scroll"}),e?$("#confirmModalHeader").html(e):$("#confirmModalHeader").html("Are you sure?"),t?$("#confirmModalContent").html(t):$("#confirmModalContent").html("This action is irreversible!"),$("#confirmModal").modal("show"),$("#confirmBtnOk").off("click"),$("#confirmBtnOk").on("click",(function(e){e.stopImmediatePropagation(),$("#confirmModal").modal("hide"),r()})),$("#confirmBtnCancel").off("click"),$("#confirmBtnCancel").on("click",(function(e){e.stopImmediatePropagation(),$("#confirmModal").modal("hide"),n()}))},confirm2:function(e,t,r,n){$(".modal").css({"overflow-y":"scroll"}),e?$("#confirmModalHeader2").html(e):$("#confirmModalHeader2").html("Are you sure?"),t?$("#confirmModalContent2").html(t):$("#confirmModalContent2").html("This action is irreversible!"),$("#confirmModal2").modal("show"),$("#confirmBtnOk2").off("click"),$("#confirmBtnOk2").on("click",(function(e){e.stopImmediatePropagation(),$("#confirmModal2").modal("hide"),r()})),$("#confirmBtnCancel2").off("click"),$("#confirmBtnCancel2").on("click",(function(e){e.stopImmediatePropagation(),$("#confirmModal2").modal("hide"),n()}))},roundToHalf:function(e){return Math.round(2*e)/2},reloadPage:function(){window.location.reload()},serverErrorMessage:function(){return"An error occured, please try again or contact support if the problem persists."},inchesToFeet:function(e){return e/12},feetToInches:function(e){return 12*e},getDecimal:function(e){return e%1},isMobilePhone:function(){return window.matchMedia("only screen and (max-width: 800px)").matches},isTablet:function(){return window.matchMedia("only screen and (min-device-width: 768px) and (max-device-width: 1366px) and (-webkit-min-device-pixel-ratio: 1)").matches},redirectTo:function(e){window.location.href=e},urlContains:function(e){return-1!=window.location.href.indexOf(e)},stringContains:function(e,t){return-1!=e.indexOf(t)},validateForm:function(e){return d(a().mark((function t(){var r,n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e instanceof HTMLElement)){t.next=17;break}if("form"!==e.localName){t.next=13;break}return r=e.querySelectorAll("input"),n=[],t.next=6,r.forEach((function(t){if(!("validation-except"in t.attributes)&&!["file"].includes(t.type)&&("required"in t.attributes&&!t.value.trim()&&n.push({node:t,type:"required"}),"validation-match"in t.attributes)){var r=t.attributes["validation-match"].value,a=(r=e[r]).value,o=t.value;a.trim()!=o.trim()&&(n.push({node:t,type:"match"}),n.push({node:r,type:"match"}))}}));case 6:return t.sent,document.querySelectorAll(".invalid-feedback").forEach((function(e){return e.remove()})),n.forEach((function(e){var t,r,n=e.node.attributes[e.type+"-error-msg"],a=null!==(t=null===(r=e.node.attributes["error-class"])||void 0===r?void 0:r.value)&&void 0!==t?t:"";if(e.node.classList.add("is-invalid"),n){var o='<div class="invalid-feedback '.concat(a,'">').concat(n.value,"</div>");e.node.insertAdjacentHTML("afterend",o)}})),n.length||(e.querySelectorAll("input").forEach((function(e){"validation-except"in e.attributes||(e.classList.remove("is-invalid"),e.classList.add("is-valid"))})),document.querySelectorAll(".invalid-feedback").forEach((function(e){return e.remove()}))),t.abrupt("return",{ok:!n.length,errors:n});case 13:return console.error("validateForm() acept  HTML element type of <form>. * YOU GIVE US  <".concat(e.localName,">").toUpperCase()),t.abrupt("return",!1);case 15:t.next=19;break;case 17:return console.error("validateForm() acept  HTML element.".toUpperCase()),t.abrupt("return",!1);case 19:case"end":return t.stop()}}),t)})))()},loadImageOn:function(e,t){(e=$(e)).length&&e.on("change",(function(e){if((t=$(t)).length){var r=e.target.files[0];t.prop("src",URL.createObjectURL(r))}}))},parseDate:function(e){var t=e.slice(0,10),r=(t=t.replace(/\//g,"-")).split("-");return new Date(r[0],r[1]-1,r[2])},parseUSDate:function(e){var t=e.slice(0,10),r=(t=t.replace(/\//g,"-")).split("-");return new Date(r[2],r[0]-1,r[1])},formatDate:function(e){var t=this.parseDate(e);return new Intl.DateTimeFormat("en",{month:"numeric",day:"numeric",year:"numeric"}).format(t)},formatDateCustom:function(e,t){var r=this.parseDate(e);return new Intl.DateTimeFormat("en",t).format(r)},formatDateTime:function(e){var t=new Date(e.replace(/\s/,"T")),r=t.getHours(),n=t.getMinutes(),a=r>=12?"PM":"AM",o=(r=(r%=12)||12)+":"+(n=n<10?"0"+n:n)+" "+a;return t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear()+"  "+o},formatDateUsa:function(e){var t=this.parseDate(e);return new Intl.DateTimeFormat("en-US").format(t)},formatDateUsaDateString:function(e){var t=this.parseUSDate(e);return new Intl.DateTimeFormat("en-US").format(t)},diffDays:function(e,t){var r=new Date(e),n=new Date(t).getTime()-r.getTime();return parseInt(n/864e5)},isNextDay:function(e,t){return 1==this.diffDays(e,t)},isCutoffTime:function(){var e=new Date;return e.getHours()>=20&&e.getMinutes()>0},getDateStringUsa:function(e){var t=e.getFullYear(),r="".concat(e.getMonth()+1),n="".concat(e.getDate());return 1==n.length&&(n="0"+n),1==r.length&&(r="0"+r),r+"/"+n+"/"+t},getDateString:function(e){var t=e.getFullYear(),r="".concat(e.getMonth()+1),n="".concat(e.getDate());return 1==n.length&&(n="0"+n),1==r.length&&(r="0"+r),"".concat(t,"-").concat(r,"-").concat(n)},getDateTimeString:function(e){var t=e.getFullYear(),r="".concat(e.getMonth()+1),n="".concat(e.getDate());1==n.length&&(n="0"+n),1==r.length&&(r="0"+r);var a=e.getHours(),o=e.getMinutes(),i=(a=(a%=12)||12)+":"+(o=o<10?"0"+o:o);return"".concat(t,"-").concat(r,"-").concat(n,"T").concat(i)},isLastDayOfMonth:function(e){return 1===new Date(e.getTime()+864e5).getDate()},tzOffset:function(){return(new Date).getTimezoneOffset()},previousDay:function(e){return e.setDate(e.getDate()-1),e},isWeekend:function(e){return 6===e.getDay()||0===e.getDay()},create_id:function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))},parseZonePoints:function(e){return(e=JSON.parse(e)).map((function(e){return{lat:parseFloat(e.lat),lng:parseFloat(e.lng)}}))},orderOptions:function(e){var t=$(e),r=t.map((function(e,t){return{t:$(t).text(),v:t.value}})).get();r.sort((function(e,t){return e.t<t.t?1:e.t>t.t?-1:0})),t.each((function(e,t){t.value=r[e].v,$(t).text(r[e].t)}))},cardNumberInput:function(e){if(e){var t,r,n=document.querySelector(e),a=/^\d{0,16}$/g,o=function(e){return e.replace(/[^\d]/g,"")},i=function(e,t){return Math.floor(e/(t+1))},l=function(e){var t={amex:/^3/,visa:/^4/,mastercard:/^5/,disc:/^6/,genric:/(^1|^2|^7|^8|^9|^0)/};for(var r in t)if(t[r].test(e)){r;break}};n.addEventListener("keydown",(function(e){var n=e.target;t=n.value,r=n.selectionEnd})),n.addEventListener("input",(function(e){var n,d=e.target,c=o(d.value);c.match(a)?(c=function(e,t,r){for(var n=[],a=0;a<e.length;a++)0!==a&&a%t==0&&n.push(r),n.push(e[a]);return n.join("")}(c,4," "),n=r-i(r,4)+i(r+(c.length-t.length),4)+(o(c).length-o(t).length),d.value=""!==c?c:""):(d.value=t,n=r),d.setSelectionRange(n,n),l(d.value)}))}},removeFromArray:function(e,t){return e.splice(e.indexOf(t),1)},getZoneSettings:function(){return d(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.get(c.getSiteUrl("/get/zone/settings"));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))()},genId:function(){return"id"+Math.floor(99999999999999.66*Math.random()).toString(36).substring(1)},showLoader:function(){$("#loader_image").modal("show")},hideLoader:function(e){setTimeout((function(){$("#loader_image").modal("hide"),e&&($(".modal").css({"overflow-y":"scroll"}),$("#".concat(e)).modal())}),500)},openModal:function(e){$("#".concat(e)).modal()},closeModal:function(e){$("#".concat(e)).modal("hide"),$(".modal").css({"overflow-y":"scroll"})},inputNumber:function(e){var t=o(Array(100).keys());$("".concat(e)).on("keyup",(function(e){var r=$(e.target);r.val()&&(t.includes(parseInt(r.val()))?r.val(parseInt(r.val())):r.val(1))}))},getCurrentUserRole:function(){return d(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.get("".concat(c.getSiteUrl(),"/current/user/role"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},getInitialsFromName:function(e){var t=e.split(" ");return(t.shift().charAt(0)+t.pop().charAt(0)).toUpperCase()},initialUppercase:function(e){return"string"!=typeof e?"":e.charAt(0).toUpperCase()+e.slice(1)},initialUppercaseWord:function(e){if("string"!=typeof e)return"";for(var t=e.split(" "),r=0;r<t.length;r++)""!=t[r]&&void 0!==t[r]&&(t[r]=t[r][0].toUpperCase()+t[r].substr(1).toLowerCase());return t.join(" ")},loadImagePreview:function(e,t){if(e.target.files.length>0){var r=URL.createObjectURL(e.target.files[0]);document.getElementById(t).src=r}},isSuperAdmin:function(){return 1==$("#userRole").val()},log:function(e){return console.log(e),!1},decodeHtml:function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value},removeEmptyObjectFromArray:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.filter((function(e){return 0!==Object.keys(e).length}));return t},roundToDecimal:function(e,t){var r=Math.pow(10,t);return Math.round(e*r)/r}};const s=c}},e=>{e.O(0,[898],(()=>{return t=9477,e(e.s=t);var t}));e.O()}]);